\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{milsymb}[2017/11/09 Dev]
\RequirePackage{tikz}
\RequirePackage[T1]{fontenc}
\RequirePackage{fix-cm}
\RequirePackage{arevmath}
\RequirePackage{marvosym}
\RequirePackage{acronym}
\RequirePackage{amssymb}
\RequirePackage{xifthen}
\RequirePackage{xparse}
\definecolor{friendlyA}{RGB}{128, 224, 255}
\definecolor{hostileA}{RGB}{255, 128, 128}
\definecolor{neutralA}{RGB}{170, 255, 170}
\definecolor{unknownA}{RGB}{255, 255, 128}
\definecolor{lightgray}{gray}{0.75}
\usetikzlibrary{arrows.meta, shapes.geometric, shapes.symbols, positioning, calc}
\tikzstyle{reverseclip}=[insert path={(current bounding box.north east) --
  (current bounding box.south east) --
  (current bounding box.south west) --
  (current bounding box.north west) --
  (current bounding box.north east)}
]
\tikzset{
%% FRAMES %%
% AIR %
MilSymb air/none/.pic={
\path (0.5, 0.5) rectangle (-0.5, -0.5);
\draw[lightgray, dashed] (0:0.5) -- (45:0.5) -- (90:0.5) -- (135:0.5) -- (180:0.5) -- (225:0.5) -- (270:0.5) -- (315:0.5) -- cycle; %DEBUG - symbol template
\begin{scope}
\clip (0:0.5) -- (45:0.5) -- (90:0.5) -- (135:0.5) -- (180:0.5) -- (225:0.5) -- (270:0.5) -- (315:0.5) -- cycle;
	\draw[lightgray, dashed] (0.5, 0.2) -- (-0.5, 0.2);
	\draw[lightgray, dashed] (0.5, -0.2) -- (-0.5, -0.2);
\end{scope}},
MilSymb air/missile/.pic={
\pic[rotate=90]{MilSymb air/none};},
MilSymb air/friendly/.pic={
\draw [fill=MilSymb@fill, \MilSymb@line] (-0.555, -0.5) arc (180:0:0.555 and 1.37);},
MilSymb air/hostile/.pic={
\draw [fill=MilSymb@fill, \MilSymb@line] (0.5, -0.5) -- (0.5, 0.21) -- (0, 0.71) --  (-0.5, 0.21) --  (-0.5, -0.5);},
MilSymb air/neutral/.pic={
\draw [fill=MilSymb@fill, \MilSymb@line] (0.5, -0.5) -- (0.5, 0.5) -- (-0.5, 0.5) -- (-0.5, -0.5);},
MilSymb air/unknown/.pic={
\path [use as bounding box] (-0.705,-0.355) -- (-0.705, 0.705) -- (0.705, 0.705) -- (0.705, -0.355) -- cycle;
\draw [fill=MilSymb@fill, \MilSymb@line] (315:0.5) to[out=0, in=0, looseness=1.7] (45:0.5) to[out=90,in=90,looseness=1.7] (135:0.5) to[out=180,in=180,looseness=1.7] (225:0.5);},
% LAND %
MilSymb land/none/.pic={
\pic{MilSymb air/none};},
MilSymb land/friendly/.pic={
\draw [fill=MilSymb@fill, \MilSymb@line] (-0.75, -0.5) rectangle (0.75, 0.5);},
MilSymb land/hostile/.pic={
\draw [fill=MilSymb@fill, \MilSymb@line] (0, -0.705) -- (-0.705, 0) -- (0, 0.705) -- (0.705, 0) -- cycle;},
MilSymb land/neutral/.pic={
\draw [fill=MilSymb@fill, \MilSymb@line] (0.5, -0.5) rectangle (-0.5, 0.5);},
MilSymb land/unknown/.pic={
\path [use as bounding box] (-0.705,-0.705) -- (-0.705, 0.705) -- (0.705, 0.705) -- (0.705, -0.705) -- cycle;
\draw [fill=MilSymb@fill, \MilSymb@line] (45:0.5) to[out=90,in=90,looseness=1.7] (135:0.5) to[out=180,in=180,looseness=1.7] (225:0.5) to[out=270, in=270, looseness=1.7] (315:0.5) to[out=0, in=0, looseness=1.7] (45:0.5) -- cycle;
},
% EQUIPMENT/SEA SURFACE %
MilSymb equipment/none/.pic={
\path (0.5, 0.5) rectangle (-0.5, -0.5);
\draw[lightgray, dashed] (0:0.5) -- (45:0.5) -- (90:0.5) -- (135:0.5) -- (180:0.5) -- (225:0.5) -- (270:0.5) -- (315:0.5) -- cycle;},
MilSymb equipment/friendly/.pic={
\draw [fill=MilSymb@fill, \MilSymb@line] circle (0.5);},
MilSymb equipment/hostile/.pic={
\pic{MilSymb land/hostile};},
MilSymb equipment/neutral/.pic={
\pic{MilSymb land/neutral};},
MilSymb equipment/unknown/.pic={ 
\pic{MilSymb land/unknown};},
% INSTALLATION %
MilSymb installation/none/.pic={
\pic{MilSymb air/none};},
MilSymb installation/friendly/.pic={
\fill (0.2, 0.65) rectangle (-0.2, 0.5);
\pic [local bounding box=M] {MilSymb land/friendly};},
MilSymb installation/hostile/.pic={
\fill (0.2, 0.825) rectangle(-0.2, 0.4);
\pic [local bounding box=M] {MilSymb land/hostile};},
MilSymb installation/neutral/.pic={
\fill (0.2, 0.65) rectangle (-0.2, 0.5);
\pic[local bounding box=M] {MilSymb land/neutral};},
MilSymb installation/unknown/.pic={ 
\fill (0.2, 0.825) rectangle(-0.2, 0.4);
\pic [local bounding box=M] {MilSymb land/unknown};},
% SEA SUBSURFACE %
MilSymb seasubsurface/none/.pic={
\pic {MilSymb air/none};},
MilSymb seasubsurface/friendly/.pic={
\pic [rotate=180] {MilSymb air/friendly};},
MilSymb seasubsurface/hostile/.pic={
\pic [rotate=180] {MilSymb air/hostile};},
MilSymb seasubsurface/neutral/.pic={
\pic [rotate=180] {MilSymb air/neutral};},
MilSymb seasubsurface/unknown/.pic={
\pic [rotate=180] {MilSymb air/unknown};},
% SPACE %
MilSymb space/none/.pic={
\pic {MilSymb air/none};},
MilSymb space/friendly/.pic={
\pic {MilSymb air/friendly};
\begin{scope}
\clip (-0.555, -0.5) arc (180:0:0.555 and 1.37);
\fill (0.5, 0.87) rectangle (-0.5, 0.72);
\end{scope}},
MilSymb space/hostile/.pic={
\pic {MilSymb air/hostile};
\begin{scope}
\clip (0.5, -0.5) -- (0.5, 0.21) -- (0, 0.71) --  (-0.5, 0.21) --  (-0.5, -0.5);
\fill (0.5, 0.71) rectangle (-0.5, 0.56);
\end{scope}},
MilSymb space/neutral/.pic={
\pic [local bounding box=M]{MilSymb air/neutral};
\filldraw (0.5, 0.65) rectangle (-0.5, 0.5);},
MilSymb space/unknown/.pic={
\pic {MilSymb air/unknown};
\begin{scope}
\clip (315:0.5) to[out=0, in=0, looseness=1.7] (45:0.5) to[out=90,in=90,looseness=1.7] (135:0.5) to[out=180,in=180,looseness=1.7] (225:0.5);
\fill (0.5, 0.73) rectangle (-0.5, 0.58);
\end{scope}},
% ACTIVITY %
MilSymb activity/none/.pic={
\pic{MilSymb air/none};},
MilSymb activity/friendly/.pic={
\pic {MilSymb land/friendly};
\fill (0.75, 0.5) rectangle (0.6, 0.35);
\fill (-0.75, 0.5) rectangle (-0.6, 0.35);
\fill (0.75, -0.5) rectangle (0.6, -0.35);
\fill (-0.75, -0.5) rectangle (-0.6, -0.35);
},
MilSymb activity/hostile/.pic={
\pic {MilSymb land/hostile};
\fill (0, 0.705) -- ++(315:0.15) -- ++(225:0.15) -- ++(135:0.15) -- cycle;
\fill (0, -0.705) -- ++(45:0.15) -- ++(135:0.15) -- ++(225:0.15) -- cycle;
\fill (0.705, 0) -- ++(135:0.15) -- ++(225:0.15) -- ++(315:0.15) -- cycle;
\fill (-0.705, 0) -- ++(45:0.15) -- ++(315:0.15) -- ++(225:0.15) -- cycle;
},
MilSymb activity/neutral/.pic={
\pic {MilSymb land/neutral};
\fill (0.5, 0.5) rectangle (0.35, 0.35);
\fill (-0.5, 0.5) rectangle (-0.35, 0.35);
\fill (0.5, -0.5) rectangle (0.35, -0.35);
\fill (-0.5, -0.5) rectangle (-0.35, -0.35);
},
MilSymb activity/unknown/.pic={ 
\pic {MilSymb land/unknown};
\begin{scope}
\clip (45:0.5) to[out=90,in=90,looseness=1.7] (135:0.5) to[out=180,in=180,looseness=1.7] (225:0.5) to[out=270, in=270, looseness=1.7] (315:0.5) to[out=0, in=0, looseness=1.7] (45:0.5) -- cycle;
\fill (0.075, 0.705) rectangle (-0.075, 0.555);
\fill (0.075, -0.705) rectangle (-0.075, -0.555);
\fill (0.705, 0.075) rectangle (0.555, -0.075);
\fill (-0.705, 0.075) rectangle (-0.555, -0.075);
\end{scope}}, 
%% AIR SYMBOLS %%
% MAIN %
MilSymb air/main/civilian fixed wing/.pic={
\draw (-0.36,0.125) arc (77:275:0.075 and 0.125) -- (0,0) -- cycle;
\begin{scope}[xscale=-1]
\draw (-0.36,0.125) arc (77:275:0.075 and 0.125) -- (0,0) -- cycle;
\end{scope}},
MilSymb air/main/civilian rotary wing/.pic={
\draw (0.44, 0.15) -- (0.44, -0.15) -- (-0.44, 0.15) -- (-0.44, -0.15) -- cycle;},
MilSymb air/main/military balloon/.pic={
\fill (0, 0.025) circle (0.175);
\fill (-0.05, 0) -- (-0.05,-0.2) -- (0.05, -0.2) -- (0.05,0) -- cycle;},
MilSymb air/main/civilian balloon/.pic={
\path (0.175, 0.2) rectangle (-0.175, -0.2); 
\draw (0, 0.025) circle (0.175);
\begin{scope}
\clip (0, 0.025) circle (0.175) [reverseclip];
	\draw (-0.05, 0) -- (-0.05,-0.2) -- (0.05, -0.2) -- (0.05,0) -- cycle;
\end{scope}},
MilSymb air/main/military airship/.pic={
\fill (0, 0) ellipse (0.45 and 0.15);
\fill (0.2, 0) -- (0.3, 0.175) -- (0.4,0.175) -- (0.375,0) -- (0.4,-0.175) -- (0.3, -0.175) -- cycle;},
MilSymb air/main/civilian airship/.pic={
\path (0.45, 0.175) rectangle (-0.45, -0.175);
\draw (0, 0) ellipse (0.45 and 0.15);
\begin{scope}
\clip (0, 0) ellipse (0.45 and 0.15) [reverseclip];
	\draw (0.2, 0) -- (0.3, 0.175) -- (0.4,0.175) -- (0.375,0) -- (0.4,-0.175) -- (0.3, -0.175) -- cycle;
\end{scope}},
MilSymb air/main/air decoy/.pic={
\pic [yshift=1.5] {MilSymb multi/main/decoy};
\fill (0.4, -0.2) rectangle (-0.4, -0.15);
},
% UPPER %
%% LAND SYMBOLS %%
% FULLFRAME %
MilSymb land/main/air assault with organic lift/friendly/.pic={
\clip \clipfriendly;
\draw (-0.75, -0.2) -- (-0.1, -0.2) -- (0, -0.325) -- (0.1, -0.2) -- (0.75, -0.2);
},
MilSymb land/main/air assault with organic lift/hostile/.pic={
\clip \cliphostile;
\draw (-0.5, -0.2) -- (-0.15, -0.2) -- (0, -0.5) -- (0.15, -0.2) -- (0.5, -0.2);
},
MilSymb land/main/air assault with organic lift/neutral/.pic={
\clip \clipneutral;
\draw (-0.5, -0.2) -- (-0.1, -0.2) -- (0, -0.325) -- (0.1, -0.2) -- (0.5, -0.2);
},
MilSymb land/main/air assault with organic lift/unknown/.pic={
\clip \clipunknown;
\draw (-0.65, -0.2) -- (-0.1, -0.2) -- (0, -0.325) -- (0.1, -0.2) -- (0.65, -0.2);
},
MilSymb land/main/air defence/friendly/.pic={
\clip \clipfriendly;
\draw (-0.75,-0.5) to[out=90,in=90,looseness=0.675] (0.75,-0.5);
},
MilSymb land/main/air defence/hostile/.pic={
\clip \cliphostile;
\draw (225:0.5) to[out=45,in=135,looseness=0.725] (315:0.5);
},
MilSymb land/main/air defence/neutral/.pic={
\clip \clipneutral;
\draw (-0.5, -0.5) to[out=90,in=90,looseness=1] (0.5, -0.5);
},
MilSymb land/main/air defence/unknown/.pic={
\clip \clipunknown;
\draw (225:0.5) to[out=45,in=135,looseness=0.725] (315:0.5);
},
MilSymb land/main/air and naval gunfire liaison company/.pic={
\pic{MilSymb multi/main/field artillery};
\pic [xscale=0.75, yscale=1.4] {MilSymb multi/main/aviation rotary wing};
\pic at (0, 0.345) {MilSymb multi/upper/naval};
},
MilSymb land/main/air and naval gunfire liaison company/friendly/.pic={
\pic {MilSymb land/main/air and naval gunfire liaison company};
\pic {MilSymb land/main/reconnaissance/friendly};
},
MilSymb land/main/air and naval gunfire liaison company/hostile/.pic={
\pic {MilSymb land/main/air and naval gunfire liaison company};
\pic {MilSymb land/main/reconnaissance/hostile};
},
MilSymb land/main/air and naval gunfire liaison company/neutral/.pic={
\pic {MilSymb land/main/air and naval gunfire liaison company};
\pic {MilSymb land/main/reconnaissance/neutral};
},
MilSymb land/main/air and naval gunfire liaison company/unknown/.pic={
\pic {MilSymb land/main/air and naval gunfire liaison company};
\pic {MilSymb land/main/reconnaissance/unknown};
},
MilSymb land/main/amphibious/friendly/.pic={
\clip \clipfriendly;
\pic {MilSymb multi/main/amphibious};
},
MilSymb land/main/amphibious/hostile/.pic={
\clip \cliphostile;
\pic [xscale=0.9] {MilSymb multi/main/amphibious};
},
MilSymb land/main/amphibious/neutral/.pic={
\clip \clipneutral;
\pic [xscale=0.9] {MilSymb multi/main/amphibious};
},
MilSymb land/main/amphibious/unknown/.pic={
\clip \clipunknown;
\pic [xscale=0.9] {MilSymb multi/main/amphibious};
},
MilSymb land/main/analysis/.pic={
\draw (-0.3,-0.2) -- (0.3, -0.2) -- (0, -0.4) -- cycle;
\draw (0, -0.2) -- (0, 0.4);
},
MilSymb land/main/analysis electronic warfare/.pic={
\draw (-0.3,-0.2) -- (0.3, -0.2) -- (0, -0.4) -- cycle;
\draw (0, -0.2) -- (0, 0.4);
\pic at (-0.25, 0) {MilSymb main/text={E}};
\pic at (0.25, 0) {MilSymb main/text={W}};
},
MilSymb land/main/intercept/.pic={
\fill (-0.3,-0.2) -- (0.3, -0.2) -- (0, -0.4) -- cycle;
\draw (0, -0.2) -- (0, 0.4);
},
MilSymb land/main/intercept electronic warfare/.pic={
\fill (-0.3,-0.2) -- (0.3, -0.2) -- (0, -0.4) -- cycle;
\draw (0, -0.2) -- (0, 0.4);
\pic at (-0.25, 0) {MilSymb main/text={E}};
\pic at (0.25, 0) {MilSymb main/text={W}};
},
MilSymb land/main/anti tank anti armour/friendly/.pic={
\clip \clipfriendly;
\draw (-0.75, -0.5) -- (0, 0.5) -- (0.75, -0.5);
},
MilSymb land/main/anti tank anti armour/hostile/.pic={
\clip \cliphostile;
\draw (-0.55, -0.5) -- (0, 0.705) -- (0.55, -0.5);
},
MilSymb land/main/anti tank anti armour/neutral/.pic={
\clip \clipneutral;
\draw (-0.5, -0.5) -- (0, 0.5) -- (0.5, -0.5);
},
MilSymb land/main/anti tank anti armour/unknown/.pic={
\clip \clipunknown;
\draw (225:0.5) -- (0, 0.705) -- (315:0.5);
},
MilSymb land/main/corps support/friendly/.pic={
\clip \clipfriendly;
\draw (0.75, 0.5) -- (0:0.5) -- (0.75, -0.5); 
},
MilSymb land/main/corps support/hostile/.pic={
\clip \cliphostile;
\draw (0.95, 0.5) -- (0.45, 0) -- (0.95, -0.5); 
},
MilSymb land/main/corps support/neutral/.pic={
\clip \clipneutral;
\draw (0.5, 0.5) -- (0.35, 0)  -- (0.5, -0.5);
},
MilSymb land/main/corps support/unknown/.pic={
\clip \clipunknown;
\draw (0.75, 0.5) -- (0:0.5)  -- (0.75, -0.5);
},
MilSymb land/main/direction finding/.pic={
\draw (-0.3, 0.2) -- (0, 0.4) -- (0.3, 0.2);
\draw (0, 0.4) -- (0, -0.4);
},
MilSymb land/main/direction finding electronic warfare/.pic={
\draw (-0.3, 0.2) -- (0, 0.4) -- (0.3, 0.2);
\draw (0, 0.4) -- (0, -0.4);
\pic at (-0.25, 0) {MilSymb main/text={E}};
\pic at (0.25, 0) {MilSymb main/text={W}};
},
MilSymb land/main/search/.pic={
\pic [yscale=-1] {MilSymb land/main/direction finding};
},
MilSymb land/main/search electronic warfare/.pic={
\pic [yscale=-1] {MilSymb land/main/direction finding};
\pic at (-0.25, 0) {MilSymb main/text={E}};
\pic at (0.25, 0) {MilSymb main/text={W}};
},
MilSymb land/main/headquarters/friendly/.pic={
\clip \clipfriendly;
\draw (-0.75, 0.2) -- (0.75, 0.2); 
},
MilSymb land/main/headquarters/hostile/.pic={
\clip \cliphostile;
\draw (0.5, 0.2) -- (-0.5, 0.2); 
},
MilSymb land/main/headquarters/neutral/.pic={
\clip \clipneutral;
\draw (0.5, 0.2) -- (-0.5, 0.2);
},
MilSymb land/main/headquarters/unknown/.pic={
\clip \clipunknown;
\draw (-0.75, 0.2) -- (0.75, 0.2);
},
MilSymb land/main/infantry/friendly/.pic={
\clip \clipfriendly;
\draw (-0.75, 0.5) -- (0.75, -0.5); 
\draw (-0.75, -0.5) -- (0.75, 0.5); 
},
MilSymb land/main/infantry/hostile/.pic={
\clip \cliphostile;
\draw (-0.5, 0.25) -- (0.5, -0.25); 
\draw (-0.5, -0.25) -- (0.5, 0.25); 
},
MilSymb land/main/infantry/neutral/.pic={
\clip \clipneutral;
\draw (-0.5, 0.25) -- (0.5, -0.25); 
\draw (-0.5, -0.25) -- (0.5, 0.25); 
},
MilSymb land/main/infantry/unknown/.pic={
\clip \clipunknown;
\draw (-0.75, 0.35) -- (0.75, -0.35); 
\draw (-0.75, -0.35) -- (0.75, 0.35); 
},
MilSymb land/main/jamming/friendly/.pic={
\clip \clipfriendly;
\pic at (0, 0.4) [xscale=0.65, yscale=0.5] {MilSymb multi/main/amphibious};
\pic at (0.936, 0.4) [xscale=0.65, yscale=0.5] {MilSymb multi/main/amphibious};
\pic at (-0.936, 0.4) [xscale=0.65, yscale=0.5] {MilSymb multi/main/amphibious};
\pic at (0, 0.3) [xscale=0.65, yscale=0.5] {MilSymb multi/main/amphibious};
\pic at (0.936, 0.3) [xscale=0.65, yscale=0.5] {MilSymb multi/main/amphibious};
\pic at (-0.936, 0.3) [xscale=0.65, yscale=0.5] {MilSymb multi/main/amphibious};
},
MilSymb land/main/jamming/hostile/.pic={
\clip \cliphostile;
\pic at (0, 0.4) [xscale=0.75, yscale=0.5] {MilSymb multi/main/amphibious};
\pic at (0, 0.3) [xscale=0.75, yscale=0.5] {MilSymb multi/main/amphibious};
},
MilSymb land/main/jamming/neutral/.pic={
\clip \clipneutral;
\pic at (0, 0.4) [xscale=0.65, yscale=0.5] {MilSymb multi/main/amphibious};
\pic at (0, 0.3) [xscale=0.65, yscale=0.5] {MilSymb multi/main/amphibious};
},
MilSymb land/main/jamming/unknown/.pic={
\clip \clipunknown;
\clip (-0.45, 0.2) rectangle (0.45, 0.5);
\pic at (0, 0.4) [xscale=0.6, yscale=0.5] {MilSymb multi/main/amphibious};
\pic at (0, 0.3) [xscale=0.6, yscale=0.5] {MilSymb multi/main/amphibious};
},
MilSymb land/main/jamming electronic warfare/.pic={
\pic {MilSymb main/textfull={EW}};
\pic {MilSymb land/main/jamming/\MilSymb@selectedfaction};
},
MilSymb land/main/main gun system/friendly/.pic={
\clip \clipfriendly;
\draw (-0.5, 0.5) -- (-0.5, -0.5); 
},
MilSymb land/main/main gun system/hostile/.pic={
\clip \cliphostile;
\draw (-0.5, 0.5) -- (-0.5, -0.5);  
},
MilSymb land/main/main gun system/neutral/.pic={
\clip \clipneutral;
\draw (-0.3, 0.5) -- (-0.3, -0.5);  
},
MilSymb land/main/main gun system/unknown/.pic={
\clip \clipunknown;
\draw (-0.5, 0.5) -- (-0.5, -0.5); 
},
MilSymb land/main/motorized/.pic={
\draw (M.north) -- (M.south);
},
MilSymb land/main/reconnaissance/friendly/.pic={
\clip \clipfriendly;
\draw (0.75, 0.5) -- (-0.75, -0.5);
},
MilSymb land/main/reconnaissance/hostile/.pic={
\clip \cliphostile;
\draw (0.5, 0.5) -- (-0.5, -0.5);
},
MilSymb land/main/reconnaissance/neutral/.pic={
\clip \clipneutral;
\draw (0.5, 0.5) -- (-0.5, -0.5);
},
MilSymb land/main/reconnaissance/unknown/.pic={
\clip \clipunknown;
\draw (0.5, 0.5) -- (-0.5, -0.5);
},
MilSymb land/main/signal radio/.pic={
\pic {MilSymb multi/main/signal/\MilSymb@selectedfaction};
\pic {MilSymb land/main/radio};
},
MilSymb land/main/signal radio relay/.pic={
\pic {MilSymb multi/main/signal/\MilSymb@selectedfaction};
\pic {MilSymb land/main/radio relay};
},
MilSymb land/main/signal radio teletype centre/.pic={
\pic {MilSymb multi/main/signal/\MilSymb@selectedfaction};
\pic {MilSymb land/main/radio teletype centre};
},
MilSymb land/main/signal tactical satellite/.pic={
\pic {MilSymb multi/main/signal/\MilSymb@selectedfaction};
\pic {MilSymb land/main/tactical satellite};
},
MilSymb land/main/supply/friendly/.pic={
\draw (0.75, -0.25) -- (-0.75, -0.25);
},
MilSymb land/main/supply/hostile/.pic={
\clip \cliphostile;
\draw (0.5, -0.25) -- (-0.5, -0.25);
},
MilSymb land/main/supply/neutral/.pic={
\draw (0.5, -0.25) -- (-0.5, -0.25);
},
MilSymb land/main/supply/unknown/.pic={
\clip \clipunknown;
\draw (0.75, -0.25) -- (-0.75, -0.25);
},
MilSymb land/main/above corps support/friendly/.pic={
\pic {MilSymb land/main/corps support/friendly};
\pic [xscale=-1] {MilSymb land/main/corps support/friendly};
},
MilSymb land/main/above corps support/hostile/.pic={
\clip \cliphostile;
\pic {MilSymb land/main/corps support/hostile};
\pic [xscale=-1] {MilSymb land/main/corps support/hostile};
},
MilSymb land/main/above corps support/neutral/.pic={
\pic {MilSymb land/main/corps support/neutral};
\pic [xscale=-1] {MilSymb land/main/corps support/neutral};
},
MilSymb land/main/above corps support/unknown/.pic={
\clip \clipunknown;
\pic {MilSymb land/main/corps support/unknown};
\pic [xscale=-1] {MilSymb land/main/corps support/unknown};
},
% MAIN %
MilSymb land/main/air traffic services/.pic={
\pic [xscale=0.75, yscale= 1.35] {MilSymb multi/main/aviation rotary wing};
\draw (0, -0.2) -- (0, 0.05);
\fill (0, 0.125) circle (0.075);
},
MilSymb land/main/aviation composite fixed wing and rotary wing/.pic={
\pic [xscale=0.45, yscale=0.75] {MilSymb multi/main/aviation fixed wing};
\pic [yscale=0.45, xscale=0.7, rotate=90] {MilSymb multi/main/aviation rotary wing};
},
MilSymb land/main/civilian military cooperation/.pic={
\draw (0.375, 0.2) -- (-0.375, 0.2) -- (-0.375, -0.025) to[in=270, out=270, looseness=0.75] (0.375, -0.025) -- cycle;
},
MilSymb land/main/combat support/.pic={
\fill (0.15, 0.2) -- (-0.15, 0.2) -- (-0.15, -0.05) -- (0, -0.2) -- (0.15, -0.05) -- cycle;
},
MilSymb land/main/combined arms/.pic={
\pic {MilSymb multi/main/armoured};
\draw (0.275, 0.2) -- (-0.275, -0.2);
\draw (0.275, -0.2) -- (-0.275, 0.2);
},
MilSymb multi/main/drilling/.pic={
\fill (-0.1,-0.2) -- (0.1,-0.2) -- (0.2, 0.2) -- (-0.2, 0.2) -- cycle;
},
MilSymb land/main/electronic ranging/.pic={
\begin{scope} [yshift=1]
\draw (135:0.225) arc (135:315:0.225) -- cycle;
\draw (0,0) -- (225:-0.225);
\end{scope}
},
MilSymb multi/main/armoured engineer/.pic={
\pic [scale=0.6] {MilSymb multi/main/engineer};
\pic {MilSymb multi/main/armoured};
},
MilSymb land/main/observer/.pic={
\draw (0.25, -0.2) -- (-0.25, -0.2) -- (0, 0.2) -- cycle;
},
MilSymb land/main/field artillery observer/.pic={
\pic [scale=0.5, yshift=-3.5] {MilSymb multi/main/field artillery};
\pic {MilSymb land/main/observer};
\draw (-0.25, -0.2) -- (0.125,0);
},
MilSymb land/main/self propelled field artillery/.pic={
\pic {MilSymb multi/main/field artillery};
\pic {MilSymb multi/main/armoured};
},
MilSymb land/main/finance/.pic={
\draw (-0.3, -0.2) -- (-0.3, 0) -- (-0.15, 0.2) -- (0.15, 0.2) -- (0.3, 0) -- (0.3, -0.2) -- cycle;
\draw (-0.3, 0) -- (0.3, 0);
},
MilSymb land/main/fire protection/.pic={
\pic [scale=0.7] {MilSymb multi/main/field artillery};
\pic [xscale=0.4, yscale=0.6]{MilSymb multi/main/aviation rotary wing};
\pic [xscale=0.6, yscale=0.4, rotate=90]{MilSymb multi/main/aviation rotary wing};
},
MilSymb land/main/labour/.pic={
\draw (0.1, 0) -- (-0.1, 0) -- (0, -0.15) -- cycle;
\draw (0, 0) -- (0, 0.15);
\draw (0.1, 0.15) -- (-0.1, 0.15); 
},
MilSymb land/main/laundry/.pic={
\draw (0, -0.2) -- (0, 0.1)  -- (-0.15, 0.2);
\draw (0, 0.1) -- (-0.15, 0.1);
\draw (0, 0.1) -- (-0.15, 0);
},
MilSymb land/main/missile/.pic={
\draw (0, -0.2) -- (0, 0.2);
\draw (0.1, -0.2) -- (0.1, 0.1) arc(0:180:0.1) -- (-0.1, -0.2);
},
MilSymb land/main/mortar/.pic={
\draw (0, -0.15) circle (0.05);
\draw (0, -0.1) -- (0, 0.2);
\draw (0.05, 0.125) -- (0, 0.2) -- (-0.05, 0.125);
},
MilSymb land/main/tactical mortar/.pic={
\pic [scale=0.75] {MilSymb land/main/mortar};
\pic {MilSymb multi/main/armoured};
},
MilSymb land/main/mortuary affairs/.pic={
\draw (0.1, -0.175) rectangle (-0.1, 0.175);
\draw (0, -0.15) -- (0, 0.15);
\draw (0.05, 0.1) -- (-0.05, 0.1);
},
MilSymb land/main/ordnance/.pic={
\draw (0,-0.075) ellipse (0.15 and 0.125);
\begin{scope}
\path [use as bounding box] (0.3, 0.2) rectangle (-0.3, -0.2);
\clip (0,-0.075) ellipse (0.15 and 0.125) [reverseclip];
\draw (0, -0.05) -- (0.15, 0.15);
\draw (0, -0.05) -- (-0.15, 0.15);
\draw (0, -0.05) -- (0.1, 0.175);
\draw (0, -0.05) -- (-0.1, 0.175);
\end{scope}
},
MilSymb land/main/pipeline/.pic={
\draw (0.125, -0.2) rectangle (-0.125, 0.05);
\draw (0.125, -0.15) -- (0.275, -0.15);
\draw (0.125, 0) -- (0.275, 0);
\draw (-0.125, -0.15) -- (-0.275, -0.15);
\draw (-0.125, 0) -- (-0.275, 0);
\draw (0.1, 0.2) rectangle (-0.1, 0.15);
\draw (0.025, 0.05) -- (0.025, 0.15);
\draw (-0.025, 0.05) -- (-0.025, 0.15);
},
MilSymb land/main/postal/.pic={
\draw (0.1, 0.2) arc(180:225:0.565) arc(270:197:0.565) -- cycle; 
},
MilSymb land/main/psychological operations broadcast/.pic={
\pic {MilSymb multi/main/antenna};
\pic {MilSymb multi/main/psychological operations filled};
},
MilSymb land/main/radio/.pic={
\draw (0, -0.125) circle (0.075);
\draw (0, -0.05) -- (0, 0.2);
\draw (0.15, 0.15) -- (0.1, 0.2) -- (0.05, 0.15) -- (0, 0.2) -- (-0.05, 0.15) -- (-0.1, 0.2) -- (-0.15, 0.15);
},
MilSymb land/main/radio relay/.pic={
\draw (0, -0.125) circle (0.075);
\draw (0, -0.05) -- (0, 0.2);
\draw (0.15, 0.2) -- (-0.15, 0.2);
},
MilSymb land/main/radio teletype centre/.pic={
\draw (0, -0.2) -- (0, 0.2);
\draw (0.15, 0.2) -- (-0.15, 0.2);
\draw (0.1, 0.15) -- (-0.1, 0.15);
\pic at (0, -0.1) {MilSymb main/textsmall={C}};
},
MilSymb land/main/sniper/.pic={
\draw (0, -0.2) -- (0, 0.15);
\draw (0.25, 0.2) -- (0.05, 0.2);
\draw (-0.25, 0.2) -- (-0.05, 0.2);
},
MilSymb land/main/surveillance/.pic={
\fill (0.25, -0.2) -- (-0.25, -0.2) -- (0, 0.2) -- cycle;
},
MilSymb land/main/survey/.pic={
\draw [fill] (0, -0.1) -- (0, 0.195) -- (0.25, 0.0475) -- cycle;
\draw (0.1, -0.2) -- (0, -0.1) -- (-0.1, -0.2);
},
MilSymb land/main/tactical satellite/.pic={
\draw (-0.14, -0.2) arc(135:45:0.2);
\draw (0, 0.05) -- (0, -0.135);
\draw (0.1, 0.05) -- (-0.1, 0.05);
\fill (-0.075, -0.1) rectangle (0.075, 0.175);
\fill (-0.25, -0.125) rectangle (-0.1, 0.2);
\fill (0.25, -0.125) rectangle (0.1, 0.2);
},
MilSymb land/main/topographic/.pic={
\draw (0.1,-0.2) -- (0, 0.05) -- (-0.1, -0.2);
\draw (0, 0.05) -- (0, 0.2);
\draw (-0.14, -0.11) arc(225:315:0.2);
},
MilSymb land/main/video imagery/.pic={
\draw (-0.4, 0.2) -- (-0.4, -0.2) -- (0.05, -0.2) -- (0.2, 0.2) -- cycle;
\draw [very thick] (0.4, -0.2) -- (0.4, 0.15);
\draw (0.075, -0.15) -- (0.4, -0.15);
\draw (0.16, 0.1) -- (0.4, 0.1);
},
MilSymb land/main/civilian police/.pic={
\draw (0.225, 0.2) to[in=270, out=270, looseness=3] (-0.225, 0.2) to [in=270, out=270, looseness=1.5] (0,0.2) to [in=270, out=270, looseness=1.5] (0.225, 0.2) -- cycle;
},
MilSymb land/main/environmental protection/.pic={
\draw (0, 0.2) -- (0.1, 0.05) -- (0.05, 0.05) -- (0.15, -0.05) -- (0.1, -0.05) -- (0.2, -0.15) -- (0.15, -0.15) -- (0.05, -0.15) -- (0.05, -0.2) -- (-0.05, -0.2) -- (-0.05, -0.15) -- (-0.2, -0.15) -- (-0.1, -0.05) -- (-0.15, -0.05) -- (-0.05, 0.05) -- (-0.1, 0.05) -- cycle;
},
MilSymb land/main/organisation or group/.pic={
\pic [scale=0.9] at (0, -0.02) {MilSymb multi/main/individual};
\pic [scale=0.9] at (0.2, 0.02) {MilSymb multi/main/individual};
\pic [scale=0.9] at (-0.2, 0.02) {MilSymb multi/main/individual};
},
MilSymb land/main/killing victims/.pic={
\pic {MilSymb land/main/organisation or group};
\draw (-0.41, 0.2) -- (0.41, -0.2);
},
% UPPER %
MilSymb land/upper/air assault/.pic={
\draw (0.25, 0.05) -- (0, -0.1) -- (-0.25, 0.05);
},
MilSymb land/upper/bridging/.pic={
\pic[scale=0.625, yshift=-1.6] {MilSymb multi/main/bridge};
},
MilSymb land/upper/direct communications/.pic={
\draw[{Stealth[inset=0pt,scale=0.5]}-{Stealth[inset=0pt,scale=0.5]}, very thick] (-0.215, -0.05) -- (0.215, -0.05);
\draw [semithick] (-0.285, -0.05) circle (0.075);
\draw [semithick] (0.285, -0.05) circle (0.075);
},
MilSymb land/upper/diving/.pic={
\pic [scale=0.75] {MilSymb multi/main/diver};
},
MilSymb land/upper/drilling/.pic={
\pic [scale=0.625, yshift=-0.5] {MilSymb multi/main/drilling};
},
MilSymb land/upper/missile/.pic={
\pic [scale=0.25] {MilSymb multi/main/missile};
},
MilSymb land/upper/mobile advisor and support/.pic={
\draw[-{Stealth[inset=0pt,scale=0.5]}, very thick] (-0.215, -0.05) -- (0.215, -0.05);
\draw [semithick] (-0.285, -0.05) circle (0.075);
\draw [semithick] (0.285, -0.05) circle (0.075);
},
MilSymb land/upper/multiple rocket launcher/.pic={
\draw (0.175, 0) -- (0, 0.15) -- (-0.175, 0);
\draw (0.175, -0.14) -- (0, 0.01) -- (-0.175, -0.14);
},
MilSymb land/upper/radar/.pic={
\pic [scale=0.5] {MilSymb multi/main/radar};
},
MilSymb land/upper/sensor/.pic={
\pic [scale=0.5] {MilSymb multi/main/sensor};
},
MilSymb land/upper/signals intelligence/.pic={
\begin{scope}[scale=0.75, yshift=-2.5] 
\draw (0, -0.05) -- (0, 0.2);
\draw (0.15, 0.15) -- (0.1, 0.2) -- (0.05, 0.15) -- (0, 0.2) -- (-0.05, 0.15) -- (-0.1, 0.2) -- (-0.15, 0.15);
\end{scope}
},
MilSymb land/upper/single rocket launcher/.pic={
\draw (0.175, -0.075) -- (0, 0.075) -- (-0.175, -0.075);
},
MilSymb land/upper/sniper/.pic={
\pic [scale=0.5, yshift=-1] {MilSymb land/main/sniper};
},
MilSymb land/upper/survey/.pic={
\pic [scale=0.5] {MilSymb land/main/survey};
},
MilSymb land/upper/topographic/.pic={
\pic [scale=0.5] {MilSymb land/main/topographic};
},
MilSymb land/upper/video imagery/.pic={
\pic [scale=0.5, yshift=-1.75] {MilSymb land/main/video imagery};
},
% LOWER %
MilSymb land/lower/airborne/.pic={
\draw (0,-0.025) arc(0:180:0.15);
\draw (0,-0.025) arc(180:0:0.15);
},
MilSymb land/lower/arctic/.pic={
\draw (-0.325,0.135) arc(180:270:0.075 and 0.15) -- +(0.5, 0) arc(-90:0:0.075 and 0.15);
},
MilSymb land/lower/bicycle equipped/.pic={
\draw (0,0) circle (0.1);
},
MilSymb land/lower/control/.pic={
\draw[{Stealth[inset=0pt,scale=0.5]}-{Stealth[inset=0pt,scale=0.5]}] (0, 0.125) -- (0, -0.125);
\draw[{Stealth[inset=0pt,scale=0.5]}-{Stealth[inset=0pt,scale=0.5]}] (0.125, 0) -- (-0.125, 0);
},
MilSymb land/lower/enhanced position location reporting system/.pic={
\draw (0, 0.125) -- (0, -0.125);
\draw (225:0.15) -- (0, 0) -- (315:0.15);
},
MilSymb land/lower/intermodal/.pic={
\draw (0.15, 0.05) -- (-0.15, 0.05) -- (-0.15, 0.1) -- (-0.25, 0.025) -- (-0.15, -0.05) -- (-0.15, 0) -- (0.15, 0) -- (0.15, -0.05) -- (0.25, 0.025) -- (0.15, 0.1) -- cycle;
},
MilSymb land/lower/launcher/.pic={
\draw (-0.25, -0.05) -- (0.25, 0.125) -- (0.25, -0.05);
},
MilSymb land/lower/mountain/.pic={
\fill (-0.125, -0.16) -- (0.125, -0.16) -- (0, 0.1) -- cycle;
},
MilSymb land/lower/mountain/friendly/.pic={
\pic {MilSymb land/lower/mountain};
},
MilSymb land/lower/mountain/hostile/.pic={
\pic [yshift=-2.5]  {MilSymb land/lower/mountain};
},
MilSymb land/lower/mountain/neutral/.pic={
\pic {MilSymb land/lower/mountain};
},
MilSymb land/lower/mountain/unknown/.pic={
\clip [yshift=9.6] \clipunknown;
\pic [yshift=-6.5]  {MilSymb land/lower/mountain};
},
MilSymb land/lower/radio relay line of sight/.pic={
\draw circle(0.125);
\clip circle(0.125);
\fill (145:0.15) -- (325:0.15) -- (35:0.15) -- (215:0.15) -- cycle;
},
MilSymb land/lower/recovery unmanned systems/.pic={
\draw (-0.35, 0.125) arc(-180:0:0.35 and 0.2);
},
MilSymb land/lower/riverine/.pic={
\draw (-0.35, 0.125) arc(-180:0:0.35 and 0.2) -- cycle;
},
MilSymb land/lower/ski/.pic={
\draw (0.05, 0.125) -- (-0.075, -0.075);
\draw (0.1, -0.05) -- (0.04, -0.1);
\draw (-0.05, 0.125) -- (0.075, -0.075);
\draw (-0.1, -0.05) -- (-0.04, -0.1);
},
MilSymb land/lower/towed/.pic={
\draw (-0.25, 0.05) -- (0.25,0.05);
\draw (0.3, 0.05) circle (0.05);
\draw (-0.3, 0.05) circle (0.05);
},
MilSymb land/lower/wheeled/.pic={
\draw (0.24, 0.05) circle (0.08);
\draw (0, 0.05) circle (0.08);
\draw (-0.24, 0.05) circle (0.08);
},
%% EQUIPMENT SYMBOLS %%
% MAIN %
MilSymb equipment/main/weapon/.pic={
\draw (0, 0.35) -- (0, -0.35);
},
MilSymb equipment/main/rifle/.pic={
\pic {MilSymb equipment/main/weapon};
\draw (0.2, 0.1) -- (0, 0.35) -- (-0.2, 0.1);
},
MilSymb equipment/main/single band/.pic={
\draw [ultra thick] (0.2, -0.1) -- (-0.2, -0.1);
},
MilSymb equipment/main/double band/.pic={
\draw [ultra thick] (0.2, -0.1) -- (-0.2, -0.1);
\draw [ultra thick] (0.2, -0.2) -- (-0.2, -0.2);
},
MilSymb equipment/main/triple band/.pic={
\draw [ultra thick] (0.2, 0) -- (-0.2, 0);
\draw [ultra thick] (0.2, -0.1) -- (-0.2, -0.1);
\draw [ultra thick] (0.2, -0.2) -- (-0.2, -0.2);
},
MilSymb equipment/main/single shot rifle/.pic={
\pic {MilSymb equipment/main/rifle};
\pic {MilSymb equipment/main/single band};
},
MilSymb equipment/main/semi automatic rifle/.pic={
\pic {MilSymb equipment/main/rifle};
\pic {MilSymb equipment/main/double band};
},
MilSymb equipment/main/automatic rifle/.pic={
\pic {MilSymb equipment/main/rifle};
\pic {MilSymb equipment/main/triple band};
},
MilSymb equipment/main/machine gun/.pic={
\pic {MilSymb equipment/main/rifle};
\draw (0.2, -0.35) -- (-0.2, -0.35);
},
MilSymb equipment/main/light machine gun/.pic={
\pic {MilSymb equipment/main/machine gun};
\pic {MilSymb equipment/main/single band};
},
MilSymb equipment/main/medium machine gun/.pic={
\pic {MilSymb equipment/main/machine gun};
\pic {MilSymb equipment/main/double band};
},
MilSymb equipment/main/heavy machine gun/.pic={
\pic {MilSymb equipment/main/machine gun};
\pic {MilSymb equipment/main/triple band};
},
MilSymb equipment/main/grenade launcher/.pic={
\pic {MilSymb equipment/main/rifle};
\draw (0,0) circle (0.1);
},
MilSymb equipment/main/light grenade launcher/.pic={
\pic {MilSymb equipment/main/grenade launcher};
\pic [yshift=-4]{MilSymb equipment/main/single band};
},
MilSymb equipment/main/medium grenade launcher/.pic={
\pic {MilSymb equipment/main/grenade launcher};
\pic [yshift=-2]{MilSymb equipment/main/double band};
},
MilSymb equipment/main/heavy grenade launcher/.pic={
\pic {MilSymb equipment/main/grenade launcher};
\pic [yshift=-5]{MilSymb equipment/main/triple band};
},
MilSymb equipment/main/flame thrower/.pic={
\draw [ultra thick] (-0.1, -0.4) -- (-0.1, 0.3) to[out=90,in=90,looseness=2] (0.1, 0.3) -- (0.1, 0.275);
},
MilSymb equipment/main/air defence/.pic={
\draw (0.2, -0.4) to[out=90,in=90,looseness=1.7] (-0.2, -0.4) -- cycle;
\draw (0, -0.2) -- (0, 0.35);
},
MilSymb equipment/main/anti tank/.pic={
\draw  (0.2, -0.4) -- (0, -0.2) -- (-0.2, -0.4);
\draw (0, -0.2) -- (0, 0.35);
},
MilSymb equipment/main/high trajectory indirect fire weapons system/.pic={
\draw (0, -0.3) circle (0.1);
\draw (0, -0.2) -- (0, 0.35);
},
MilSymb equipment/main/side bands/.pic={
\draw (0.2, -0.2) -- (0.2, 0.2);
\draw (-0.2, -0.2) -- (-0.2, 0.2);
},
MilSymb equipment/main/air defence gun/.pic={
\pic {MilSymb equipment/main/air defence};
\pic {MilSymb equipment/main/side bands};
},
MilSymb equipment/main/anti tank gun/.pic={
\pic {MilSymb equipment/main/anti tank};
\pic {MilSymb equipment/main/side bands};
},
MilSymb equipment/main/direct fire gun/.pic={
\pic {MilSymb equipment/main/weapon};
\pic {MilSymb equipment/main/side bands};
},
MilSymb equipment/main/recoilless gun/.pic={
\pic {MilSymb equipment/main/rifle};
\pic [yshift=-4] {MilSymb equipment/main/side bands};
},
MilSymb equipment/main/howitzer/.pic={
\pic {MilSymb equipment/main/high trajectory indirect fire weapons system};
\pic {MilSymb equipment/main/side bands};
},
MilSymb equipment/main/missile launcher/.pic={
\pic {MilSymb equipment/main/weapon};
\draw (0.2, -0.4) -- (0.2, 0.15) to[out=90,in=90,looseness=1.75] (-0.2, 0.15) -- (-0.2, -0.4);
},
MilSymb equipment/main/air defence missile launcher/.pic={
\pic {MilSymb equipment/main/air defence};
\draw (0.2, -0.4) -- (0.2, 0.15) to[out=90,in=90,looseness=1.75] (-0.2, 0.15) -- (-0.2, -0.4);
},
MilSymb equipment/main/anti tank missile launcher/.pic={
\pic {MilSymb equipment/main/anti tank};
\draw (0.2, -0.2) -- (0.2, 0.15) to[out=90,in=90,looseness=1.75] (-0.2, 0.15) -- (-0.2, -0.2);
},
MilSymb equipment/main/surface to surface missile launcher/.pic={
\pic {MilSymb equipment/main/weapon};
\draw (0.2, -0.35) -- (0.2, 0.15) to[out=90,in=90,looseness=1.75] (-0.2, 0.15) -- (-0.2, -0.35) -- cycle;
},
MilSymb equipment/main/mortar/.pic={
\pic {MilSymb equipment/main/high trajectory indirect fire weapons system};
\draw (0.2, 0.1) -- (0, 0.35) -- (-0.2, 0.1);
},
MilSymb equipment/main/single rocket launcher/.pic={
\pic [yshift=-1.5]{MilSymb equipment/main/rifle};
\draw (0.2, 0.2) -- (0, 0.45) -- (-0.2, 0.2);
},
MilSymb equipment/main/multiple rocket launcher/.pic={
\pic {MilSymb equipment/main/single rocket launcher};
\pic [yshift=-5] {MilSymb equipment/main/side bands};
},
MilSymb equipment/main/anti tank rocket launcher/.pic={
\begin{scope}[yshift=-1.5]
\pic {MilSymb equipment/main/anti tank};
\draw (0.2, 0.1) -- (0, 0.35) -- (-0.2, 0.1);
\end{scope}
\draw (0.2, 0.2) -- (0, 0.45) -- (-0.2, 0.2);
},
MilSymb equipment/main/non lethal weapon/.pic={
\pic {MilSymb equipment/main/weapon};
\draw (0.2, 0.35) -- (-0.2, 0.35);
},
MilSymb equipment/main/non lethal grenade launcher/.pic={
\pic {MilSymb equipment/main/non lethal weapon};
\draw (0,0) circle (0.1);
},
MilSymb equipment/main/taser/.pic={
\pic {MilSymb equipment/main/non lethal weapon};
\pic {MilSymb main/text={Z}};
},
MilSymb equipment/main/water cannon/.pic={
\pic {MilSymb equipment/main/non lethal weapon};
\pic {MilSymb main/text={W}};
},
MilSymb equipment/main/armoured fighting vehicle/.pic={
\draw (0, 0.2) -- (0.25, 0) -- (0, -0.2) -- (-0.25, 0) -- cycle;
\draw [ultra thick] (0.275, 0.2) -- (0.275, -0.2);
\draw [ultra thick] (-0.275, 0.2) -- (-0.275, -0.2);
},
MilSymb equipment/main/armoured fighting vehicle command and control/.pic={
\pic {MilSymb equipment/main/armoured fighting vehicle};
\pic {MilSymb main/textsmall={C2}};
},
MilSymb equipment/main/armoured personnel carrier/.pic={
\draw (0.275, 0.275) -- (0.275, -0.275) -- (-0.275 , -0.275) -- (-0.275, 0.275);
\draw (0.275, 0.15) -- (0, 0.275) -- (-0.275, 0.15);
},
MilSymb equipment/main/armoured medical personnel carrier/.pic={
\pic {MilSymb equipment/main/armoured personnel carrier};
\draw (0, 0.275) -- (0, -0.275);
\draw (0.275, -0.05) -- (-0.275, -0.05);
},
MilSymb equipment/main/armoured protected recovery vehicle/.pic={
\pic {MilSymb multi/main/armoured};
\pic [yscale=0.5, xscale=0.75] {MilSymb multi/main/maintenance};
},
MilSymb equipment/main/medical evacuation armoured protected vehicle/.pic={
\pic {MilSymb multi/main/armoured};
\pic {MilSymb multi/main/medic};
},
MilSymb equipment/main/tank/.pic={
\draw (-0.35, 0.3) -- (-0.35, -0.3);
\draw (0.35, 0.3) -- (0.35, -0.3);
\draw (0.35, 0.2) -- (-0.35, 0.2);
\draw (0.35, -0.2) -- (-0.35, -0.2);
},
MilSymb equipment/main/light tank/.pic={
\pic {MilSymb equipment/main/tank};
\pic [rotate=90, yshift=3]{MilSymb equipment/main/single band};
},
MilSymb equipment/main/medium tank/.pic={
\pic {MilSymb equipment/main/tank};
\pic [rotate=90]{MilSymb equipment/main/single band};
\pic [rotate=90, yshift=6]{MilSymb equipment/main/single band};
},
MilSymb equipment/main/heavy tank/.pic={
\pic {MilSymb equipment/main/tank};
\pic [rotate=90, yshift=-2]{MilSymb equipment/main/single band};
\pic [rotate=90, yshift=3]{MilSymb equipment/main/single band};
\pic [rotate=90, yshift=8]{MilSymb equipment/main/single band};
},
MilSymb equipment/main/tank recovery vehicle/.pic={
\pic {MilSymb equipment/main/tank};
\pic [yscale=0.5, xscale=0.75] {MilSymb multi/main/maintenance};
},
MilSymb equipment/main/utility vehicle/.pic={
\draw (-0.35, 0.3) -- (-0.35, -0.3) -- (0.35, -0.3) -- (0.35, 0.3) to[in=-90, out=-90, looseness=1] cycle;
},
MilSymb equipment/main/bridge mounted on utility vehicle/.pic={
\pic {MilSymb equipment/main/utility vehicle};
\pic [scale=0.75, yshift=-3] {MilSymb multi/main/bridge};
},
MilSymb equipment/main/fixed bridge/.pic={
\pic {MilSymb multi/main/bridge};
\draw (0, 0.15) -- (0, -0.15);
},
MilSymb equipment/main/folding girder bridge/.pic={
\pic {MilSymb multi/main/bridge};
\draw (0.1, 0.15) -- (-0.1, 0.15) -- (-0.1, -0.15) -- (0.1, -0.15);
},
MilSymb equipment/main/hollow deck bridge/.pic={
\pic {MilSymb multi/main/bridge};
\draw (0.1, 0.15) -- (-0.1, 0.15) -- (-0.1, -0.15) -- (0.1, -0.15) -- cycle;
},
MilSymb equipment/main/drill mounted on vehicle/.pic={
\pic [scale=0.75, yshift=-4] {MilSymb multi/main/drill};
\pic {MilSymb equipment/main/utility vehicle};
},
MilSymb equipment/main/earthmover/.pic={
\draw (-0.25, 0.25) -- (-0.25, -0.25);
\draw (0.25, 0.25) -- (0.25, -0.25);
\draw (0.25, 0.2) -- (-0.25, 0.2);
\draw (0.25, -0.2) -- (-0.25, -0.2);
\draw (0, 0.2) -- (0, 0.35);
\draw (0.3, 0.3) -- (0.175, 0.35) -- (-0.175, 0.35) -- (-0.3, 0.3);
},
MilSymb equipment/main/multifunctional earthmover/.pic={
\pic {MilSymb equipment/main/earthmover};
\pic {MilSymb main/textsmall={MF}};
},
MilSymb equipment/main/mine clearing equipment/.pic={
\draw (0, 0.2) -- (0, 0) -- (0.35, -0.2) -- (-0.35, -0.2) -- (0, 0);
},
MilSymb equipment/main/mine clearing vehicle/.pic={
\pic [line join=bevel] {MilSymb equipment/main/mine clearing equipment};
\draw (0.35, -0.25) -- (0.35, 0.25);
\draw (-0.35, -0.25) -- (-0.35, 0.25);
\draw (0.35, 0.2) -- (-0.35, 0.2);
},
MilSymb equipment/main/mine laying equipment/.pic={
\pic {MilSymb multi/main/mine};
\draw [ultra thick] (0.1, 0.3) -- (-0.1, 0.3);
},
MilSymb equipment/main/mine laying vehicle/.pic={
\pic [scale=0.6, yshift=-7, transform shape] {MilSymb equipment/main/mine laying equipment};
\pic {MilSymb equipment/main/utility vehicle};
},
MilSymb equipment/main/medical vehicle/.pic={
\draw (0.35, -0.1) -- (-0.35, -0.1);
\draw (0, 0.1) -- (0, -0.3);
\pic {MilSymb equipment/main/utility vehicle};
},
MilSymb equipment/main/medical evacuation/.pic={
\pic [scale=0.75, yshift=-4] {MilSymb multi/main/medic};
\pic {MilSymb equipment/main/utility vehicle};
},
MilSymb equipment/main/mobile emergency physician/.pic={
\draw (0.1, 0) -- (-0.1, 0);
\pic {MilSymb equipment/main/medical vehicle};
},
MilSymb equipment/main/bus/.pic={
\pic {MilSymb equipment/main/utility vehicle};
\pic at (0, -0.1) {MilSymb main/text={B}};
},
MilSymb equipment/main/semi trailer truck/.pic={
\draw (0.21, -0.025) -- (0.35, -0.025);
\draw (0.35, 0.05) -- (0.35, -0.1);
\pic [scale=0.75, xshift=-2] {MilSymb equipment/main/utility vehicle};
},
MilSymb equipment/main/petroleum oil and lubricants vehicle/.pic={
\pic {MilSymb equipment/main/utility vehicle};
\pic [scale=0.75, yshift=-4] {MilSymb multi/main/petroleum oil and lubricants};
},
MilSymb equipment/main/water vehicle/.pic={
\pic {MilSymb equipment/main/utility vehicle};
\pic [scale=0.75, yshift=-4] {MilSymb multi/main/water};
},
MilSymb equipment/main/train locomotive/.pic={
\draw (0.35, -0.3) -- (-0.35, -0.3) -- (-0.35, 0.3) -- (0, 0.3) -- (0, 0) -- (0.35, 0) -- cycle;
},
MilSymb equipment/main/computer system/.pic={
\draw [ultra thick] (0.3, 0.3) rectangle (-0.3, -0.2);
\draw [ultra thick] (0, -0.2) -- (0, -0.3);
\draw [ultra thick, line cap=rect] (0.3, -0.3) -- (-0.3, -0.3);
},
MilSymb equipment/main/laser/.pic={
\draw [line join=round, line cap=round] (0.1, -0.25) -- (-0.1, -0.225) -- (0.1, -0.2) -- (-0.1, -0.175) -- (0.1, -0.15) -- (0, -0.1375) -- (0, -0.0125) -- (-0.1, 0) -- (0.1, 0.025) -- (-0.1, 0.05) -- (0.1, 0.075) -- (0, 0.0875) -- (0, 0.25);
\draw [line join=round, line cap=round] (0.1, 0.2) -- (0, 0.25) -- (-0.1, 0.2);
},
MilSymb equipment/main/land mine/.pic={
\draw (0, 0) circle(0.25);
},
MilSymb equipment/main/antipersonnel land mine/.pic={
\fill (0, 0) circle(0.25);
\draw (135:0.35) -- (0, 0) -- (45:0.35);
},
MilSymb equipment/main/antitank land mine/.pic={
\fill (0, 0) circle(0.25);
},
MilSymb equipment/main/sensor/.pic={
\pic [scale=1.75] {MilSymb multi/main/sensor};
},
MilSymb equipment/main/sensor emplaced/.pic={
\pic [scale=1.5] {MilSymb multi/main/sensor};
\draw (0.15, 0.3) -- (0.1, 0.35) -- (0.05, 0.3) -- (0, 0.35) -- (-0.05, 0.3) -- (-0.1, 0.35) -- (-0.15, 0.3);
},
MilSymb equipment/main/booby trap/.pic={
\draw (0, -0.2) ellipse(0.2 and 0.065);
\begin{scope}
\clip (0, -0.2) ellipse(0.2 and 0.065) [reverseclip];
\draw (-0.2, -0.2) -- (0, 0.2) -- (0.2, -0.2);
\end{scope}
},
% MOBILITY %
MilSymb equipment/mobility/amphibious/.pic={
\pic [scale=0.75] {MilSymb multi/main/amphibious};
},
MilSymb equipment/mobility/barge/.pic={
\draw [fill=white] (0.6, 0.1) -- (-0.6, 0.1) to [out=-90,in=-90,looseness=0.5] (0.6, 0.1) -- cycle;
},
MilSymb equipment/mobility/over snow/.pic={
\draw (-0.7, 0.3) to[in=180, out=-90] (-0.5, 0.1) -- (0.6, 0.1);
},
MilSymb equipment/mobility/pack animal/.pic={
\pic [yscale=1.5, yshift=-1.85] {MilSymb multi/lower/pack animal};
},
MilSymb equipment/mobility/railroad/.pic={
\draw (-0.6, 0.1) -- (0.6, 0.1);
\draw [fill=white] (-0.5, 0) circle (0.1);
\draw [fill=white] (-0.3, 0) circle (0.1);
\draw [fill=white] (0.5, 0) circle (0.1);
\draw [fill=white] (0.3, 0) circle (0.1);
},
MilSymb equipment/mobility/sled/.pic={
\draw (-0.7, 0.3) to[in=180, out=-90] (-0.5, 0.1) -- (0.5, 0.1) to[in=-90, out=0] (0.7, 0.3);
},
MilSymb equipment/mobility/towed/.pic={
\draw (-0.6, 0.1) -- (0.6, 0.1);
\draw [fill=white] (-0.7, 0.1) circle (0.1);
\draw [fill=white] (0.7, 0.1) circle (0.1);
},
MilSymb equipment/mobility/tracked/.pic={
\draw [fill=white] (-0.6, 0.05) arc(180:90:0.05) -- (0.55, 0.1) arc(90:0:0.05) -- (0.6, -0.05) arc(0:-90:0.05) -- (-0.55, -0.1) arc(270:180:0.05) -- cycle;
},
MilSymb equipment/mobility/wheeled cross country/.pic={
\draw [fill=white] (-0.5, 0) circle (0.1);
\draw [fill=white] (0, 0) circle (0.1);
\draw [fill=white] (0.5, 0) circle (0.1);
\draw (-0.6, 0.1) -- (0.6, 0.1);
},
MilSymb equipment/mobility/wheeled limited mobility/.pic={
\draw [fill=white] (-0.5, 0) circle (0.1);
\draw [fill=white] (0.5, 0) circle (0.1);
\draw (-0.6, 0.1) -- (0.6, 0.1);
},
MilSymb equipment/mobility/wheeled semi trailer/.pic={
\draw [fill=white] (-0.5, 0) circle (0.1);
\draw [fill=white] (-0.3, 0) circle (0.1);
\draw [fill=white] (0.5, 0) circle (0.1);
\draw [fill=white] (-0.6, 0.1) -- (0.6, 0.1);
},
MilSymb equipment/mobility/wheeled and tracked/.pic={
\draw [fill=white] (-0.25, 0.05) arc(180:90:0.05) -- (0.55, 0.1) arc(90:0:0.05) -- (0.6, -0.05) arc(0:-90:0.05) -- (-0.2, -0.1) arc(270:180:0.05) -- cycle;
\draw [fill=white] (-0.5, 0) circle (0.1);
},
%% INSTALLATION SYMBOLS %%
% MAIN %
MilSymb installation/main/electric power/.pic={
\draw (-0.05, 0) .. controls (-0.06, 0.14) .. (0, 0.09) .. controls (0.03, 0.06) .. (0, 0.06) .. controls(-0.03, 0.06) .. (0, 0.09) .. controls(0.06, 0.14) .. (0.05, 0);
\draw ($(-55:0.125) + (0, 0.075)$) arc (-55:235:0.125) arc (415:360:0.05) -- +(0, -0.08) arc(180:360:0.05035) -- +(0, 0.08) arc (180:125:0.05) -- cycle;
},
MilSymb installation/main/mass grave site/.pic={
\draw (0.075, 0.175) rectangle (-0.075, -0.2);
\draw (0, 0.175) -- (0, -0.2);
\draw (0.075, 0.06) -- (-0.075, 0.06);
\begin{scope}[xshift=5, yshift=0.7]
\draw (0.075, 0.175) rectangle (-0.075, -0.2);
\draw (0, 0.175) -- (0, -0.2);
\draw (0.075, 0.06) -- (-0.075, 0.06);
\end{scope}
\begin{scope}[xshift=-5, yshift=0.7]
\draw (0.075, 0.175) rectangle (-0.075, -0.2);
\draw (0, 0.175) -- (0, -0.2);
\draw (0.075, 0.06) -- (-0.075, 0.06);
\end{scope}
},
MilSymb installation/main/mine/.pic={
\draw (-0.2, -0.2) -- (0.2, 0.15);
\draw [line cap=round, thick] ($(65:0.1) + (0.1, 0.1)$) arc (65:25:0.2); 
\begin{scope} [xscale=-1]
\draw (-0.2, -0.2) -- (0.2, 0.15);
\draw [line cap=round, thick] ($(65:0.1) + (0.1, 0.1)$) arc (65:25:0.2); 
\end{scope}
},
MilSymb installation/main/nuclear/.pic={
\fontsize{15}{0}\selectfont
\node at (0, 0) {\Radioactivity};},
MilSymb installation/main/printed media/.pic={
\draw (0.2, 0) -- (-0.2, 0);
\draw [ultra thick] (0, 0.1) circle (0.085);
\draw [ultra thick] (0, -0.1) circle (0.085);
},
MilSymb installation/main/civilian telecommunications/.pic={
\draw [line join=bevel] (0.075, -0.2) -- (0, 0.1) -- (-0.075, -0.2);
\draw (0.065, -0.05) -- (-0.065, -0.05);
\draw (-0.325, 0.2) -- (-0.15, 0.125) -- (-0.15, 0.175) -- (0, 0.1) -- (0.15, 0.175) -- (0.15, 0.125) -- (0.325, 0.2);
},
% UPPER %
MilSymb installation/upper/nuclear/.pic={
\node at (0, 0) {\Radioactivity};},
MilSymb installation/upper/petroleum oil and lubricants/.pic={
\pic [scale=0.5] {MilSymb multi/main/petroleum oil and lubricants};},
MilSymb installation/upper/railroad/.pic={
\pic [scale=0.85, yshift=-4] {MilSymb multi/upperlower/railroad};},
%% SEA SURFACE %%
MilSymb seasurface/main/combatant/.pic={
\begin{scope}[xshift=-4.5, yshift=-5]
\draw  (0.3213,0.0534) .. controls (0.3186,0.0295) and (0.3072,0.0136) ..
  (0.2925,0.0063) .. controls (0.2777,-0.0010) and (0.2605,0.0001) ..
  (0.2461,0.0068) .. controls (0.2317,0.0136) and (0.2198,0.0265) ..
  (0.2163,0.0433) .. controls (0.2147,0.0513) and (0.2150,0.0601) ..
  (0.2179,0.0694) .. controls (0.1304,0.1129) and (0.0223,0.1961) ..
  (0.0013,0.3209) .. controls (0.0601,0.1809) and (0.1770,0.0912) ..
  (0.3213,0.0534) -- cycle(0.2304,0.0633) .. controls (0.2287,0.0570) and
  (0.2287,0.0513) .. (0.2298,0.0461) .. controls (0.2323,0.0340) and
  (0.2409,0.0245) .. (0.2520,0.0193) .. controls (0.2630,0.0141) and
  (0.2760,0.0135) .. (0.2864,0.0186) .. controls (0.2932,0.0220) and
  (0.2992,0.0277) .. (0.3033,0.0370) .. controls (0.2845,0.0413) and
  (0.2597,0.0498) .. (0.2304,0.0633) -- cycle(0.1785,0.1137) .. controls
  (0.2446,0.1612) and (0.3061,0.2300) .. (0.3214,0.3209) .. controls
  (0.2864,0.2377) and (0.2310,0.1723) .. (0.1614,0.1249)(0.1443,0.1138) ..
  controls (0.1011,0.0871) and (0.0530,0.0670) .. (0.0014,0.0535) .. controls
  (0.0041,0.0295) and (0.0154,0.0136) .. (0.0302,0.0063) .. controls
  (0.0449,-0.0010) and (0.0621,0.0001) .. (0.0765,0.0069) .. controls
  (0.0909,0.0137) and (0.1028,0.0265) .. (0.1063,0.0433) .. controls
  (0.1079,0.0513) and (0.1076,0.0602) .. (0.1047,0.0694) .. controls
  (0.1230,0.0785) and (0.1422,0.0893) .. (0.1613,0.1019)(0.0928,0.0461) ..
  controls (0.0903,0.0340) and (0.0816,0.0245) .. (0.0706,0.0193) .. controls
  (0.0596,0.0141) and (0.0466,0.0135) .. (0.0362,0.0186) .. controls
  (0.0294,0.0220) and (0.0234,0.0277) .. (0.0193,0.0370) .. controls
  (0.0381,0.0413) and (0.0629,0.0498) .. (0.0921,0.0633) -- (0.0921,0.0633) ..
  controls (0.0938,0.0570) and (0.0938,0.0512) .. (0.0928,0.0461) -- cycle;
\end{scope}
},
MilSymb seasurface/main/surface combatant/.pic={
\fill (0, -0.2) -- (0.25, -0.05) -- (0.1, -0.05) -- (0.1, 0.025) -- (0.05, 0.025) -- (0.05, 0.075) -- (0.2, 0.075) -- (0.2, 0.135) -- (0.05, 0.135) -- (0.05, 0.2) -- (-0.05, 0.2) -- (-0.05, 0.135) -- (-0.2, 0.135) -- (-0.2, 0.075) -- (-0.05, 0.075) -- (-0.05, 0.025) -- (-0.1, 0.025) -- (-0.1, -0.05) -- (-0.25, -0.05) -- cycle;
},
MilSymb seasurface/main/carrier/.pic={
\fill (0, -0.2) -- (0.3, 0.05) -- (-0.15, 0.05) -- (-0.15, 0.2) -- (-0.3, 0.2) -- (-0.3, 0.05) -- cycle;
},
MilSymb seasurface/main/amphibious warfare ship/.pic={
\fill (0, -0.2) -- (0.3, 0.05) -- (0.15, 0.05) -- (0.15, 0.2) -- (-0.15, 0.2) -- (-0.15, 0.05) -- (-0.3, 0.05) -- cycle;
\fill (0, -0.2) rectangle (0.25, -0.175);
},
MilSymb seasurface/main/mine warfare vessel/.pic={
\fill (0, -0.2) -- (0.2, 0) -- (-0.2, 0) -- cycle;
\fill (0, 0.025) circle (0.1);
\draw[ultra thick] (0, 0.025) -- (0, 0.2);
\draw[ultra thick] (0, 0.025) -- (135:0.2);
\draw[ultra thick] (0, 0.025) -- (45:0.2);
},
MilSymb seasurface/main/sea surface decoy/.pic={
\pic [xscale=0.75, yscale=0.75, xshift=-1, yshift=-0.5]{MilSymb multi/main/decoy};
},
MilSymb seasurface/main/patrol/.pic={
\fill (0, -0.2) -- (0.3, 0) -- (0.125, 0) -- (0, 0.2) -- (-0.125, 0) -- (-0.3, 0) -- cycle;
},
MilSymb seasurface/main/military speedboat/.pic={
\fill (-0.2, -0.2) -- (0.2, -0.2) -- (0.35, 0.05) -- (-0.15, 0.05) -- (-0.075, 0.2) -- (-0.175, 0.2) -- (-0.25, 0.05) -- (-0.35, 0.05) -- cycle;
},
MilSymb seasurface/main/military rigid hull inflatable boat/.pic={
\pic {MilSymb seasurface/main/military speedboat};
\fontsize{6}{0}\selectfont
\node [text=MilSymb@fill] at (0, -0.075) {RB};
},
MilSymb seasurface/main/military jetski/.pic={
\fill (0.3, -0.2) -- (-0.3, -0.2) -- (-0.35, -0.1) -- (-0.1, 0.2) -- (0, 0.2) -- (0, 0.1) -- (-0.05, 0.1) -- (-0.1, -0.05) -- (0.3, -0.05) -- (0.3, -0.2) -- cycle;
},
MilSymb seasurface/main/navy task organization unit/.pic={
\draw (-0.25, -0.2) -- (-0.25, 0.1) -- (-0.15, 0.2);
\draw (0.25, -0.2) -- (0.25, 0.1) -- (0.15, 0.2);
},
MilSymb seasurface/main/navy task force/.pic={
\pic {MilSymb seasurface/main/navy task organization unit};
\node at (0, -0.05) {TF};
},
MilSymb seasurface/main/navy task group/.pic={
\pic {MilSymb seasurface/main/navy task organization unit};
\node at (0, -0.05) {TG};
},
MilSymb seasurface/main/navy task unit/.pic={
\pic {MilSymb seasurface/main/navy task organization unit};
\node at (0, -0.05) {TU};
},
MilSymb seasurface/main/navy task element/.pic={
\pic {MilSymb seasurface/main/navy task organization unit};
\node at (0, -0.05) {TE};
},
MilSymb seasurface/main/convoy/.pic={
\fill (0.35, 0.175) --  (-0.35, 0.175) -- (-0.35, -0.175) -- (-0.2, -0.175) -- (-0.2, 0.025) -- (0.2, 0.025) -- (0.2, -0.175) -- (0.35, -0.175) -- cycle;
},
MilSymb seasurface/main/non combatant/.pic={
\fill (-0.25, -0.2) -- (-0.25, 0.05) -- (-0.15, 0.05) -- (-0.15, 0.2) -- (0.15, 0.2) -- (0.15, 0.05) -- (0.25, 0.05) -- (0.25, -0.2) -- cycle;
},
MilSymb seasurface/main/ship/.pic={
\draw (-0.2, -0.2) -- (0.2, -0.2) -- (0.35, 0.05) -- (0.15, 0.05) -- (0.15, 0.2) -- (-0.15, 0.2) -- (-0.15, 0.05) -- (-0.35, 0.05) -- cycle;
},
MilSymb seasurface/main/cargo/.pic={
\pic {MilSymb seasurface/main/ship};
\node {A};
},
MilSymb seasurface/main/container ship/.pic={
\pic {MilSymb seasurface/main/ship};
\node {C};
},
MilSymb seasurface/main/dredge/.pic={
\pic {MilSymb seasurface/main/ship};
\node {D};
},
MilSymb seasurface/main/roll on roll off/.pic={
\pic {MilSymb seasurface/main/ship};
\node {E};
},
MilSymb seasurface/main/ferry/.pic={
\pic {MilSymb seasurface/main/ship};
\node {F};
},
MilSymb seasurface/main/heavy lift/.pic={
\pic {MilSymb seasurface/main/ship};
\node {H};
},
MilSymb seasurface/main/hovercraft/.pic={
\pic {MilSymb seasurface/main/ship};
\node {J};
},
MilSymb seasurface/main/lash carrier/.pic={
\pic {MilSymb seasurface/main/ship};
\node {L};
},
MilSymb seasurface/main/tanker/.pic={
\pic {MilSymb seasurface/main/ship};
\node {O};
},
MilSymb seasurface/main/passenger ship/.pic={
\pic {MilSymb seasurface/main/ship};
\node {P};
},
MilSymb seasurface/main/tug/.pic={
\pic {MilSymb seasurface/main/ship};
\node {T};
},
MilSymb seasurface/main/tow/.pic={
\pic {MilSymb seasurface/main/ship};
\fontsize{7}{0}\selectfont
\node at (0,-0.08) {TW};
},
MilSymb seasurface/main/hazardous material transport ship/.pic={
\pic {MilSymb seasurface/main/ship};
\fontsize{7}{0}\selectfont
\node at (0,-0.08) {HZ};
},
MilSymb seasurface/main/junk/.pic={
\pic {MilSymb seasurface/main/ship};
\fontsize{7}{0}\selectfont
\node at (0,-0.08) {QJ};
},
MilSymb seasurface/main/barge/.pic={
\pic {MilSymb seasurface/main/ship};
\fontsize{7}{0}\selectfont
\node at (0,-0.08) {YB};
},
MilSymb seasurface/main/fishing vessel/.pic={
\draw (-0.15, -0.2) -- (0.15, -0.2) -- (0.25, 0.025) -- (-0.05, 0.025) -- (-0.05, 0.125) -- (-0.2, 0.125) -- (-0.2, 0.025) -- (-0.25, 0.025) -- cycle;
\draw (0.025, 0.025) -- (0.025, 0.2);
\draw (0.025, 0.025) -- +(45:0.2);
},
MilSymb seasurface/main/drifter/.pic={
\pic {MilSymb seasurface/main/fishing vessel};
\fontsize{6}{0}\selectfont
\node at (0,-0.09) {DF};
},
MilSymb seasurface/main/trawler/.pic={
\pic {MilSymb seasurface/main/fishing vessel};
\fontsize{6}{0}\selectfont
\node at (0,-0.09) {TR};
},
MilSymb seasurface/main/law enforcement vessel/.pic={
\pic {MilSymb seasurface/main/ship};
\draw (0.15, 0.05) -- (0, -0.2);
\draw (0.2, 0.05) -- (0.05, -0.2);
},
MilSymb seasurface/main/civilian boat/.pic={
\draw (-0.2, -0.2) -- (0.2, -0.2) -- (0.35, 0.05) -- (-0.15, 0.05) -- (-0.075, 0.2) -- (-0.175, 0.2) -- (-0.25, 0.05) -- (-0.35, 0.05) -- cycle;
},
MilSymb seasurface/main/civilian rigid hull inflatable boat/.pic={
\pic {MilSymb seasurface/main/civilian boat};
\fontsize{6}{0}\selectfont
\node at (0, -0.075) {RB};
},
MilSymb seasurface/main/civilian speedboat/.pic={
\pic {MilSymb seasurface/main/civilian boat};
\fontsize{6}{0}\selectfont
\node at (0, -0.075) {SP};
},
MilSymb seasurface/main/civilian jetski/.pic={
\draw (0.3, -0.2) -- (-0.3, -0.2) -- (-0.35, -0.1) -- (-0.1, 0.2) -- (0, 0.2) -- (0, 0.1) -- (-0.05, 0.1) -- (-0.1, -0.05) -- (0.3, -0.05) -- (0.3, -0.2) -- cycle;
},
% UPPER %
MilSymb seasurface/upper/drone equipped/.pic={
\pic [xscale=0.6, yscale=0.9, yshift=-1.5] {MilSymb multi/main/unmanned systems};
},
%% SEA SUBSURFACE %%
% MAIN %
MilSymb seasubsurface/main/submarine/.pic={
\fill (0.4, 0) -- (0.25, 0.15) -- (-0.25, 0.15) -- (-0.4, 0) -- (-0.25, -0.15) -- (0.25, -0.15) -- cycle;
},
MilSymb seasubsurface/main/sea surface/.pic={
\draw [thick] (0.35, 0.05) -- (0.25, -0.05) -- (0.15, 0.05) -- (0.05, -0.05) -- (-0.05, 0.05) -- (-0.15, -0.05) -- (-0.25, 0.05) -- (-0.35, -0.05);
},
MilSymb seasubsurface/main/surfaced submarine/.pic={
\pic [yshift=1.75, yscale=0.9]{MilSymb seasubsurface/main/submarine};
\pic [yshift=-4, scale=0.9]{MilSymb seasubsurface/main/sea surface};
},
MilSymb seasubsurface/main/bottomed submarine/.pic={
\pic [yshift=1.75, yscale=0.9]{MilSymb seasubsurface/main/submarine};
\fill (-0.35, -0.2) rectangle (0.35, -0.1);
},
MilSymb seasubsurface/main/snorkelling submarine/.pic={
\pic [yshift=-1.75, scale=0.9]{MilSymb seasubsurface/main/submarine};
\pic [yshift=3.75, scale=0.75]{MilSymb seasubsurface/main/sea surface};
\fill (0.025, 0) rectangle (-0.025, 0.2);
},
MilSymb seasubsurface/main/other submersible/.pic={
\fill (0, -0.05) circle (0.35 and 0.15);
\fill (0.1, 0) rectangle (-0.1, 0.2);
},
MilSymb seasubsurface/main/non submarine/.pic={
\fontsize{6}{0}\selectfont
\node at (0, 0.1) {NON};
\node at (0, -0.1) {SUB};
},
MilSymb seasubsurface/main/military diver/.pic={
\begin{scope}
\path [use as bounding box] (0.3, 0.2) rectangle (-0.3, -0.2);
\clip (0, 0.016) circle (0.075) [reverseclip];
\fill (0, 0.016) circle (0.185);
\fill (-0.25, -0.06) rectangle (0.25, 0.09);
\fill (0, 0) -- (-0.2, -0.2) -- (0.2, -0.2) -- cycle;
\end{scope}
\fill (0, 0.016) circle (0.06);
},
MilSymb seasubsurface/main/civilian submersible/.pic={
\draw ($(0, -0.05) + (106.6:0.35 and 0.15)$) arc (106.6:433.4:0.35 and 0.15) |- (0, 0.2) -| cycle;
},
MilSymb seasubsurface/main/torpedo/.pic={
\fill (-0.35, 0) -- (-0.3, 0.075) -- (0.25, 0.075) -- (0.35, -0.075) -- (0.35, 0.075) -- (0.25, -0.075) -- (-0.3, -0.075) -- cycle; 
},
MilSymb seasubsurface/main/underwater decoy/.pic={
\pic [yshift=-1.5] {MilSymb multi/main/decoy};
\fill (0.4, 0.2) rectangle (-0.4, 0.15);
},
MilSymb seasubsurface/main/half sea mine/.pic={
\fill (0.2 ,0) arc (10:170:0.2 and 0.175) -- cycle;
\fill (0.03, 0) rectangle (-0.03, 0.2);
\scoped [shift={(150:0.1)}, rotate=45] {\fill (0.03, 0) -- (0.0125, 0.2) -- (-0.0125, 0.2) -- (-0.03, 0) -- cycle;}
\scoped [shift={(30:0.1)}, rotate=315] {\fill (0.03, 0) -- (0.0125, 0.2) -- (-0.0125, 0.2) -- (-0.03, 0) -- cycle;}
},
MilSymb seasubsurface/main/sea mine decoy/.pic={
\pic {MilSymb seasubsurface/main/half sea mine};
\pic [scale=0.5, yshift=-7] {MilSymb multi/main/decoy};
},
MilSymb seasubsurface/main/bottomed sea mine decoy/.pic={
\pic {MilSymb seasubsurface/main/half sea mine};
\pic [scale=0.5, yshift=-5] {MilSymb multi/main/decoy};
\fill (0.2, -0.2) rectangle (-0.2, -0.175);
},
MilSymb seasubsurface/main/moored sea mine decoy/.pic={
\pic {MilSymb seasubsurface/main/half sea mine};
\pic [scale=0.5, yshift=-5] {MilSymb multi/main/decoy};
\draw [thick] (0.15, -0.2) -- (-0.15, -0.2);
\draw [thick] (0, -0.2) -- (0, 0);
},
MilSymb seasubsurface/main/military seabed installation/.pic={
\fill (-0.25, -0.2) -- (0.25, -0.2) -- (0.25, -0.075) -- (0.05, -0.075) -- (0.05, 0.025) -- (-0.125, 0.025) -- (-0.125, 0.2) -- (-0.25, 0.2) -- cycle;
},
MilSymb seasubsurface/main/civilian seabed installation/.pic={
\draw (-0.25, -0.2) -- (0.25, -0.2) -- (0.25, -0.075) -- (0.05, -0.075) -- (0.05, 0.025) -- (-0.125, 0.025) -- (-0.125, 0.2) -- (-0.25, 0.2) -- cycle;
},
% MINES %
MilSymb seasubsurface/mine/sea mine/.pic={
\fill (0, -0.05) circle(0.25);
\fill (0.05, 0) rectangle (-0.05, 0.25);
\scoped [shift={(150:0.1)}, rotate=45] {\fill (0.075, 0) -- (0.02, 0.25) -- (-0.02, 0.25) -- (-0.075, 0) -- cycle;}
\scoped [shift={(30:0.1)}, rotate=315] {\fill (0.075, 0) -- (0.02, 0.25) -- (-0.02, 0.25) -- (-0.075, 0) -- cycle;}
},
MilSymb seasubsurface/mine/sea mine-neutralised/.pic={
\begin{scope} [even odd rule]
\clip [shift={(150:0.1)}, rotate=45] (0.015, 0.26) rectangle (-0.015, -0.39) [reverseclip];
\clip [shift={(30:0.1)}, rotate=315] (0.015, 0.26) rectangle (-0.015, -0.39) [reverseclip];
\pic {MilSymb seasubsurface/mine/sea mine};
\end{scope}
},
MilSymb seasubsurface/mine/bottomed sea mine/.pic={
\pic [yshift=1.5] {MilSymb seasubsurface/mine/sea mine};
\fill (0.25, -0.225) rectangle (-0.25, -0.3);
},
MilSymb seasubsurface/mine/bottomed sea mine-neutralised/.pic={
\pic [yshift=1.5] {MilSymb seasubsurface/mine/sea mine-neutralised};
\fill (0.25, -0.225) rectangle (-0.25, -0.3);
},
MilSymb seasubsurface/mine/moored sea mine/.pic={
\pic [yshift=2.5] {MilSymb seasubsurface/mine/sea mine};
\draw [thick] (0, -0.2) -- (0, -0.35);
\draw [thick] (0.175, -0.35) -- (-0.175, -0.35);
},
MilSymb seasubsurface/mine/moored sea mine-neutralised/.pic={
\pic [yshift=2.5] {MilSymb seasubsurface/mine/sea mine-neutralised};
\draw [thick] (0, -0.2) -- (0, -0.35);
\draw [thick] (0.175, -0.35) -- (-0.175, -0.35);
},
MilSymb seasubsurface/mine/floating sea mine/.pic={
\pic [yshift=2.5] {MilSymb seasubsurface/mine/sea mine};
\draw [thick] (-0.3, -0.3) -- (-0.25, -0.215) -- (-0.2, -0.3) -- (-0.15, -0.215) -- (-0.1, -0.3) -- (-0.05, -0.215) -- (0, -0.3) -- (0.05, -0.215) -- (0.1, -0.3) -- (0.15, -0.215) -- (0.2, -0.3) -- (0.25, -0.215) -- (0.3, -0.3);
},
MilSymb seasubsurface/mine/floating sea mine-neutralised/.pic={
\pic [yshift=2.5] {MilSymb seasubsurface/mine/sea mine-neutralised};
\draw [thick] (-0.3, -0.3) -- (-0.25, -0.215) -- (-0.2, -0.3) -- (-0.15, -0.215) -- (-0.1, -0.3) -- (-0.05, -0.215) -- (0, -0.3) -- (0.05, -0.215) -- (0.1, -0.3) -- (0.15, -0.215) -- (0.2, -0.3) -- (0.25, -0.215) -- (0.3, -0.3);
},
MilSymb seasubsurface/mine/sea mine in other position/.pic={
\pic {MilSymb seasubsurface/mine/sea mine};
\draw [thick] (0.3, -0.05) -- (0.2, -0.05);
\draw [thick] (-0.3, -0.05) -- (-0.2, -0.05);
},
MilSymb seasubsurface/mine/sea mine in other position-neutralised/.pic={
\pic {MilSymb seasubsurface/mine/sea mine-neutralised};
\draw [thick] (0.3, -0.05) -- (0.2, -0.05);
\draw [thick] (-0.3, -0.05) -- (-0.2, -0.05);
},
MilSymb seasubsurface/mine/rising sea mine/.pic={
\pic [yshift=3.5] {MilSymb seasubsurface/mine/sea mine};
\draw [thick] (0, -0.15) -- (0, -0.35);
\fill (0.065, -0.425) -- (-0.065, -0.425) -- (0, -0.225);
},
MilSymb seasubsurface/mine/rising sea mine-neutralised/.pic={
\pic [yshift=3.5] {MilSymb seasubsurface/mine/sea mine-neutralised};
\draw [thick] (0, -0.15) -- (0, -0.35);
\fill (0.065, -0.425) -- (-0.065, -0.425) -- (0, -0.225);
},
MilSymb seasubsurface/mine/unexploded ordanance/.pic={
\fill (0, 0) circle(0.25);
\fontsize{6}{0}\selectfont
\node [text=MilSymb@fill] {UXO};
},
%% SPACE %%
% MAIN %
MilSymb space/main/military orbiter shuttle/.pic={
\fill ($(0, 0.3)!0.35!(0.125, -0.15)$) -- (0.125, -0.15) -- (-0.125, -0.15) -- ($(-0.125, -0.15)!0.65!(0, 0.3)$) to[in=105, out=75] cycle;
\draw (0, -0.20) -- (0, -0.15); 
},
MilSymb space/main/civilian orbiter shuttle/.pic={
\draw ($(0, 0.3)!0.35!(0.125, -0.15)$) -- (0.125, -0.15) -- (-0.125, -0.15) -- ($(-0.125, -0.15)!0.65!(0, 0.3)$) to[in=105, out=75] cycle;
\draw (0, -0.20) -- (0, -0.15); 
},
MilSymb space/main/military capsule/.pic={
\fill ($(0.25, -0.2)!0.1!(0, 0.5)$) -- ($(0.25, -0.2)!0.5!(0, 0.5)$) to[in=75, out=105, looseness=0.75] ($(0, 0.5)!0.5!(-0.25, -0.2)$) -- ($(0, 0.5)!0.9!(-0.25, -0.2)$) to[in=285, out=255, looseness=0.55] cycle;
},
MilSymb space/main/civilian capsule/.pic={
\draw ($(0.25, -0.2)!0.1!(0, 0.5)$) -- ($(0.25, -0.2)!0.5!(0, 0.5)$) to[in=75, out=105, looseness=0.75] ($(0, 0.5)!0.5!(-0.25, -0.2)$) -- ($(0, 0.5)!0.9!(-0.25, -0.2)$) to[in=285, out=255, looseness=0.55] cycle;
},
MilSymb space/main/military satellite/.pic={
\fill (0.45, 0.075) rectangle (0.15, -0.075);
\fill (0.075, 0.075) rectangle (-0.075, -0.075);
\fill (-0.45, 0.075) rectangle (-0.15, -0.075);
\draw (0.15, 0) -- (0.075, 0);
\draw (-0.15, 0) -- (-0.075, 0);
},
MilSymb space/main/civilian satellite/.pic={
\draw (0.45, 0.075) rectangle (0.15, -0.075);
\draw (0.075, 0.075) rectangle (-0.075, -0.075);
\draw (-0.45, 0.075) rectangle (-0.15, -0.075);
\draw (0.15, 0) -- (0.075, 0);
\draw (-0.15, 0) -- (-0.075, 0);
},
MilSymb space/main/anti satellite weapon/.pic={
\pic {MilSymb space/main/military satellite};
\draw [-{Stealth[scale=0.75]}] (0, -0.2) -- (0, 0.2);
},
MilSymb space/main/military astronomical satellite/.pic={
\pic {MilSymb space/main/military satellite};
\fill (0.04, 0.075) rectangle (-0.04, 0.2);
\fill (0.02, -0.075) rectangle (-0.02, -0.2);
},
MilSymb space/main/civilian astronomical satellite/.pic={
\pic {MilSymb space/main/civilian satellite};
\draw (0.04, 0.075) -- (0.04, 0.2) -- (-0.04, 0.2) -- (-0.04, 0.075);
\draw (0.02, -0.075) -- (0.02, -0.2) -- (-0.02, -0.2) -- (-0.02, -0.075);
},
MilSymb space/main/military bio satellite/.pic={
\pic [yshift=-1] {MilSymb space/main/military satellite};
\fill (-0.075, 0.13) circle (0.07);
\fill ($(-0.075, 0.13) + (60:0.07)$) -- ++(-30:0.22) -- ++(0, -0.025) -- (-0.005, 0.13) -- cycle;
},
MilSymb space/main/civilian bio satellite/.pic={
\pic [yshift=-1] {MilSymb space/main/civilian satellite};
\draw (-0.075, 0.13) circle (0.07);
\draw ($(-0.075, 0.13) + (60:0.07)$) -- ++(-30:0.22) -- ++(0, -0.025) -- (-0.005, 0.13);
},
MilSymb space/main/military communications satellite/.pic={
\pic {MilSymb space/main/military satellite};
\draw (0, 0.075) -- (0, 0.125);
\draw (0, 0.125) arc (270:340:0.25 and 0.1);
\draw (0, 0.125) arc (270:200:0.25 and 0.1);  
},
MilSymb space/main/civilian communications satellite/.pic={
\pic {MilSymb space/main/civilian satellite};
\draw (0, 0.075) -- (0, 0.125);
\draw (0, 0.125) arc (270:340:0.25 and 0.1);
\draw (0, 0.125) arc (270:200:0.25 and 0.1);  
},
MilSymb space/main/military earth observation satellite/.pic={
\pic [yshift=3.75, scale=0.9] {MilSymb space/main/military satellite};
\draw (0, 0.065) -- +(315:0.125);
\draw (0, 0.065) -- +(225:0.125);
\fill (0, -0.12) circle (0.08);
},
MilSymb space/main/civilian earth observation satellite/.pic={
\pic [yshift=3.75, scale=0.9] {MilSymb space/main/civilian satellite};
\draw (0, 0.065) -- +(315:0.125);
\draw (0, 0.065) -- +(225:0.125);
\draw (0, -0.12) circle (0.08);
},
MilSymb space/main/military minaturised satellite/.pic={
\pic [scale=0.6] {MilSymb space/main/military satellite};
\draw (0.05, 0.2) -- (0, 0.1) -- (-0.05, 0.2); 
\draw (0.05, -0.2) -- (0, -0.1) -- (-0.05, -0.2); 
\draw (-0.4, 0.05) -- (-0.3, 0) -- (-0.4, -0.05); 
\draw (0.4, 0.05) -- (0.3, 0) -- (0.4, -0.05); 
},
MilSymb space/main/civilian minaturised satellite/.pic={
\pic [scale=0.6] {MilSymb space/main/civilian satellite};
\draw (0.05, 0.2) -- (0, 0.1) -- (-0.05, 0.2); 
\draw (0.05, -0.2) -- (0, -0.1) -- (-0.05, -0.2); 
\draw (-0.4, 0.05) -- (-0.3, 0) -- (-0.4, -0.05); 
\draw (0.4, 0.05) -- (0.3, 0) -- (0.4, -0.05); 
},
MilSymb space/main/military navigational satellite/.pic={
\pic [yshift=-3.75, scale=0.9] {MilSymb space/main/military satellite};
\draw (0.1, -0.03) -- (0, 0.2) -- (-0.1, -0.03);
\draw (-0.1, 0.15) arc (180:360:0.1);
},
MilSymb space/main/civilian navigational satellite/.pic={
\pic [yshift=-3.75, scale=0.9] {MilSymb space/main/civilian satellite};
\draw (0.1, -0.03) -- (0, 0.2) -- (-0.1, -0.03);
\draw (-0.1, 0.15) arc (180:360:0.1);
},
MilSymb space/main/reconnaissance satellite/.pic={
\pic [yshift=1] {MilSymb space/main/military satellite};
\draw (-0.075, -0.05) -- +(250:0.1);
\draw (-0.025, -0.05) -- +(260:0.1);
\draw (0.025, -0.05) -- +(280:0.1);
\draw (0.075, -0.05) -- +(290:0.1);
},
MilSymb space/main/military tether satellite/.pic={
\pic [yshift=-3.75, scale=0.9] {MilSymb space/main/military satellite};
\draw (0, -0.066) -- +(30:0.3);
\fill (0, -0.066) +(30:0.375) circle(0.075);
},
MilSymb space/main/civilian tether satellite/.pic={
\pic [yshift=-3.75, scale=0.9] {MilSymb space/main/civilian satellite};
\draw (0, -0.065) -- +(30:0.3);
\draw (0, -0.065) +(30:0.375) circle(0.075);
},
MilSymb space/main/military weather satellite/.pic={
\pic [yshift=-3.75, scale=0.9] {MilSymb space/main/military satellite};
\node at (0, 0.07) {WX};
},
MilSymb space/main/civilian weather satellite/.pic={
\pic [yshift=-3.75, scale=0.9] {MilSymb space/main/civilian satellite};
\node at (0, 0.07) {WX};
},
MilSymb space/main/civilian space station/.pic={
\begin{scope}
\clip (0.025, 0) rectangle (-0.025, 0.2) [reverseclip];
\draw (0, 0) circle (0.15 and 0.06);
\draw (0, -0.0125) circle (0.25 and 0.1);
\end{scope}
\draw (0.025, 0) -- (0.025, 0.175) arc(0:180:0.025) -- (-0.025, 0);
\begin{scope}
\clip (0, 0) circle (0.15 and 0.06) (0, -0.0125) circle (0.25 and 0.1) [reverseclip];
\draw (0.025, 0) -- (0.025, -0.175) arc(360:180:0.025) -- (-0.025, 0);
\end{scope}
},
MilSymb space/main/military space station/.pic={
\fill [even odd rule] (0, 0) circle (0.15 and 0.06) (0, -0.0125) circle (0.25 and 0.1);
\fill (0.025, 0) -- (0.025, 0.175) arc(0:180:0.025) -- (-0.025, -0.175) arc(180:360:0.025) -- cycle;
},
% DEBRIS %
MilSymb space/debris/small/.pic={
\begin{scope}
\clip circle (0.5);
\draw (0.15, 0.5) -- (0, 0.2) -- (-0.15, 0.5);
\draw (0.15, -0.5) -- (0, -0.2) -- (-0.15, -0.5);
\draw (0.5, 0.15) -- (0.2, 0) -- (0.5, -0.15);
\draw (-0.5, 0.15) -- (-0.2, 0) -- (-0.5, -0.15);
\end{scope}
},
MilSymb space/debris/large/.pic={
\begin{scope}
\clip circle (0.5);
\draw (0.15, 0.2) -- (0, 0.5) -- (-0.15, 0.2);
\draw (0.15, -0.2) -- (0, -0.5) -- (-0.15, -0.2);
\draw (-0.2, 0.15) -- (-0.5, 0) -- (-0.2, -0.15);
\draw (0.2, 0.15) -- (0.5, 0) -- (0.2, -0.15);
\end{scope}
},
%% ACTIVITY %%
% FULLFRAME %
MilSymb activity/main/explosion/.pic={
\node [starburst, draw, minimum width=0.9cm, minimum height=0.9cm, starburst point height=0.25cm, starburst points=12] {};
},
MilSymb activity/main/improvised explosive device explosion/.pic={
\node [starburst, draw, minimum width=0.9cm, minimum height=0.9cm, starburst point height=0.25cm, starburst points=12] {};
\fontsize{6}{0}\selectfont
\node {IED};
},
MilSymb activity/main/radio and television psychological operations/.pic={
\pic {MilSymb multi/main/signal/\MilSymb@selectedfaction};
\pic {MilSymb multi/main/psychological operations};
},
% MAIN %
MilSymb activity/main/arrest/.pic={
\pic [scale=0.75] {MilSymb multi/main/individual};
\draw circle (0.2);
},
MilSymb activity/main/automobile/.pic={
\begin{scope}
\clip (0.2, -0.15) circle (0.05) (-0.2, -0.15) circle (0.05) [reverseclip];
\draw (0.3, -0.15) -- (-0.3, -0.15) -- (-0.3, 0.025) -- (-0.1, 0.025) -- (-0.1, 0.2) -- (0.1, 0.2) -- (0.1, 0.025) -- (0.3, 0.025) -- cycle;
\draw (0.075, 0.025) rectangle (-0.075, 0.175);  
\end{scope}
\draw (0.2, -0.15) circle (0.05);
\draw (-0.2, -0.15) circle (0.05);
},
MilSymb activity/main/drive by shooting/.pic={
\draw (0.25, -0.15) circle (0.05);
\draw (-0.25, -0.15) circle (0.05);
\draw (0.3, -0.1) -- (-0.3, -0.1);
\draw (0, -0.1) -- (0, 0.2);
\draw (0.075, 0.1) -- (0, 0.2) -- (-0.075, 0.1);
},
MilSymb activity/main/graffiti/.pic={
\draw (0.05, 0.2) arc (90:270:0.05) arc (450:270:0.05) arc (90:270:0.05) arc (450:270:0.05);
\draw (-0.05, 0.2) arc (90:270:0.05) arc (450:270:0.05) arc (90:270:0.05) arc (450:270:0.05);
},
MilSymb activity/main/patrolling/.pic={
\draw (0.3, 0.05) -- (-0.05, 0.05) -- (0.05, -0.05) -- (-0.4, -0.05);
\draw (-0.3, 0) -- (-0.4, -0.05) -- (-0.3, -0.1); 
\fontsize{4}{0}\selectfont
\node [anchor=west] at (0.3, 0.05) {P}; 
},
MilSymb activity/main/poisoning/.pic={
\draw (0, 0.055) circle (0.145);
\draw (0.3, 0) -- (-0.3, -0.2);
\draw (-0.3, 0) -- (0.3, -0.2);
},
MilSymb activity/main/searching/.pic={
\draw (-0.4, 0) arc (180:0:0.1) arc (180:360:0.1) arc (180:0:0.1) arc (180:270:0.1) -- +(0.1, 0);
\draw (0.3, -0.05) -- (0.4, -0.1) -- (0.3, -0.15); 
},
% UPPER %
MilSymb activity/upper/house to house/.pic={
\draw (-0.075, -0.1) rectangle (0.075, 0.05);
\draw (-0.075, 0.05) -- (-0.1, 0.05) -- (0, 0.125) -- (0.1, 0.05) -- (0.075, 0.05);
},
%% MULTIPLE CLASS SYMBOLS %%
% FULLFRAME %
MilSymb multi/main/signal/friendly/.pic={
\clip \clipfriendly;
\draw (-0.75, 0.5) -- (0, -0.1) -- (0, 0.1) -- (0.75, -0.5);
},
MilSymb multi/main/signal/hostile/.pic={
\clip \cliphostile;
\draw (-0.6, 0.5) -- (0, -0.1) -- (0, 0.1) -- (0.6, -0.5);
},
MilSymb multi/main/signal/neutral/.pic={
\clip \clipneutral;
\draw (-0.5, 0.5) -- (0, -0.1) -- (0, 0.1) -- (0.5, -0.5);
},
MilSymb multi/main/signal/unknown/.pic={
\clip \clipunknown;
\draw (-0.75, 0.5) -- (0, -0.1) -- (0, 0.1) -- (0.75, -0.5);
},
% MAIN %
MilSymb multi/main/amphibious/.pic={
\draw (0.81, 0) to[out=90,in=90,looseness=2.25] (0.63, 0) to[out=-90,in=-90,looseness=2.25] (0.45, 0) to[out=90,in=90,looseness=2.25] (0.27, 0) to[out=-90,in=-90,looseness=2.25] (0.09, 0) to[out=90,in=90,looseness=2.25] (-0.09, 0) to[out=-90,in=-90,looseness=2.25] (-0.27, 0) to[out=90,in=90,looseness=2.25] (-0.45, 0) to[out=-90,in=-90,looseness=2.25] (-0.63, 0) to[out=90,in=90,looseness=2.25] (-0.81, 0);
},
MilSymb multi/main/antenna/.pic={
\draw (0, -0.3) -- (0, 0.3);
\draw (-0.125, 0.3) -- (0, 0.2) -- (0.125, 0.3);
},
MilSymb multi/main/ammunition/.pic={
\draw (0.175, -0.175) -- (-0.175,-0.175);
\draw (0.125, -0.175) -- (0.125, 0) to[out=90,in=90,looseness=2.75] (-0.125, 0) -- (-0.125, -0.175);
},
MilSymb multi/main/armoured/.pic={
\draw (-0.275, 0.2) arc(90:270:0.2) -- (0.275, -0.2) arc(270:450:0.2) -- cycle;
},
MilSymb multi/main/bridge/.pic={
\draw (0.35, -0.15) -- (0.25, -0.05) -- (-0.25, -0.05) -- (-0.35, -0.15);
\scoped[yscale=-1]{\draw (0.35, -0.15) -- (0.25, -0.05) -- (-0.25, -0.05) -- (-0.35, -0.15);} 
},
MilSymb multi/main/petroleum oil and lubricants/.pic={
\draw (0, -0.175) -- (0, 0) -- (0.15, 0.175) -- (-0.15, 0.175) -- (0, 0);
},
MilSymb multi/main/chemical biological radiological nuclear/.pic={
\draw [ultra thick] (0.15,-0.2) arc(0:90:0.45 and 0.375);
\draw [fill] (-0.29,0.1) circle(0.096);
\begin{scope}[xscale=-1]
\draw [ultra thick] (0.15,-0.2) arc(0:90:0.45 and 0.375);
\draw [fill] (-0.29,0.1) circle(0.096);
\end{scope}
},
MilSymb multi/main/drill/.pic={
\fill (-0.1,-0.2) -- (0.1,-0.2) -- (0.2, 0.2) -- (-0.2, 0.2) -- cycle;
},
MilSymb multi/main/decoy/.pic={
\fill (0.2, 0) -- (0.4, 0.15) -- (0.4, -0.15) -- cycle;
\fill (-0.1, 0) -- (0.1, 0.15) -- (0.1, -0.15) -- cycle;
\fill (-0.4, 0) -- (-0.2, 0.15) -- (-0.2, -0.15) -- cycle;
},
MilSymb multi/main/diver/.pic={
\draw (0, 0.016) circle (0.075);
\draw (0, 0.016) circle (0.185);
\begin{scope}
\path [use as bounding box] (0.3, 0.2) rectangle (-0.3, -0.2);
\clip (0, 0.016) circle (0.185) [reverseclip];
\draw (-0.25, -0.06) rectangle (0.25, 0.09);
\draw (0, 0) -- (-0.2, -0.2) -- (0.2, -0.2) -- cycle;
\end{scope}
},
MilSymb multi/main/individual/.pic={
\draw (0, 0.125) circle (0.075);
\draw (0, 0.05) -- (0, -0.2);
\draw (0.075,0) -- (-0.075,0);
},
MilSymb multi/main/aviation fixed wing/.pic={
\fill (-0.36,0.125) arc (77:275:0.075 and 0.125) -- (0,0) -- cycle;
\begin{scope}[xscale=-1]
\fill (-0.36,0.125) arc (77:275:0.075 and 0.125) -- (0,0) -- cycle;
\end{scope}},
MilSymb multi/main/aviation rotary wing/.pic={
\fill (0.44, 0.15) -- (0.44, -0.15) -- (-0.44, 0.15) -- (-0.44, -0.15) -- cycle;},
MilSymb multi/main/field artillery/.pic={
\fill circle(0.2);},
MilSymb multi/main/killing victim/.pic={
\pic {MilSymb multi/main/individual};
\draw (-0.41, 0.2) -- (0.41, -0.2);
},
MilSymb multi/main/victim of an attempted crime/.pic={
\pic {MilSymb multi/main/individual};
\draw [dashed] (-0.41, 0.2) -- (0.41, -0.2);
},
MilSymb multi/main/maintenance/.pic={
\draw [ultra thick] (0.275, 0) -- (-0.275, 0);
\draw [ultra thick] (0.4, -0.15) .. controls (0.275, -0.145) .. (0.275, 0) .. controls (0.275, 0.145) .. (0.4, 0.15);
\begin{scope} [xscale=-1]
\draw [ultra thick] (0.4, -0.15) .. controls (0.275, -0.145) .. (0.275, 0) .. controls (0.275, 0.145) .. (0.4, 0.15);
\end{scope}
},
MilSymb multi/main/medic/.pic={
\fill (-0.075, -0.2) -- (0.075, -0.2) -- (0.075, 0.2) -- (-0.075, 0.2) -- cycle;
\begin{scope}[rotate=90]
\fill (-0.075, -0.2) -- (0.075, -0.2) -- (0.075, 0.2) -- (-0.075, 0.2) -- cycle;
\end{scope}
},
MilSymb multi/main/medical/.pic={
\draw (M.north) -- (M.south);
\draw (M.east) -- (M.west);
},
MilSymb multi/main/medical treatment facility/.pic={
\draw (M.north) -- (M.south);
\draw (M.east) -- (M.west);
\draw ($(M.east)!0.25!(M.west) + (0, 0.2)$) -- ($(M.east)!0.25!(M.west) + (0, -0.2)$);
\draw ($(M.east)!0.75!(M.west) + (0, 0.2)$) -- ($(M.east)!0.75!(M.west) + (0, -0.2)$);
},
MilSymb multi/main/mine/.pic={
\pic [yscale=0.5, xscale=0.6] {MilSymb multi/main/field artillery};
\draw [thick] (0, -0.2) -- (0, 0.2);
\begin{scope}[rotate=25]
\draw [thick] (0, -0.2) -- (0, 0.2);
\end{scope}
\begin{scope}[rotate=-25]
\draw [thick] (0, -0.2) -- (0, 0.2);
\end{scope}
},
MilSymb multi/main/person/.pic={
\draw (0, 0.125) circle (0.075);
\draw (0, 0.05) -- (0, -0.1);
\draw (0.05, -0.2) -- (0, -0.1) -- (-0.05, -0.2);
\draw (0.075,0) -- (-0.075,0);
},
MilSymb multi/main/psychological operations/.pic={
\draw [line join=round] (0.15, 0.2) -- (0.15, -0.2) -- (0.025, -0.08) -- (-0.15, -0.08) -- (-0.15, 0.08) -- (0.025, 0.08) -- cycle;
\draw (0.15, -0.1) -- (0.225, -0.1);
\draw (0.15, -0.0325) -- (0.225, -0.0325);
\draw (0.15, 0.0325) -- (0.225, 0.0325);
\draw (0.15, 0.1) -- (0.225, 0.1);
},
MilSymb multi/main/psychological operations filled/.pic={
\draw [line join=round, fill] (0.15, 0.2) -- (0.15, -0.2) -- (0.025, -0.08) -- (-0.15, -0.08) -- (-0.15, 0.08) -- (0.025, 0.08) -- cycle;
\draw (0.15, -0.1) -- (0.225, -0.1);
\draw (0.15, -0.0325) -- (0.225, -0.0325);
\draw (0.15, 0.0325) -- (0.225, 0.0325);
\draw (0.15, 0.1) -- (0.225, 0.1);
},
MilSymb multi/main/radar/.pic={
\begin{scope} [yshift=1]
\draw (135:0.225) arc (150:290:0.26);
\begin{scope}
\clip (190:0.2) rectangle (0.3, 0.2);
\draw (180:0.2) -- (0,0.16) -- (0,0) -- (0.2, 0.16);
\end{scope}
\end{scope}
},
MilSymb multi/main/sailing boat/.pic={
\draw (-0.15, -0.2) -- (0.15, -0.2) -- (0.25, -0.025) -- (-0.25, -0.025) -- cycle;
\draw (0, -0.025) -- (0, 0.2);
\draw (0.025, 0) -- (0.025, 0.19) -- (0.225, 0) -- cycle;
},
MilSymb multi/main/transportation/.pic={
\draw (0, 0) circle (0.2);
\draw (0:-0.2) -- (0:0.2);
\draw (90:-0.2) -- (90:0.2);
\draw (45:-0.2) -- (45:0.2);
\draw (-45:-0.2) -- (-45:0.2);
},
MilSymb multi/main/naval/.pic={
\fontsize{15}{0}\selectfont
\node at (0, 0) {$\anchor$};},
MilSymb multi/main/unmanned systems/.pic={
\fill (0, -0.1) -- (0.45, 0.05) -- (0.45,0.1) -- (0, 0.025) -- (-0.45, 0.1) -- (-0.45, 0.05) -- cycle;},
MilSymb multi/main/civilian unmanned systems/.pic={
\draw (0, -0.1) -- (0.45, 0.05) -- (0.45,0.1) -- (0, 0.025) -- (-0.45, 0.1) -- (-0.45, 0.05) -- cycle;},
MilSymb multi/main/quartermaster/.pic={
\draw (0.325, 0.05) circle (0.125);
\draw (0.2, 0.05) -- (-0.45, 0.05);
\draw (-0.35, 0.05) -- (-0.35, -0.15);
\draw (-0.2, 0.05) -- (-0.2, -0.15);
\draw (-0.35, -0.075) -- (-0.2, -0.075);
},
MilSymb multi/main/engineer/.pic={
\draw (0.4, -0.2) -- (0.4, 0.2) -- (-0.4, 0.2) -- (-0.4, -0.2);
\draw (0, 0.2) -- (0, -0.2);
},
MilSymb multi/main/medical/.pic={
\draw (M.north) -- (M.south);
\draw (M.east) -- (M.west);
},
MilSymb multi/main/major end/.pic={
\draw [thick] (0.3, 0.05) arc (55:125:0.5);
\fill (0.35, 0) circle (0.1);
\fill (-0.35, 0) circle (0.1);
},
MilSymb multi/main/repair parts/.pic={
\draw (0, 0) circle (0.1);
\begin{scope}
\clip  (0, 0) circle (0.1) [reverseclip];
\draw  (90:0.2) -- (90:-0.2);
\draw  (45:0.2) -- (45:-0.2);
\draw  (-45:0.2) -- (-45:-0.2);
\draw  (0:0.2) -- (0:-0.2);
\end{scope}
},
MilSymb multi/main/missile/.pic={
\draw (0, 0.425) -- (0, -0.4);
\draw (0.15, -0.4) -- (0.15, 0.25) to[out=90,in=90,looseness=2] (-0.15, 0.25) -- (-0.15, -0.4);
},
MilSymb multi/main/sensor/.pic={
\fill (0, -0.2) arc (180:90:0.2) arc (270:180:0.2) arc (0:-90:0.2) arc (90:0:0.2) -- cycle;
},
MilSymb multi/main/water/.pic={
\draw (-0.3, 0.05) -- (0, 0.05) to[in=90, out=0] (0.3, -0.2);
\draw (0, 0.05) -- (0, 0.2);
\draw (0.075, 0.2) -- (-0.075, 0.2);
},
MilSymb multi/main/water purification/.pic={
\pic {MilSymb multi/main/water};
\fontsize{4}{0}\selectfont
\node at (-0.1,-0.1) {PURE};
},
% UPPER %
MilSymb multi/upper/naval/.pic={
\node at (0, 0) {$\anchor$};
},
MilSymb multi/upper/medic/.pic={
\pic [scale=0.7] {MilSymb multi/main/medic};
},
MilSymb multi/upper/runway/.pic={
\draw (-0.1, -0.125) -- (0.025, 0.1);
\draw (-0.15, -0.075) -- (0.15, -0.075);
},
% LOWER %
MilSymb multi/lower/pack animal/.pic={
\draw (-0.25,-0.05) -- (-0.125,0.125) -- (0, -0.05) -- (0.125, 0.125) -- (0.25, -0.05);
},
% UPPER/LOWER %
MilSymb multi/upperlower/maintenance/.pic={
\pic [scale=0.5, yshift=-1.75] {MilSymb multi/main/maintenance};
},
MilSymb multi/upperlower/railroad/.pic={
\draw (0.36, 0.12) -- (-0.36, 0.12);
\draw (0.3, 0.06) circle (0.06);
\draw (0.18, 0.06) circle (0.06);
\draw (-0.3, 0.06) circle (0.06);
\draw (-0.18, 0.06) circle (0.06);
},
%% SUPPLY %%
MilSymb supply/class 1/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb main/text={I}};
},
MilSymb supply/class 2/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb main/text={II}};
},
MilSymb supply/class 3/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb multi/main/petroleum oil and lubricants};
},
MilSymb supply/class 4/.pic={
\pic {MilSymb land/main/supply\MilSymb@selectedfaction};
\pic {MilSymb main/text={IV}};
},
MilSymb supply/class 5/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb multi/main/ammunition};
},
MilSymb supply/class all/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb main/text={ALL}};
},
MilSymb supply/class US 1/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\draw (0.075, 0.2) to[out=210, in=150, looseness=1] (0.075, -0.2) to[out=180, in=180, looseness=1.5] (0.075, 0.2) -- cycle;
},
MilSymb supply/class US 2/.pic={
\pic {MilSymb land/main/supply\MilSymb@selectedfaction};
\pic {MilSymb multi/main/quartermaster};
},
MilSymb supply/class US 3/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb multi/main/petroleum oil and lubricants};
},
MilSymb supply/class US 4/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb multi/main/engineer};
},
MilSymb supply/class US 5/.pic={
\pic {MilSymb land/main/supply\MilSymb@selectedfaction};
\pic {MilSymb multi/main/ammunition};
},
MilSymb supply/class US 6/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb multi/main/person};
},
MilSymb supply/class US 7/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb multi/main/major end};
},
MilSymb supply/class US 8/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\draw (0, -0.2) -- (M.north);
\pic {MilSymb supply/medicalbar/\MilSymb@selectedfaction};
},
MilSymb supply/class US 9/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb multi/main/repair parts};
},
MilSymb supply/class US 10/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\pic {MilSymb main/text={CA}};
},
MilSymb supply/medicalbar/friendly/.pic={
\draw (0.75, 0.15) -- (-0.75, 0.15);
},
MilSymb supply/medicalbar/hostile/.pic={
\draw (0.5, 0.2) -- (-0.5, 0.2);
},
MilSymb supply/medicalbar/neutral/.pic={
\draw (0.5, 0.15) -- (-0.5, 0.15);
},
MilSymb supply/medicalbar/unknown/.pic={
\draw (0.65, 0.2) -- (-0.65, 0.2);
},
MilSymb supply/text/.pic={
\pic {MilSymb land/main/supply/\MilSymb@selectedfaction};
\fontsize{10}{0}\selectfont
\node {#1};
},
%% TEMPLATES %%
MilSymb main/text/.pic={
\fontsize{10}{0}\selectfont
\node {#1};},
MilSymb main/textfull/.pic={
\fontsize{15}{0}\selectfont
\node {#1};},
MilSymb main/textsquashed/.pic={
\fontsize{10}{0}\selectfont
\node [xscale=0.7] {#1};},
MilSymb main/textsmall/.pic={
\fontsize{6}{0}\selectfont
\node {#1};},
MilSymb main/textsmallsquashed/.pic={
\fontsize{6}{0}\selectfont
\node [xscale=0.7] {#1};},
%% BOILERPLATE %%
/MilSymb/.search also={/tikz},
/MilSymb/.cd,
fill/.code={\colorlet{MilSymb@fill}{#1}},
line/.store in=\MilSymb@line,
shape/.store in=\MilSymb@shape,
symbC/.store in=\MilSymb@symbC,
symbCT/.store in=\MilSymb@symbCT,
symbU/.store in=\MilSymb@symbU,
symbUT/.store in=\MilSymb@symbUT,
symbL/.store in=\MilSymb@symbL,
symbLT/.store in=\MilSymb@symbLT,
monochrome/.style={/MilSymb/fill=white},
unclear/.style={/MilSymb/line=densely dotted},
fill=gray,
line=solid,
}
\newcommand*{\clipfriendly}{
   (-0.75, -0.5) rectangle (0.75, 0.5)
}
\newcommand*{\cliphostile}{
  (0, -0.705) -- (-0.705, 0) -- (0, 0.705) -- (0.705, 0) -- cycle
}
\newcommand*{\clipneutral}{
   (0.5, -0.5) rectangle (-0.5, 0.5)
}
\newcommand*{\clipunknown}{
 (45:0.5) to[out=90,in=90,looseness=1.7] (135:0.5) to[out=180,in=180,looseness=1.7] (225:0.5) to[out=270, in=270, looseness=1.7] (315:0.5) to[out=0, in=0, looseness=1.7] (45:0.5) -- cycle
}
\acrodef{High}[HA]{}
\acrodef{Medium}[MA]{}
\acrodef{Low}[LA]{}
\acrodef{HighS}[H]{}
\acrodef{MediumS}[M]{}
\acrodef{LowS}[L]{}
\NewDocumentCommand\MilAir{ o D(){0,0} d() g}{
\tikzset{%	
   /MilSymb/.cd,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=air/none, fill=white},
   faction/friendly/.style={/MilSymb/.cd, shape=air/friendly, fill=friendlyA},
   faction/hostile/.style={/MilSymb/.cd, shape=air/hostile, fill=hostileA},
   faction/neutral/.style={/MilSymb/.cd, shape=air/neutral, fill=neutralA},
   faction/unknown/.style={/MilSymb/.cd, shape=air/unknown, fill=unknownA},
   main/.is choice,
   main/none/.style={/MilSymb/.cd, symbC=main/textsmall, symbCT=}, 
   main/military/.style={/MilSymb/.cd, symbC=main/text, symbCT=MIL},
   main/civilian/.style={/MilSymb/.cd, symbC=main/text, symbCT=CIV},
   main/military fixed wing/.style={/MilSymb/.cd, symbC=multi/main/aviation fixed wing},
   main/civilian fixed wing/.style={/MilSymb/.cd, symbC=air/main/civilian fixed wing},
   main/military rotary wing/.style={/MilSymb/.cd, symbC=multi/main/aviation rotary wing},
   main/civilian rotary wing/.style={/MilSymb/.cd, symbC=air/main/civilian rotary wing},
   main/military balloon/.style={/MilSymb/.cd, symbC=air/main/military balloon},
   main/civilian balloon/.style={/MilSymb/.cd, symbC=air/main/civilian balloon},
   main/military airship/.style={/MilSymb/.cd, symbC=air/main/military airship},
   main/civilian airship/.style={/MilSymb/.cd, symbC=air/main/civilian airship},
   main/unmanned aerial vehicle/.style={/MilSymb/.cd, symbC=multi/main/unmanned systems},
   main/air decoy/.style={/MilSymb/.cd, symbC=air/main/air decoy},
   main/medic/.style={/MilSymb/.cd, symbC=multi/main/medic},
   main/attack/.style={/MilSymb/.cd, symbC=main/text, symbCT=A},
   main/bomber/.style={/MilSymb/.cd, symbC=main/text, symbCT=B},
   main/cargo/.style={/MilSymb/.cd, symbC=main/text, symbCT=C},
   main/fighter/.style={/MilSymb/.cd, symbC=main/text, symbCT=F},
   main/jammer/.style={/MilSymb/.cd, symbC=main/text, symbCT=J},
   main/tanker/.style={/MilSymb/.cd, symbC=main/text, symbCT=K},
   main/patrol/.style={/MilSymb/.cd, symbC=main/text, symbCT=P},
   main/reconnaissance/.style={/MilSymb/.cd, symbC=main/text, symbCT=R},
   main/trainer/.style={/MilSymb/.cd, symbC=main/text, symbCT=T},
   main/utility/.style={/MilSymb/.cd, symbC=main/text, symbCT=U},
   main/vertical short takeoff and landing/.style={/MilSymb/.cd, symbC=main/text, symbCT=V},
   main/airborne command post/.style={/MilSymb/.cd, symbC=main/text, symbCT=ACP},
   main/airborne early warning/.style={/MilSymb/.cd, symbC=main/text, symbCT=AEW},
   main/anti surface warfare/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=ASUW},
   main/anti submarine warfare/.style={/MilSymb/.cd, symbC=main/text, symbCT=ASW},
   main/communications/.style={/MilSymb/.cd, symbC=main/text, symbCT=COM},
   main/combat search and rescue/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=CSAR},
   main/electronic support measures/.style={/MilSymb/.cd, symbC=main/text, symbCT=ESM},
   main/government/.style={/MilSymb/.cd, symbC=main/text, symbCT=GOV},
   main/mine countermeasures/.style={/MilSymb/.cd, symbC=main/text, symbCT=MCM},
   main/personnel recovery/.style={/MilSymb/.cd, symbC=main/text, symbCT=PR},
   main/passenger/.style={/MilSymb/.cd, symbC=main/text, symbCT=PX},
   main/search and rescue/.style={/MilSymb/.cd, symbC=main/text, symbCT=SAR},
   main/suppression of enemy air defence/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=SEAD},
   main/special operations forces/.style={/MilSymb/.cd, symbC=main/text, symbCT=SOF},
   main/ultra light/.style={/MilSymb/.cd, symbC=main/text, symbCT=UL},
   main/very important person/.style={/MilSymb/.cd, symbC=main/text, symbCT=VIP},
   upper/.is choice,
   upper/none/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=}, 
   upper/medical evacuation/.style={/MilSymb/.cd, symbU=multi/upper/medic},
   upper/cargo/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=C}, 
   upper/jammer/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=J},
   upper/tanker/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=K},
   upper/patrol/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=J}, 
   upper/reconnaissance/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=P}, 
   upper/jammer/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=R}, 
   upper/trainer/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=T}, 
   upper/utility/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=U}, 
   upper/airborne command post/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=ACP}, 
   upper/airborne early warning/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=AEW},
   upper/anti surface warfare/.style={/MilSymb/.cd, symbU=main/textsmallsquashed, symbUT=ASUW},    
   upper/anti submarine warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=ASW}, 
   upper/communications/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=COM},   
   upper/combat search and rescue/.style={/MilSymb/.cd, symbU=main/textsmallsquashed, symbUT=CSAR}, 
   upper/electronic support measures/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=ESM},   
   upper/government flight/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=GOV},   
   upper/mine countermeasures/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MCM},   
   upper/personnel recovery/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=PR},   
   upper/passenger plane/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=PX},
   upper/search and rescue/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=SAR},        
   upper/suppression of enemy air defenses/.style={/MilSymb/.cd, symbU=main/textsmallsquashed, symbUT=SEAD},
   upper/special operations forces/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=SOF},       
   upper/ultra light/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=UL},   
   upper/photographic/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=PH},   
   upper/very important person/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=VIP},  
   upper/escort/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=E},
   upper/intensive care/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=IC},
   lower/.is choice,
   lower/none/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=},
   lower/light/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=L},      
   lower/medium/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=M},    
   lower/heavy/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=H},    
   lower/boom only/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=B},    
   lower/drogue only/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=D},
   lower/boom and drogue/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=B/D}, 
   lower/close range/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=CR},      
   lower/short range/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=SR},     
   lower/medium range/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=MR},
   lower/long range/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=LR},
   track number/.store in=\MilSymb@symbA,
   call sign/.store in=\MilSymb@symbB,
   position and movement/.store in=\MilSymb@symbD,
   nation/.store in= \MilSymb@symbE,
   additional information/.store in=\MilSymb@symbF,
   speed leader/.code 2 args={\draw (0,0) -- (##1:##2);},
   speed leader/.value required,
   track number=,
   call sign=,
   position and movement=,
   nation=,
   additional information=,     
   main=none,
   upper=none,
   lower=none,
   #1,
 }%
\begin{scope}[shift={(#2)}, local bounding box=#3]
 \fontfamily{phv}\fontseries{bx}\selectfont
 \pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
 \pic {MilSymb \MilSymb@symbC={\MilSymb@symbCT}}; %Draw main symbol
 \pic at (0,0.34) {MilSymb \MilSymb@symbU={\MilSymb@symbUT}}; %Draw upper symbol
 \pic at (0,-0.34) {MilSymb \MilSymb@symbL={\MilSymb@symbLT}}; %Draw lower symbol
 \fontsize{6}{0}\selectfont
 \ifthenelse{\isequivalentto{\MilSymb@symbA}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\MilSymb@symbA};}
 \ifthenelse{\isequivalentto{\MilSymb@symbB}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbB};}
 \ifthenelse{\isequivalentto{\MilSymb@symbD}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbD};}
 \ifthenelse{\isequivalentto{\MilSymb@symbE}{\empty}}{}{\node [anchor=west] at ($(M.north east)!0.83!(M.south east)$) {\MilSymb@symbE};}
 \ifthenelse{\isequivalentto{\MilSymb@symbF}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbF};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\NewDocumentCommand\MilMissile{ o D(){0,0} d() g}{
\tikzset{%
   /MilSymb/.cd,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=air/missile, fill=white},
   faction/friendly/.style={/MilSymb/.cd, shape=air/friendly, fill=friendlyA},
   faction/hostile/.style={/MilSymb/.cd, shape=air/hostile, fill=hostileA},
   faction/neutral/.style={/MilSymb/.cd, shape=air/neutral, fill=neutralA},
   faction/unknown/.style={/MilSymb/.cd, shape=air/unknown, fill=unknownA},
   left/.is choice,
   left/none/.style= {/MilSymb/.cd, symbUT=}, 
   left/air/.style= {/MilSymb/.cd, symbUT=A}, 
   left/surface/.style= {/MilSymb/.cd, symbUT=S}, 
   left/sub surface/.style= {/MilSymb/.cd, symbUT=SU}, 
   left/space/.style= {/MilSymb/.cd, symbUT=SP}, 
   left/anti ballistic/.style= {/MilSymb/.cd, symbUT=AB}, 
   left/ballistic/.style= {/MilSymb/.cd, symbUT=B}, 
   left/cruise/.style= {/MilSymb/.cd, symbUT=C},
   right/.is choice,
   right/none/.style= {/MilSymb/.cd, symbLT=}, 
   right/air/.style= {/MilSymb/.cd, symbLT=A}, 
   right/surface/.style= {/MilSymb/.cd, symbLT=S}, 
   right/sub surface/.style= {/MilSymb/.cd, symbLT=SU}, 
   right/space/.style= {/MilSymb/.cd, symbLT=SP}, 
   right/launched/.style= {/MilSymb/.cd, symbLT=L}, 
   right/missile/.style= {/MilSymb/.cd, symbLT=M},
   track number/.store in= \MilSymb@symbA,
   call sign/.store in=\MilSymb@symbB,
   position and movement/.store in=\MilSymb@symbD,
   nation/.store in= \MilSymb@symbE,
   additional information/.store in=\MilSymb@symbF,
   track number=,
   call sign=,
   position and movement=,
   nation=,
   additional information=,      
   faction=none,
   left=none,
   right=none,
   #1,
}%
\begin{scope}[shift={(#2)}, local bounding box=#3]
\fontfamily{phv}\fontseries{bx}\selectfont
\pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
\draw[fill=unknownA] (0, 0.3) -- (-0.05, 0.2) -- (-0.05, -0.2) -- (-0.125,-0.3) -- (-0.125,-0.4) -- (0, -0.265) -- (0.125,-0.4) -- (0.125,-0.3) -- (0.05,-0.2) -- (0.05,0.2) -- cycle;
\fontsize{6}{0}\selectfont
\node at (0.34, 0) {\MilSymb@symbLT};
\node at (-0.34, 0) {\MilSymb@symbUT};
 \ifthenelse{\isequivalentto{\MilSymb@symbA}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\MilSymb@symbA};}
 \ifthenelse{\isequivalentto{\MilSymb@symbB}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbB};}
 \ifthenelse{\isequivalentto{\MilSymb@symbD}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbD};}
 \ifthenelse{\isequivalentto{\MilSymb@symbE}{\empty}}{}{\node [anchor=west] at ($(M.north east)!0.83!(M.south east)$) {\MilSymb@symbE};}
 \ifthenelse{\isequivalentto{\MilSymb@symbF}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbF};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\newif\iftaskforce
\newif\iffeintdummy
\NewDocumentCommand\MilLand{ o D(){0,0} d() g}{
\tikzset{
  /MilSymb/.cd,
   selectedfaction/.store in=\MilSymb@selectedfaction,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=land/none, fill=white, selectedfaction=neutral},
   faction/friendly/.style={/MilSymb/.cd, shape=land/friendly, fill=friendlyA, selectedfaction=friendly},
   faction/hostile/.style={/MilSymb/.cd, shape=land/hostile, fill=hostileA, selectedfaction=hostile},
   faction/neutral/.style={/MilSymb/.cd, shape=land/neutral, fill=neutralA, selectedfaction=neutral},
   faction/unknown/.style={/MilSymb/.cd, shape=land/unknown, fill=unknownA, selectedfaction=unknown},
   main/.is choice,
   main/none/.style={/MilSymb/.cd, symbC=main/textsmall, symbCT=}, 
   main/air assault with organic lift/.style={/MilSymb/.cd, symbC=land/main/air assault with organic lift/\MilSymb@selectedfaction},
   main/air defence/.style={/MilSymb/.cd, symbC=land/main/air defence/\MilSymb@selectedfaction},
   main/air and naval gunfire liaison company/.style={/MilSymb/.cd, symbC=land/main/air and naval gunfire liaison company/\MilSymb@selectedfaction},
   main/broadcast transmitter antenna/.style={/MilSymb/.cd, symbC=multi/main/antenna},
   main/psychological operations broadcast/.style={/MilSymb/.cd, symbC=land/main/psychological operations broadcast},
   main/amphibious/.style={/MilSymb/.cd, symbC=land/main/amphibious/\MilSymb@selectedfaction},
   main/analysis/.style={/MilSymb/.cd, symbC=land/main/analysis},
   main/analysis electronic warfare/.style={/MilSymb/.cd, symbC=land/main/analysis electronic warfare},
   main/intercept/.style={/MilSymb/.cd, symbC=land/main/intercept},
   main/intercept electronic warfare/.style={/MilSymb/.cd, symbC=land/main/intercept electronic warfare},
   main/anti tank anti armour/.style={/MilSymb/.cd, symbC=land/main/anti tank anti armour/\MilSymb@selectedfaction},
   main/corps support/.style={/MilSymb/.cd, symbC=land/main/corps support/\MilSymb@selectedfaction},
   main/signal/.style={/MilSymb/.cd, symbC=multi/main/signal/\MilSymb@selectedfaction},
   main/signal radio/.style={/MilSymb/.cd, symbC=land/main/signal radio},
   main/signal radio relay/.style={/MilSymb/.cd, symbC=land/main/signal radio relay},
   main/signal radio teletype centre/.style={/MilSymb/.cd, symbC=land/main/signal radio teletype centre},
   main/signal tactical satellite/.style={/MilSymb/.cd, symbC=land/main/signal tactical satellite},
   main/direction finding/.style={/MilSymb/.cd, symbC=land/main/direction finding},
   main/direction finding electronic warfare/.style={/MilSymb/.cd, symbC=land/main/direction finding electronic warfare},
   main/headquarters/.style={/MilSymb/.cd, symbC=land/main/headquarters/\MilSymb@selectedfaction},
   main/infantry/.style={/MilSymb/.cd, symbC=land/main/infantry/\MilSymb@selectedfaction},
   main/jamming/.style={/MilSymb/.cd, symbC=land/main/jamming/\MilSymb@selectedfaction},
   main/jamming electronic warfare/.style={/MilSymb/.cd, symbC=land/main/jamming electronic warfare},
   main/main gun system/.style={/MilSymb/.cd, symbC=land/main/main gun system/\MilSymb@selectedfaction},
   main/medical/.style={/MilSymb/.cd, symbC=multi/main/medical},
   main/medical treatment facility/.style={/MilSymb/.cd, symbC=multi/main/medical treatment facility},
   main/motorized/.style={/MilSymb/.cd, symbC=land/main/motorized},
   main/reconnaissance/.style={/MilSymb/.cd, symbC=land/main/reconnaissance/\MilSymb@selectedfaction},
   main/search/.style={/MilSymb/.cd, symbC=land/main/search},
   main/search electronic warfare/.style={/MilSymb/.cd, symbC=land/main/search electronic warfare},
   main/supply/.style={/MilSymb/.cd, symbC=land/main/supply/\MilSymb@selectedfaction},
   main/above corps support/.style={/MilSymb/.cd, symbC=land/main/above corps support/\MilSymb@selectedfaction},
   main/administrative/.style={/MilSymb/.cd, symbC=main/text, symbCT=ADM},
   main/air traffic services/.style={/MilSymb/.cd, symbC=land/main/air traffic services},
   main/ammunition/.style={/MilSymb/.cd, symbC=multi/main/ammunition},
   main/armoured/.style={/MilSymb/.cd, symbC=multi/main/armoured},
   main/aviation fixed wing/.style={/MilSymb/.cd, symbC=multi/main/aviation fixed wing},
   main/aviation rotary wing/.style={/MilSymb/.cd, symbC=multi/main/aviation rotary wing},
   main/aviation composite fixed wing and rotary wing/.style={/MilSymb/.cd, symbC=land/main/aviation composite fixed wing and rotary wing},
   main/band/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=BAND},
   main/chemical biological radiological nuclear defence/.style={/MilSymb/.cd, symbC=multi/main/chemical biological radiological nuclear},
   main/civil affairs/.style={/MilSymb/.cd, symbC=main/text, symbCT=CA},
   main/civilian military cooperation/.style={/MilSymb/.cd, symbC=land/main/civilian military cooperation},
   main/combat/.style={/MilSymb/.cd, symbC=main/text, symbCT=CBT},
   main/combat service support/.style={/MilSymb/.cd, symbC=main/text, symbCT=CSS},
   main/combat support/.style={/MilSymb/.cd, symbC=land/main/combat support},
   main/combined arms/.style={/MilSymb/.cd, symbC=land/main/combined arms},
   main/counter intelligence/.style={/MilSymb/.cd, symbC=main/text, symbCT=CI},
   main/criminal investigation division/.style={/MilSymb/.cd, symbC=main/text, symbCT=CID},
   main/diving/.style={/MilSymb/.cd, symbC=multi/main/diver},
   main/dog/.style={/MilSymb/.cd, symbC=main/text, symbCT=DOG},
   main/drilling/.style={/MilSymb/.cd, symbC=multi/main/drilling},
   main/electronic ranging/.style={/MilSymb/.cd, symbC=land/main/electronic ranging},
   main/electronic warfare/.style={/MilSymb/.cd, symbC=main/text, symbCT=EW},
   main/engineer/.style={/MilSymb/.cd, symbC=multi/main/engineer},
   main/armoured engineer/.style={/MilSymb/.cd, symbC=multi/main/armoured engineer},
   main/electronic ordinance disposal/.style={/MilSymb/.cd, symbC=main/text, symbCT=EOD},
   main/field artillery/.style={/MilSymb/.cd, symbC=multi/main/field artillery},
   main/field artillery observer/.style={/MilSymb/.cd, symbC=land/main/field artillery observer},
   main/self propelled field artillery/.style={/MilSymb/.cd, symbC=land/main/self propelled field artillery},
   main/finance/.style={/MilSymb/.cd, symbC=land/main/finance},
   main/fire protection/.style={/MilSymb/.cd, symbC=land/main/fire protection},
   main/geospatial support/.style={/MilSymb/.cd, symbC=main/text, symbCT=GEO},
   main/information operations/.style={/MilSymb/.cd, symbC=main/text, symbCT=IO},
   main/interrogation/.style={/MilSymb/.cd, symbC=main/text, symbCT=IPW},
   main/joint fire support/.style={/MilSymb/.cd, symbC=main/text, symbCT=JFS},
   main/judge advocate general/.style={/MilSymb/.cd, symbC=main/text, symbCT=JAG},
   main/labour/.style={/MilSymb/.cd, symbC=land/main/labour},
   main/laundry/.style={/MilSymb/.cd, symbC=land/main/laundry},
   main/liaison/.style={/MilSymb/.cd, symbC=main/text, symbCT=LO},
   main/maintenance/.style={/MilSymb/.cd, symbC=multi/main/maintenance},
   main/material/.style={/MilSymb/.cd, symbC=main/text, symbCT=MAT},
   main/meteorological/.style={/MilSymb/.cd, symbC=main/text, symbCT=MET},
   main/military intelligence/.style={/MilSymb/.cd, symbC=main/text, symbCT=MI},
   main/military police/.style={/MilSymb/.cd, symbC=main/text, symbCT=MP},
   main/mine/.style={/MilSymb/.cd, symbC=multi/main/mine},
   main/missile/.style={/MilSymb/.cd, symbC=land/main/missile},
   main/morale welfare and recreation/.style={/MilSymb/.cd, symbC=main/text, symbCT=MWE},
   main/mortar/.style={/MilSymb/.cd, symbC=land/main/mortar},
   main/tactical mortar/.style={/MilSymb/.cd, symbC=land/main/tactical mortar},
   main/mortuary affairs/.style={/MilSymb/.cd, symbC=land/main/mortuary affairs},
   main/naval/.style={/MilSymb/.cd, symbC=multi/main/naval},
   main/observer/.style={/MilSymb/.cd, symbC=land/main/observer},
   main/ordnance/.style={/MilSymb/.cd, symbC=land/main/ordnance},
   main/personnel services/.style={/MilSymb/.cd, symbC=main/text, symbCT=PS},
   main/petroleum oil and lubricants/.style={/MilSymb/.cd, symbC=multi/main/petroleum oil and lubricants},
   main/pipeline/.style={/MilSymb/.cd, symbC=land/main/pipeline},
   main/postal/.style={/MilSymb/.cd, symbC=land/main/postal},
   main/public affairs/.style={/MilSymb/.cd, symbC=main/text, symbCT=PA},
   main/psychological operations/.style={/MilSymb/.cd, symbC=multi/main/psychological operations},
   main/quartermaster/.style={/MilSymb/.cd, symbC=multi/main/quartermaster},
   main/radar/.style={/MilSymb/.cd, symbC=multi/main/radar},
   main/radio/.style={/MilSymb/.cd, symbC=land/main/radio},
   main/radio relay/.style={/MilSymb/.cd, symbC=land/main/radio relay},
   main/radio teletype centre/.style={/MilSymb/.cd, symbC=land/main/radio teletype centre},
   main/religious support/.style={/MilSymb/.cd, symbC=main/text, symbCT=REL},
   main/replacement holding unit/.style={/MilSymb/.cd, symbC=main/text, symbCT=RHU},
   main/sea air land/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=SEAL},
   main/security/.style={/MilSymb/.cd, symbC=main/text, symbCT=SEC},
   main/sensor/.style={/MilSymb/.cd, symbC=multi/main/sensor},
   main/shore patrol security police/.style={/MilSymb/.cd, symbC=main/text, symbCT=SP},
   main/sniper/.style={/MilSymb/.cd, symbC=land/main/sniper},
   main/special forces/.style={/MilSymb/.cd, symbC=main/text, symbCT=SF},
   main/special operations forces/.style={/MilSymb/.cd, symbC=main/text, symbCT=SOF},
   main/surveillance/.style={/MilSymb/.cd, symbC=land/main/surveillance},
   main/survey/.style={/MilSymb/.cd, symbC=land/main/survey},
   main/sustainment/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=SUST},
   main/tactical satellite/.style={/MilSymb/.cd, symbC=land/main/tactical satellite},
   main/topographic/.style={/MilSymb/.cd, symbC=land/main/topographic},
   main/transportation/.style={/MilSymb/.cd, symbC=multi/main/transportation},
   main/unmanned systems/.style={/MilSymb/.cd, symbC=multi/main/unmanned systems},
   main/video imagery/.style={/MilSymb/.cd, symbC=land/main/video imagery},
   main/water/.style={/MilSymb/.cd, symbC=multi/main/water},
   main/water purification/.style={/MilSymb/.cd, symbC=multi/main/water purification},
   main/civilian police/.style={/MilSymb/.cd, symbC=land/main/civilian police},
   main/environmental protection/.style={/MilSymb/.cd, symbC=land/main/environmental protection},
   main/government organization/.style={/MilSymb/.cd, symbC=main/text, symbCT=GO},
   main/internal security force/.style={/MilSymb/.cd, symbC=main/text, symbCT=ISF},
   main/individual/.style={/MilSymb/.cd, symbC=multi/main/individual},
   main/organisation or group/.style={/MilSymb/.cd, symbC=land/main/organisation or group},
   main/killing victim/.style={/MilSymb/.cd, symbC=multi/main/killing victim},
   main/killing victims/.style={/MilSymb/.cd, symbC=land/main/killing victims},
   main/victim of an attempted crime/.style={/MilSymb/.cd, symbC=multi/main/victim of an attempted crime},
   main/spy/.style={/MilSymb/.cd, symbC=main/text, symbCT=SPY},
   upper/.is choice,
   upper/none/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=},
   upper/air assault/.style= {/MilSymb/.cd, symbU=land/upper/air assault},
   upper/area/.style= {/MilSymb/.cd, symbU=main/textsmallsquashed, symbUT=AREA},
   upper/attack/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=A},
   upper/biological/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=B},
   upper/border/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=BOR},
   upper/bridging/.style= {/MilSymb/.cd, symbU=land/upper/bridging},
   upper/chemical/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=C},
   upper/close protection/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=CLP},
   upper/combat/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=CBT},
   upper/command and control/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=C2},
   upper/communications contingency package/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=CCP},
   upper/construction/.style= {/MilSymb/.cd, symbU=main/textsmallsquashed, symbUT=CONST},
   upper/cross cultural communication/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=CCC},
   upper/crowd and riot control/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=CRC},
   upper/decontamination/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=D},
   upper/detention/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=DET},
   upper/direct communications/.style= {/MilSymb/.cd, symbU=land/upper/direct communications},
   upper/diving/.style= {/MilSymb/.cd, symbU=land/upper/diving},
   upper/division/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=XX},
   upper/dog/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=DOG},
   upper/drilling/.style= {/MilSymb/.cd, symbU=land/upper/drilling},
   upper/electro optical/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=EO},
   upper/enhanced/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=ENH},
   upper/explosive ordnance disposal/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=EOD},
   upper/fire direction centre/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=FDC},
   upper/force/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=F},
   upper/forward/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=FWD},
   upper/ground station module/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=GSM},
   upper/landing support/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=LS},
   upper/large extension node/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=LEN},
   upper/maintenance/.style= {/MilSymb/.cd, symbU=multi/upperlower/maintenance},
   upper/meteorological/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=MET},
   upper/mine countermeasure/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=MCM},
   upper/missile/.style= {/MilSymb/.cd, symbU=land/upper/missile},
   upper/mobile advisor and support/.style= {/MilSymb/.cd, symbU=land/upper/mobile advisor and support},
   upper/mobile subscriber equipment/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=MSE},
   upper/mobility support/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=MS},
   upper/movement control centre/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=MCC},
   upper/multinational/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=MN},
   upper/multinational specialized unit/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=MSU},
   upper/multiple rocket launcher/.style= {/MilSymb/.cd, symbU=land/upper/multiple rocket launcher},
   upper/Mil medical role 1/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=\ \ \ \ 1},
   upper/Mil medical role 2/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=\ \ \ \ 2},
   upper/Mil medical role 3/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=\ \ \ \ 3},
   upper/Mil medical role 4/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=\ \ \ \ 4},
   upper/naval/.style= {/MilSymb/.cd, symbU=multi/upper/naval},
   upper/node centre/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=NC},
   upper/nuclear/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=N},
   upper/operations/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=OPS},
   upper/radar/.style= {/MilSymb/.cd, symbU=land/upper/radar},
   upper/radiological/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=RAD},
   upper/runway/.style= {/MilSymb/.cd, symbU=multi/upper/runway},
   upper/search and rescue/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=SAR},
   upper/security/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=SEC},
   upper/sensor/.style= {/MilSymb/.cd, symbU=land/upper/sensor},
   upper/sensor control module/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=SCM},
   upper/signals intelligence/.style= {/MilSymb/.cd, symbU=land/upper/signals intelligence},
   upper/single shelter switch/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=SSS},
   upper/single rocket launcher/.style= {/MilSymb/.cd, symbU=land/upper/single rocket launcher},
   upper/smoke/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=S},
   upper/sniper/.style= {/MilSymb/.cd, symbU=land/upper/sniper},
   upper/sound ranging/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=SDR},
   upper/special weapons and tactics/.style= {/MilSymb/.cd, symbU=main/textsmallsquashed, symbUT=SWAT},
   upper/survey/.style= {/MilSymb/.cd, symbU=land/upper/survey},
   upper/tactical exploitation/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=TE},
   upper/target acquisition/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=TA},
   upper/topographic/.style= {/MilSymb/.cd, symbU=land/upper/topographic},
   upper/utility/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=U},
   upper/video imagery/.style= {/MilSymb/.cd, symbU=land/upper/video imagery},
   upper/assassination/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=AS},
   upper/execution/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=EX},
   upper/murder victims/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=MU},
   upper/hijacking/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=H},
   upper/kidnapping/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=K},
   upper/piracy/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=PI},
   upper/rape/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=RA},
   upper/displaced persons refugees and evacuees/.style= {/MilSymb/.cd, symbU=main/textsmallsquashed, symbUT=DPRE},
   upper/foreign fighters/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=FF},
   upper/gang member or gang/.style= {/MilSymb/.cd, symbU=main/textsmallsquashed, symbUT=GANG},
   upper/government organisation/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=GO},
   upper/leader or leadership/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=LDR},
   upper/non-governmental organization member or non-governmental organization/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=NGO},
   upper/coerced or impressed recruit/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=C},
   upper/willing recruit/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=W},
   upper/religious or religious organisation/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=REL},
   upper/targeted individual or organisation/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=TGT},
   upper/terrorist or terrorist organisation/.style= {/MilSymb/.cd, symbU=main/textsmall, symbUT=TER},
   lower/.is choice,
   lower/none/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=},
   lower/airbourne/.style= {/MilSymb/.cd, symbL=land/lower/airborne},
   lower/arctic/.style= {/MilSymb/.cd, symbL=land/lower/arctic},
   lower/battle damage repair/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=BDR},
   lower/bicycle equipped/.style= {/MilSymb/.cd, symbL=land/lower/bicycle equipped},
   lower/clearing/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=CLR},
   lower/close range/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=CR},
   lower/decontamination/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=D},
   lower/demolition/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=DEM},
   lower/dental/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=\ \ \ \  D},
   lower/digital/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=DIG},
   lower/enhanced location reporting system/.style= {/MilSymb/.cd, symbL=land/lower/enhanced position location reporting system},
   lower/equipment/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=E},
   lower/heavy/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=H},
   lower/intermodal/.style= {/MilSymb/.cd, symbL=land/lower/intermodal},
   lower/intensive care/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=\ \ \ \ IC},
   lower/light/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=L},
   lower/laboratory/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=LAB},
   lower/launcher/.style= {/MilSymb/.cd, symbL=land/lower/launcher},
   lower/long range/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=LR},
   lower/medium range/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=MR},
   lower/mountain/.style={/MilSymb/.cd, symbL=land/lower/mountain/\MilSymb@selectedfaction},
   lower/multi channel/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=MC},
   lower/optical/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=OPT},
   lower/pack animal/.style= {/MilSymb/.cd, symbL=multi/lower/pack animal},
   lower/patient evacuation coordination/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=PEC},
   lower/preventative maintenance/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=PM},
   lower/psychological/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=P},
   lower/radio relay line of sight/.style= {/MilSymb/.cd, symbL=land/lower/radio relay line of sight},
   lower/railroad/.style= {/MilSymb/.cd, symbL=multi/upperlower/railroad},
   lower/recovery unmanned systems/.style= {/MilSymb/.cd, symbL=land/lower/recovery unmanned systems},
   lower/recovery maintenance/.style= {/MilSymb/.cd, symbL=multi/upperlower/maintenance},
   lower/rescue coordination centre/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=RCC},
   lower/riverine/.style= {/MilSymb/.cd, symbL=land/lower/riverine},
   lower/single channel/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=SC},
   lower/ski/.style= {/MilSymb/.cd, symbL=land/lower/ski},
   lower/short range/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=SR},
   lower/strategic/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=STR},
   lower/support/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=SPT},
   lower/tactical/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=TAC},
   lower/towed/.style= {/MilSymb/.cd, symbL=land/lower/towed},
   lower/troop/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=T},
   lower/vertical of short takeoff and landing/.style= {/MilSymb/.cd, symbL=main/textsmallsquashed, symbLT=VSTOL},
   lower/veterinary/.style= {/MilSymb/.cd, symbL=main/textsmall, symbLT=\ \ \ \ V},
   lower/wheeled/.style= {/MilSymb/.cd, symbL=land/lower/wheeled},
   symbE/.store in= \MilSymb@symbE,
   symbR/.store in= \MilSymb@symbR,
   echelon/.is choice,
   echelon/none/.style= {/MilSymb/.cd, symbE=},
   echelon/team/.style= {/MilSymb/.cd, symbE=$\varnothing$},
   echelon/squad/.style= {/MilSymb/.cd, symbE=\textbullet},
   echelon/section/.style= {/MilSymb/.cd, symbE=\textbullet \  \textbullet},
   echelon/platoon/.style= {/MilSymb/.cd, symbE=\textbullet \  \textbullet \  \textbullet},
   echelon/company/.style= {/MilSymb/.cd, symbE=\textbar},
   echelon/battalion/.style= {/MilSymb/.cd, symbE=\textbar \  \textbar},
   echelon/regiment/.style= {/MilSymb/.cd, symbE=\textbar \  \textbar \  \textbar},
   echelon/brigade/.style= {/MilSymb/.cd, symbE=X},
   echelon/division/.style= {/MilSymb/.cd, symbE=XX},
   echelon/corps/.style= {/MilSymb/.cd, symbE=XXX},
   echelon/army/.style= {/MilSymb/.cd, symbE=XXXX},
   echelon/army group/.style= {/MilSymb/.cd, symbE=XXXXX},
   echelon/theatre/.style= {/MilSymb/.cd, symbE=XXXXXX},
   echelon/command/.style= {/MilSymb/.cd, symbE=\raisebox{1pt}{+ \ +}},
   task force/.is if=taskforce,
   feint or dummy/.is if=feintdummy,
   drawH/.store in= \MilSymb@drawH,
   symbHT/.store in= \MilSymb@symbHT,
   headquarters/.is choice,
   headquarters/none/.style= {/MilSymb/.cd, drawH=false, symbHT=},
   headquarters/blank/.style= {/MilSymb/.cd, drawH=true, symbHT=},
   headquarters/assault command post/.style= {/MilSymb/.cd,  drawH=true, symbHT=ASLT},
   headquarters/command group/.style= {/MilSymb/.cd,  drawH=true, symbHT=CMD},
   headquarters/forward command post/.style= {/MilSymb/.cd,  drawH=true, symbHT=FWD},
   headquarters/main command post/.style= {/MilSymb/.cd,  drawH=true, symbHT=MAIN},
   headquarters/rear command post/.style= {/MilSymb/.cd,  drawH=true, symbHT=REAR},
   headquarters/tactical operations center/.style= {/MilSymb/.cd,  drawH=true, symbHT=TOC},
   headquarters/tactical command post/.style= {/MilSymb/.cd,  drawH=true, symbHT=TAC},
   status/.is choice,
   status/none/.style= {/MilSymb/.cd, symbR=},
   status/reinforced/.style= {/MilSymb/.cd, symbR=+ \ },
   status/reduced/.style= {/MilSymb/.cd, symbR=\textminus \ },
   status/reinforced and reduced/.style= {/MilSymb/.cd, symbR=\ooalign{\raisebox{2pt}{+}\cr\smash{\raisebox{-2pt}{\textminus}}\cr} \ },
   altitude/.style 2 args={/MilSymb/.cd, symbL=main/textsmall, symbLT={\fontsize{6}{0}\selectfont \ifthenelse{\isempty{##2}}{\acs{##1}}{\acs{##1S}/\acs{##2}}}},
   altitude/.value required,
   supply/.style 2 args={/MilSymb/.cd, symbC={\ifx\\##2\\supply/class ##1\else supply/text\fi}, symbCT={\ifthenelse{\isempty{##2}}{}{\uppercase\expandafter{\romannumeral##1\relax}\&\uppercase\expandafter{\romannumeral##2\relax}}}},
   supply/.value required,
   staff comments/.store in=\MilSymb@symbG,
   additional information/.store in=\MilSymb@symbH,
   higher formation/.store in=\MilSymb@symbM,
   evaluation rating/.store in=\MilSymb@symbJ,
   country indicator/.store in=\MilSymb@symbAC,
   combat effectiveness/.store in=\MilSymb@symbK,
   identification/.store in=\MilSymb@symbP,
   unique designation/.store in=\MilSymb@symbT,
   type of equipment/.store in=\MilSymb@symbV,
   date-time group/.store in=\MilSymb@symbW,
   altitude value/.store in=\MilSymb@symbX,
   location/.store in=\MilSymb@symbY,
   common identifier/.store in=\MilSymb@symbAF,
   speed/.store in=\MilSymb@symbZ,
   offset/.code 2 args={\begin{scope}[shift={(#2)}]\ifthenelse{\equal{\MilSymb@drawH}{true}\AND \equal{\MilSymb@selectedfaction}{friendly}}{\draw (-0.75, -0.75) -- +($(0, -##1) - (0, -0.75)$) -- +(##2);}{\draw (0,0)  -- +(0, -##1) -- +(##2);}\end{scope}},
   offset/.value required,
   movement/.code 2 args={\begin{scope}[shift={(#2)}]\ifthenelse{\equal{\MilSymb@drawH}{true}\AND \equal{\MilSymb@selectedfaction}{friendly}}{ \draw [-{Stealth[inset=0pt,scale=1]}] (-0.75, -0.75) -- +($(0, -##1) - (0, -0.75)$) -- +(##2);}{\draw [-{Stealth[inset=0pt,scale=1]}] (0,0)  -- +(0, -##1) -- +(##2);}\end{scope}},
   movement/.value required,
   faction=friendly,
   main=none,
   upper=none,
   lower=none,
   echelon=none,
   status=none,
   headquarters=none,
   country indicator=,
   staff comments=,
   additional information=,
   higher formation=,
   evaluation rating=,
   combat effectiveness=,
   identification=,
   unique designation=,
   type of equipment=,
   date-time group=,
   altitude value=,
   location=,
   common identifier=,
   speed=,
   task force=false,
   feint or dummy=false,
  #1,
} %
\begin{scope}[shift={(#2)}, local bounding box=#3]
\fontfamily{phv}\fontseries{bx}\selectfont
\pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
\pic {MilSymb \MilSymb@symbC={\MilSymb@symbCT}}; %Draw main symbol
\pic at (0,0.34) {MilSymb \MilSymb@symbU={\MilSymb@symbUT}}; %Draw upper symbol
\pic at (0,-0.34) {MilSymb \MilSymb@symbL={\MilSymb@symbLT}}; %Draw lower symbol
\fontsize{6}{0}\selectfont
\ifthenelse{\isequivalentto{\MilSymb@symbE}{\empty}}{}{\node [anchor=south, local bounding box=E] at ($(M.north)-(0,0.04)$) {\MilSymb@symbE};} %Draw echelon
\iftaskforce
\draw ($(E.south west)+(0,0.03)$) -- (E.north west) -- (E.north east) -- ($(E.south east)+(0,0.03)$);
\fi
\iffeintdummy
\draw [dashed] (M.north west) -- ($(M.north)+(0, 0.5)$) -- (M.north east);
\fi
\ifthenelse{\isequivalentto{\MilSymb@symbAC}{\empty} \AND \isequivalentto{\MilSymb@symbR}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\fontsize{8}{0}\selectfont \MilSymb@symbR \fontsize{6}{0}\selectfont \MilSymb@symbAC};} %Draw status
\ifthenelse{\equal{\MilSymb@drawH}{true} \AND \equal{\MilSymb@selectedfaction}{friendly}}{
\draw (-0.75, -0.5) -- +(0, -0.25);
\fontsize{6}{0}\selectfont
\node [anchor=north] at (M.south) {\MilSymb@symbHT};}{}
\fontsize{6}{0}\selectfont
\ifthenelse{\isequivalentto{\MilSymb@symbG}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbG};}
\ifthenelse{\isequivalentto{\MilSymb@symbH}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbH};}
\ifthenelse{\isequivalentto{\MilSymb@symbM}{\empty}}{}{\node [anchor=west] at ($(M.north east)!0.83!(M.south east)$) {\MilSymb@symbM};}
\ifthenelse{\isequivalentto{\MilSymb@symbJ}{\empty} \AND \isequivalentto{\MilSymb@symbK}{\empty} \AND \isequivalentto{\MilSymb@symbP}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbJ\MilSymb@symbK\MilSymb@symbP};}
\ifthenelse{\isequivalentto{\MilSymb@symbW}{\empty}}{}{\node [anchor=east] at ($(M.north west)!-0.17!(M.south west)$) {\MilSymb@symbW};}
\ifthenelse{\isequivalentto{\MilSymb@symbX}{\empty} \AND \isequivalentto{\MilSymb@symbY}{\empty}}{}{\node [anchor=east] at ($(M.north west)!.17!(M.south west)$) {\MilSymb@symbX\MilSymb@symbY};}
\ifthenelse{\isequivalentto{\MilSymb@symbV}{\empty} \AND \isequivalentto{\MilSymb@symbAF}{\empty}}{}{\node [anchor=east] at (M.west) {\MilSymb@symbV\MilSymb@symbAF};}
\ifthenelse{\isequivalentto{\MilSymb@symbT}{\empty}}{}{\node [anchor=east] at ($(M.north west)!0.83!(M.south west)$) {\MilSymb@symbT};}
\ifthenelse{\isequivalentto{\MilSymb@symbZ}{\empty}}{}{\node [anchor=east] at ($(M.north west)!1.17!(M.south west)$) {\MilSymb@symbZ};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\newcounter{exitem}
\newlength{\itemlength}
\NewDocumentEnvironment{landheadquarters}{D(){0,0}}{
\setlength{\itemlength}{0pt}
\begin{scope}[shift={(#1)}]
\setcounter{exitem}{0}
\RenewDocumentCommand\item{m}{
\scoped[yshift=-\itemlength, local bounding box=T]
##1;
\ifnum \value{exitem}>0
\pgfmathtruncatemacro\result{\value{exitem}-1}
\draw ($(M.south west) + (0, -0.25)$) -- (F\result);
\fi
\coordinate (F\arabic{exitem}) at (M.north west);
\pgfpointdiff{\pgfpointanchor{T}{north west}}{\pgfpointanchor{T}{south west}}
\addtolength{\itemlength}{\pgf@y-5pt}
\stepcounter{exitem}}
}{\end{scope}}
\NewDocumentEnvironment{landgroup}{D(){0,0}}{
\setlength{\itemlength}{0pt}
\begin{scope}[local bounding box=G, shift={(#1)}]
\RenewDocumentCommand\item{m}{
\scoped[yshift=-\itemlength, local bounding box=T]
##1;
\pgfpointdiff{\pgfpointanchor{T}{north west}}{\pgfpointanchor{T}{south west}}
\addtolength{\itemlength}{\pgf@y-5pt}}
}{
\draw ([shift={(5pt,3pt)}]G.north west) -| ([shift={(-3pt,-3pt)}]G.south west) -- ++(8pt,0)
 (G.west) -- ++(-5pt,0);
\end{scope}}
\NewDocumentCommand\MilEquipment{ o D(){0,0} d() g}{
\tikzset{%
   /MilSymb/.cd,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=equipment/none, fill=white},
   faction/friendly/.style={/MilSymb/.cd, shape=equipment/friendly, fill=friendlyA},
   faction/hostile/.style={/MilSymb/.cd, shape=equipment/hostile, fill=hostileA},
   faction/neutral/.style={/MilSymb/.cd, shape=equipment/neutral, fill=neutralA},
   faction/unknown/.style={/MilSymb/.cd, shape=equipment/unknown, fill=unknownA},
   main/.is choice,
   main/none/.style={/MilSymb/.cd, symbC=main/textsmall, symbCT=}, 
   main/rifle/.style= {/MilSymb/.cd, symbC=equipment/main/rifle},
   main/single shot rifle/.style= {/MilSymb/.cd, symbC=equipment/main/single shot rifle},
   main/semi automatic rifle/.style= {/MilSymb/.cd, symbC=equipment/main/semi automatic rifle},
   main/automatic rifle/.style= {/MilSymb/.cd, symbC=equipment/main/automatic rifle},
   main/machine gun/.style= {/MilSymb/.cd, symbC=equipment/main/machine gun},
   main/heavy machine gun/.style= {/MilSymb/.cd, symbC=equipment/main/heavy machine gun},
   main/grenade launcher/.style= {/MilSymb/.cd, symbC=equipment/main/grenade launcher},
   main/light grenade launcher/.style= {/MilSymb/.cd, symbC=equipment/main/light grenade launcher},
   main/medium grenade launcher/.style= {/MilSymb/.cd, symbC=equipment/main/medium grenade launcher},
   main/heavy grenade launcher/.style= {/MilSymb/.cd, symbC=equipment/main/heavy grenade launcher},
   main/flame thrower/.style= {/MilSymb/.cd, symbC=equipment/main/flame thrower},
   main/air defence gun/.style= {/MilSymb/.cd, symbC=equipment/main/air defence gun},
   main/anti tank gun/.style= {/MilSymb/.cd, symbC=equipment/main/anti tank gun},
   main/direct fire gun/.style= {/MilSymb/.cd, symbC=equipment/main/direct fire gun},
   main/recoilless gun/.style= {/MilSymb/.cd, symbC=equipment/main/recoilless gun},
   main/howitzer/.style= {/MilSymb/.cd, symbC=equipment/main/howitzer},
   main/missile launcher/.style= {/MilSymb/.cd, symbC=equipment/main/missile launcher},
   main/air defence missile launcher/.style= {/MilSymb/.cd, symbC=equipment/main/air defence missile launcher},
   main/anti tank missile launcher/.style= {/MilSymb/.cd, symbC=equipment/main/anti tank missile launcher},
   main/surface to surface missile launcher/.style= {/MilSymb/.cd, symbC=equipment/main/surface to surface missile launcher},
   main/mortar/.style= {/MilSymb/.cd, symbC=equipment/main/mortar},
   main/single rocket launcher/.style= {/MilSymb/.cd, symbC=equipment/main/single rocket launcher},
   main/multiple rocket launcher/.style= {/MilSymb/.cd, symbC=equipment/main/multiple rocket launcher},
   main/anti tank rocket launcher/.style= {/MilSymb/.cd, symbC=equipment/main/anti tank rocket launcher},
   main/non lethal weapon/.style= {/MilSymb/.cd, symbC=equipment/main/non lethal weapon},
   main/non lethal grenade launcher/.style= {/MilSymb/.cd, symbC=equipment/main/non lethal grenade launcher},
   main/taser/.style= {/MilSymb/.cd, symbC=equipment/main/taser},
   main/water cannon/.style= {/MilSymb/.cd, symbC=equipment/main/water cannon},
   main/armoured fighting vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/armoured fighting vehicle},
   main/armoured fighting vehicle command and control/.style= {/MilSymb/.cd, symbC=equipment/main/armoured fighting vehicle command and control},
   main/armoured personnel carrier/.style= {/MilSymb/.cd, symbC=equipment/main/armoured personnel carrier},
   main/armoured medical personnel carrier/.style= {/MilSymb/.cd, symbC=equipment/main/armoured medical personnel carrier},
   main/armoured protected vehicle/.style= {/MilSymb/.cd, symbC=multi/main/armoured},
   main/armoured protected recovery vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/armoured protected recovery vehicle},
   main/medical evacuation armoured protected vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/medical evacuation armoured protected vehicle},
   main/tank/.style= {/MilSymb/.cd, symbC=equipment/main/tank},
   main/light tank/.style= {/MilSymb/.cd, symbC=equipment/main/light tank},
   main/medium tank/.style= {/MilSymb/.cd, symbC=equipment/main/medium tank},
   main/heavy tank/.style= {/MilSymb/.cd, symbC=equipment/main/heavy tank},
   main/tank recovery vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/tank recovery vehicle},
   main/bridge/.style= {/MilSymb/.cd, symbC=multi/main/bridge},
   main/bridge mounted on utility vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/bridge mounted on utility vehicle},
   main/fixed bridge/.style= {/MilSymb/.cd, symbC=equipment/main/fixed bridge},
   main/folding girder bridge/.style= {/MilSymb/.cd, symbC=equipment/main/folding girder bridge},
   main/hollow deck bridge/.style= {/MilSymb/.cd, symbC=equipment/main/hollow deck bridge},
   main/drill/.style= {/MilSymb/.cd, symbC=multi/main/drill},
   main/drill mounted on vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/drill mounted on vehicle},
   main/earthmover/.style= {/MilSymb/.cd, symbC=equipment/main/earthmover},
   main/multifunctional earthmover/.style= {/MilSymb/.cd, symbC=equipment/main/multifunctional earthmover},
   main/mine clearing equipment/.style= {/MilSymb/.cd, symbC=equipment/main/mine clearing equipment},
   main/mine laying equipment/.style= {/MilSymb/.cd, symbC=equipment/main/mine laying equipment},
   main/utility vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/utility vehicle},
   main/medical vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/medical vehicle},
   main/medical evacuation/.style= {/MilSymb/.cd, symbC=equipment/main/medical evacuation},
   main/mobile emergency physician/.style= {/MilSymb/.cd, symbC=equipment/main/mobile emergency physician},
   main/bus/.style= {/MilSymb/.cd, symbC=equipment/main/bus},
   main/semi trailer truck/.style= {/MilSymb/.cd, symbC=equipment/main/semi trailer truck},
   main/petroleum oil and lubricants vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/petroleum oil and lubricants vehicle},
   main/water vehicle/.style= {/MilSymb/.cd, symbC=equipment/main/water vehicle},
   main/train locomotive/.style= {/MilSymb/.cd, symbC=equipment/main/train locomotive},
   main/chemical biological radiological nuclear equipment/.style= {/MilSymb/.cd, symbC=multi/main/chemical biological radiological nuclear},
   main/computer system/.style= {/MilSymb/.cd, symbC=equipment/main/computer system},
   main/laser/.style= {/MilSymb/.cd, symbC=equipment/main/laser},
   main/land mine/.style= {/MilSymb/.cd, symbC=equipment/main/land mine},
   main/antipersonnel land mine/.style= {/MilSymb/.cd, symbC=equipment/main/antipersonnel land mine},
   main/antitank land mine/.style= {/MilSymb/.cd, symbC=equipment/main/antitank land mine},
   main/improvised explosive device/.style= {/MilSymb/.cd, symbC=main/text, symbCT=IED},
   main/sensor/.style= {/MilSymb/.cd, symbC= equipment/main/sensor},
   main/sensor emplaced/.style= {/MilSymb/.cd, symbC=equipment/main/sensor emplaced},
   main/radar/.style= {/MilSymb/.cd, symbC=multi/main/radar},
   main/antennae/.style= {/MilSymb/.cd, symbC=multi/main/antenna},
   main/generator set/.style= {/MilSymb/.cd, symbC=main/text, symbCT=G},
   main/psychological operations equipment/.style= {/MilSymb/.cd, symbC=multi/main/psychological operations},
   main/bomb/.style= {/MilSymb/.cd, symbC=main/textsquashed, symbCT=BOMB},
   main/booby trap/.style= {/MilSymb/.cd, symbC=equipment/main/booby trap},
   mobility/.is choice,
   mobility/none/.style= {/MilSymb/.cd, symbL=, symbLT=},
   mobility/amphibious/.style= {/MilSymb/.cd, symbL=equipment/mobility/amphibious},
   mobility/barge/.style= {/MilSymb/.cd, symbL=equipment/mobility/barge},
   mobility/over snow/.style= {/MilSymb/.cd, symbL=equipment/mobility/over snow},
   mobility/pack animal/.style= {/MilSymb/.cd, symbL=equipment/mobility/pack animal},
   mobility/railroad/.style= {/MilSymb/.cd, symbL=equipment/mobility/railroad},
   mobility/sled/.style= {/MilSymb/.cd, symbL=equipment/mobility/sled},
   mobility/towed/.style= {/MilSymb/.cd, symbL=equipment/mobility/towed},
   mobility/tracked/.style= {/MilSymb/.cd, symbL=equipment/mobility/tracked},
   mobility/wheeled cross country/.style= {/MilSymb/.cd, symbL=equipment/mobility/wheeled cross country},
   mobility/wheeled limited mobility/.style= {/MilSymb/.cd, symbL=equipment/mobility/wheeled limited mobility},
   mobility/wheeled semi trailer/.style= {/MilSymb/.cd, symbL=equipment/mobility/wheeled semi trailer},
   mobility/wheeled and tracked/.style= {/MilSymb/.cd, symbL=equipment/mobility/wheeled and tracked},
   offset/.code 2 args={\begin{scope}[shift={(#2)}]\draw (0,0)  -- +(0, -##1) -- +(##2);\end{scope}},
   offset/.value required,
   movement/.code 2 args={\begin{scope}[shift={(#2)}]\draw [-{Stealth[inset=0pt,scale=1]}] (0,0)  -- +(0, -##1) -- +(##2);\end{scope}},
   movement/.value required,
   feint or dummy/.is if=feintdummy,
   quantity/.store in=\MilSymb@symbQ,
   staff comments/.store in=\MilSymb@symbG,
   additional information/.store in=\MilSymb@symbH,
   evaluation rating/.store in=\MilSymb@symbJ,
   combat effectiveness/.store in=\MilSymb@symbK,
   signature equipment/.store in=\MilSymb@symbSE,
   higher formation/.store in=\MilSymb@symbM,
   identification/.store in=\MilSymb@symbP,
   unique designation/.store in=\MilSymb@symbT,
   type of equipment/.store in=\MilSymb@symbV,
   date-time group/.store in=\MilSymb@symbW,
   altitude value/.store in=\MilSymb@symbX,
   location/.store in=\MilSymb@symbY,
   country indicator/.store in=\MilSymb@symbAC,
   platform type/.store in=\MilSymb@symbAD,
   equipment teardown time/.store in=\MilSymb@symbAE,
   common identifier/.store in=\MilSymb@symbAF,
   speed/.store in=\MilSymb@symbZ,
   faction=none,
   main=none,
   mobility=none,
   quantity=,
   staff comments=,
   additional information=,
   evaluation rating=,
   higher formation=,
   evaluation rating=,
   combat effectiveness=,
   signature equipment=,
   identification=,
   unique designation=,
   type of equipment=,
   date-time group=,
   altitude value=,
   location=,
   country indicator=,
   platform type=,
   equipment teardown time=,
   common identifier=,
   speed=,
   feint or dummy=false,
   #1,
}%
\begin{scope}[shift={(#2)}, local bounding box=#3]
\fontfamily{phv}\fontseries{bx}\selectfont
\begin{scope} [local bounding box=Q]
\pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
\pic {MilSymb \MilSymb@symbC={\MilSymb@symbCT}}; %Draw main symbol
\ifthenelse{\isequivalentto{\MilSymb@symbL}{\empty}}{}{\pic at ($(M.south) + (0, -0.1)$) {MilSymb \MilSymb@symbL};} %Draw mobility
\end{scope}
\iffeintdummy
\draw [dashed] (M.north west) -- ($(M.north)+(0, 0.5)$) -- (M.north east);
\fi
\fontsize{6}{0}\selectfont
\ifthenelse{\isequivalentto{\MilSymb@symbQ}{\empty}}{}{\node [anchor=south] at ($(M.north) + (0, 0.02)$) {\MilSymb@symbQ};}
\ifthenelse{\isequivalentto{\MilSymb@symbAC}{\empty}}{}{\node [anchor=west] at ({Q.east} |- {$(M.north east)!-0.17!(M.south east)$}) {\MilSymb@symbAC};}
\ifthenelse{\isequivalentto{\MilSymb@symbG}{\empty}}{}{\node [anchor=west] at ({Q.east} |- {$(M.north east)!.17!(M.south east)$}) {\MilSymb@symbG};}
\ifthenelse{\isequivalentto{\MilSymb@symbH}{\empty} \AND \isequivalentto{\MilSymb@symbAE}{\empty}}{}{\node [anchor=west] at (Q.east |- M.east) {\MilSymb@symbH\MilSymb@symbAE};}
\ifthenelse{\isequivalentto{\MilSymb@symbM}{\empty}}{}{\node [anchor=west] at ({Q.east} |- {$(M.north east)!0.83!(M.south east)$}) {\MilSymb@symbM};}
\ifthenelse{\isequivalentto{\MilSymb@symbJ}{\empty} \AND \isequivalentto{\MilSymb@symbK}{\empty} \AND \isequivalentto{\MilSymb@symbSE}{\empty} \AND \isequivalentto{\MilSymb@symbP}{\empty}}{}{\node [anchor=west] at ({Q.east} |- {$(M.north east)!1.17!(M.south east)$}) {\MilSymb@symbJ\MilSymb@symbK\MilSymb@symbSE\MilSymb@symbP};}
\ifthenelse{\isequivalentto{\MilSymb@symbW}{\empty}}{}{\node [anchor=east] at ({Q.west} |- {$(M.north west)!-0.17!(M.south west)$}) {\MilSymb@symbW};}
\ifthenelse{\isequivalentto{\MilSymb@symbX}{\empty} \AND \isequivalentto{\MilSymb@symbY}{\empty}}{}{\node [anchor=east] at ({Q.west} |- {$(M.north west)!.17!(M.south west)$}) {\MilSymb@symbX\MilSymb@symbY};}
\ifthenelse{\isequivalentto{\MilSymb@symbV}{\empty} \AND \isequivalentto{\MilSymb@symbAD}{\empty} \AND \isequivalentto{\MilSymb@symbAF}{\empty}}{}{\node [anchor=east] at (Q.west |- M.west) {\MilSymb@symbV\MilSymb@symbAD\MilSymb@symbAF};}
\ifthenelse{\isequivalentto{\MilSymb@symbT}{\empty}}{}{\node [anchor=east] at ({Q.west} |- {$(M.north west)!0.83!(M.south west)$}) {\MilSymb@symbT};}
\ifthenelse{\isequivalentto{\MilSymb@symbZ}{\empty}}{}{\node [anchor=east] at ({Q.west} |- {$(M.north west)!1.17!(M.south west)$}) {\MilSymb@symbZ};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\newif\ifheadquarters
\NewDocumentCommand\MilInstallation{ o D(){0,0} d() g}{
\tikzset{%
   /MilSymb/.cd,
   selectedfaction/.store in=\MilSymb@selectedfaction,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=installation/none, fill=white, selectedfaction=neutral},
   faction/friendly/.style={/MilSymb/.cd, shape=installation/friendly, fill=friendlyA, selectedfaction=friendly},
   faction/hostile/.style={/MilSymb/.cd, shape=installation/hostile, fill=hostileA, selectedfaction=hostile},
   faction/neutral/.style={/MilSymb/.cd, shape=installation/neutral, fill=neutralA, selectedfaction=neutral},
   faction/unknown/.style={/MilSymb/.cd, shape=installation/unknown, fill=unknownA, selectedfaction=unknown},
   main/.is choice,
   main/none/.style={/MilSymb/.cd, symbC=main/textsmall, symbCT=},
   main/transportation/.style={/MilSymb/.cd, symbC=multi/main/transportation},
   main/ammunition cache/.style={/MilSymb/.cd, symbC=supply/class 5},
   main/black list location/.style={/MilSymb/.cd, symbC=main/text, symbCT=BLK},
   main/broadcast transmitter antenna/.style={/MilSymb/.cd, symbC=multi/main/antenna},
   main/chemical biological radiological nuclear/.style={/MilSymb/.cd, symbC=multi/main/chemical biological radiological nuclear},
   main/electric power/.style={/MilSymb/.cd, symbC=installation/main/electric power},
   main/food distribution/.style={/MilSymb/.cd, symbC=supply/class US 1},
   main/grey list location/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=GRAY},
   main/mass grave site/.style={/MilSymb/.cd, symbC=installation/main/mass grave site},
   main/medical/.style={/MilSymb/.cd, symbC=multi/main/medical},
   main/medical treatment facility/.style={/MilSymb/.cd, symbC=multi/main/medical treatment facility},
   main/mine/.style={/MilSymb/.cd, symbC=installation/main/mine},
   main/nuclear/.style={/MilSymb/.cd, symbC=installation/main/nuclear},
   main/printed media/.style={/MilSymb/.cd, symbC=installation/main/printed media},
   main/transportation/.style={/MilSymb/.cd, symbC=multi/main/transportation},
   main/naval/.style={/MilSymb/.cd, symbC=multi/main/naval},
   main/safe house/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=SAFE},
   main/civilian telecommunications/.style={/MilSymb/.cd, symbC=installation/main/civilian telecommunications},
   main/water/.style={/MilSymb/.cd, symbC=multi/main/water},
   main/water treatment/.style={/MilSymb/.cd, symbC=multi/main/water purification},
   main/white list location/.style={/MilSymb/.cd, symbC=main/text, symbCT=WHT},
   upper/.is choice,
   upper/none/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=},
   upper/nuclear energy/.style={/MilSymb/.cd, symbU=installation/upper/nuclear},
   upper/railroad/.style={/MilSymb/.cd, symbU=installation/upper/railroad},
   upper/yard/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=YRD},
   upper/biological/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=B},
   upper/chemical/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=C},
   upper/nuclear/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=N},
   upper/coal/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=CO},
   upper/geothermal/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=GT},
   upper/hydroelectric/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=HY},
   upper/natural gas/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=NG},
   upper/petroleum/.style= {/MilSymb/.cd, symbU=installation/upper/petroleum oil and lubricants},
   upper/radio/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=R},
   upper/telephone/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=T},
   upper/television/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=TV},
   offset/.code 2 args={\begin{scope}[shift={(#2)}]\ifheadquarters\ifthenelse{\equal{\MilSymb@selectedfaction}{friendly}}{\draw (-0.75, -0.75) -- +($(0, -##1) - (0, -0.75)$) -- +(##2);}{\draw (0,0)  -- +(0, -##1) -- +(##2);}\end{scope}\fi},
   offset/.value required,
   movement/.code 2 args={\begin{scope}[shift={(#2)}]\ifheadquarters\ifthenelse{\equal{\MilSymb@selectedfaction}{friendly}}{ \draw [-{Stealth[inset=0pt,scale=1]}] (-0.75, -0.75) -- +($(0, -##1) - (0, -0.75)$) -- +(##2);}{\draw [-{Stealth[inset=0pt,scale=1]}] (0,0)  -- +(0, -##1) -- +(##2);}\end{scope}\fi},
   movement/.value required,
   feint or dummy/.is if=feintdummy,
   headquarters/.is if=headquarters,
   faction=none,
   main=none,
   upper=none,
   staff comments/.store in=\MilSymb@symbG,
   additional information/.store in=\MilSymb@symbH,
   higher formation/.store in=\MilSymb@symbM,
   evaluation rating/.store in=\MilSymb@symbJ,
   country indicator/.store in=\MilSymb@symbAC,
   capacity of installation/.store in=\MilSymb@symbK,
   installation composition/.store in=\MilSymb@symbAI,
   unique designation/.store in=\MilSymb@symbT,
   date-time group/.store in=\MilSymb@symbW,
   altitude value/.store in=\MilSymb@symbX,
   location/.store in=\MilSymb@symbY,
   speed/.store in=\MilSymb@symbZ,
   headquarters=false,
   feint or dummy=false,
   country indicator=,
   staff comments=,
   additional information=,
   installation composition=,
   higher formation=,
   evaluation rating=,
   unique designation=,
   date-time group=,
   altitude value=,
   location=,
   capacity of installation=,
   speed=,
   #1,
}%
\begin{scope}[shift={(#2)}, local bounding box=#3]
\fontfamily{phv}\fontseries{bx}\selectfont
\fontsize{6}{0}\selectfont
\pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
\pic {MilSymb \MilSymb@symbC={\MilSymb@symbCT}}; %Draw main symbol
\pic at (0,0.34) {MilSymb \MilSymb@symbU={\MilSymb@symbUT}}; %Draw upper symbol
\ifheadquarters\ifthenelse{\equal{\MilSymb@selectedfaction}{friendly}}{
\draw (-0.75, -0.5) -- +(0, -0.25);}{}\fi
\iffeintdummy
\draw [dashed] (M.north west) -- ($(M.north)+(0, 0.5)$) -- (M.north east);
\fi
\ifthenelse{\isequivalentto{\MilSymb@symbAC}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\MilSymb@symbAC};}
\ifthenelse{\isequivalentto{\MilSymb@symbG}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbG};}
\ifthenelse{\isequivalentto{\MilSymb@symbH}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbH};}
\ifthenelse{\isequivalentto{\MilSymb@symbM}{\empty}}{}{\node [anchor=west] at ($(M.north east)!0.83!(M.south east)$) {\MilSymb@symbM};}
\ifthenelse{\isequivalentto{\MilSymb@symbJ}{\empty} \AND \isequivalentto{\MilSymb@symbK}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbJ\MilSymb@symbK};}
\ifthenelse{\isequivalentto{\MilSymb@symbW}{\empty}}{}{\node [anchor=east] at ($(M.north west)!-0.17!(M.south west)$) {\MilSymb@symbW};}
\ifthenelse{\isequivalentto{\MilSymb@symbX}{\empty} \AND \isequivalentto{\MilSymb@symbY}{\empty}}{}{\node [anchor=east] at ($(M.north west)!.17!(M.south west)$) {\MilSymb@symbX\MilSymb@symbY};}
\ifthenelse{\isequivalentto{\MilSymb@symbAI}{\empty}}{}{\node [anchor=east] at (M.west) {\MilSymb@symbAI};}
\ifthenelse{\isequivalentto{\MilSymb@symbT}{\empty}}{}{\node [anchor=east] at ($(M.north west)!0.83!(M.south west)$) {\MilSymb@symbT};}
\ifthenelse{\isequivalentto{\MilSymb@symbZ}{\empty}}{}{\node [anchor=east] at ($(M.north west)!1.17!(M.south west)$) {\MilSymb@symbZ};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\NewDocumentCommand\MilSeaSurface{ o D(){0,0} d() g}{
\tikzset{%
   /MilSymb/.cd,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=equipment/none, fill=white},
   faction/friendly/.style={/MilSymb/.cd, shape=equipment/friendly, fill=friendlyA},
   faction/hostile/.style={/MilSymb/.cd, shape=equipment/hostile, fill=hostileA},
   faction/neutral/.style={/MilSymb/.cd, shape=equipment/neutral, fill=neutralA},
   faction/unknown/.style={/MilSymb/.cd, shape=equipment/unknown, fill=unknownA},
   main/.is choice,
   main/none/.style={/MilSymb/.cd, symbC=main/textsmall, symbCT=},
   main/military/.style={/MilSymb/.cd, symbC=main/text, symbCT=MIL},
   main/combatant/.style={/MilSymb/.cd, symbC=seasurface/main/combatant},
   main/surface combatant/.style={/MilSymb/.cd, symbC=seasurface/main/surface combatant},
   main/carrier/.style={/MilSymb/.cd, symbC=seasurface/main/carrier},
   main/battleship/.style={/MilSymb/.cd, symbC=main/text, symbCT=BB},
   main/cruiser guided missile/.style={/MilSymb/.cd, symbC=main/text, symbCT=CG},
   main/destroyer/.style={/MilSymb/.cd, symbC=main/text, symbCT=DD},
   main/frigate/.style={/MilSymb/.cd, symbC=main/text, symbCT=FF},
   main/corvette/.style={/MilSymb/.cd, symbC=main/text, symbCT=FS},
   main/littoral combatant ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=LCS},
   main/amphibious warfare ship/.style={/MilSymb/.cd, symbC=seasurface/main/amphibious warfare ship},
   main/amphibious command ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=LCC},
   main/amphibious assault/.style={/MilSymb/.cd, symbC=main/text, symbCT=LA},
   main/amphibious assault ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=LHA},
   main/multi purpose amphibious assualt ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=LHD},
   main/amphibious transport/.style={/MilSymb/.cd, symbC=main/text, symbCT=LPD},
   main/amphibious assualt ship helicopter/.style={/MilSymb/.cd, symbC=main/text, symbCT=LPH},
   main/landing ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=LS},
   main/landing craft/.style={/MilSymb/.cd, symbC=main/text, symbCT=LC},
   main/mine warfare vessel/.style={/MilSymb/.cd, symbC=seasurface/main/mine warfare vessel},
   main/minelayer/.style={/MilSymb/.cd, symbC=main/text, symbCT=ML},
   main/minesweeper/.style={/MilSymb/.cd, symbC=main/text, symbCT=MS},
   main/minesweeper drone/.style={/MilSymb/.cd, symbC=main/text, symbCT=MSD},
   main/minehunter/.style={/MilSymb/.cd, symbC=main/text, symbCT=MH},
   main/mine countermeasure support ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=MCS},
   main/mine countermeasures/.style={/MilSymb/.cd, symbC=main/text, symbCT=MCM},
   main/sea surface decoy/.style={/MilSymb/.cd, symbC=seasurface/main/sea surface decoy},
   main/patrol/.style={/MilSymb/.cd, symbC=seasurface/main/patrol},
   main/patrol craft/.style={/MilSymb/.cd, symbC=main/text, symbCT=PC},
   main/patrol ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=PG},
   main/military speedboat/.style={/MilSymb/.cd, symbC=seasurface/main/military speedboat},
   main/military rigid hull inflatable boat/.style={/MilSymb/.cd, symbC=seasurface/main/military rigid hull inflatable boat},
   main/military jetski/.style={/MilSymb/.cd, symbC=seasurface/main/military jetski},
   main/military unmanned surface water vehicle/.style={/MilSymb/.cd, symbC=multi/main/unmanned systems},
   main/navy task organisation unit/.style={/MilSymb/.cd, symbC=seasurface/main/navy task organization unit},
   main/navy task force/.style={/MilSymb/.cd, symbC=seasurface/main/navy task force},
   main/navy task unit/.style={/MilSymb/.cd, symbC=seasurface/main/navy task unit},
   main/navy task element/.style={/MilSymb/.cd, symbC=seasurface/main/navy task element},
   main/convoy/.style={/MilSymb/.cd, symbC=seasurface/main/convoy},
   main/non combatant/.style={/MilSymb/.cd, symbC=seasurface/main/non combatant},
   main/auxiliary ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AA},
   main/ammunition ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AE},
   main/stores ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AF},
   main/auxiliary flag ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AGF},
   main/intelligence collector/.style={/MilSymb/.cd, symbC=main/text, symbCT=AGI},
   main/ocean research ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AGO},
   main/survey ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AGS},
   main/hospital ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AH},
   main/naval cargo ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AK},
   main/combat support ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AOE},
   main/oiler/.style={/MilSymb/.cd, symbC=main/text, symbCT=AOR},
   main/repair ship/.style={/MilSymb/.cd, symbC=main/text, symbCT=AR},
   main/submarine tender/.style={/MilSymb/.cd, symbC=main/text, symbCT=AS},
   main/ocean going tug/.style={/MilSymb/.cd, symbC=main/text, symbCT=AT},
   main/service craft/.style={/MilSymb/.cd, symbC=main/text, symbCT=YY},
   main/non self propelled barge/.style={/MilSymb/.cd, symbC=main/text, symbCT=YB},
   main/self propelled barge/.style={/MilSymb/.cd, symbC=main/text, symbCT=YS},
   main/harbour tug/.style={/MilSymb/.cd, symbC=main/text, symbCT=YT},
   main/launch/.style={/MilSymb/.cd, symbC=main/text, symbCT=YFT},
   main/civilian/.style={/MilSymb/.cd, symbC=main/text, symbCT=CIV},
   main/ship/.style={/MilSymb/.cd, symbC=seasurface/main/ship},
   main/cargo/.style={/MilSymb/.cd, symbC=seasurface/main/cargo},
   main/container ship/.style={/MilSymb/.cd, symbC=seasurface/main/container ship},
   main/dredge/.style={/MilSymb/.cd, symbC=seasurface/main/dredge},
   main/roll on roll off/.style={/MilSymb/.cd, symbC=seasurface/main/roll on roll off},
   main/ferry/.style={/MilSymb/.cd, symbC=seasurface/main/ferry},
   main/heavy lift/.style={/MilSymb/.cd, symbC=seasurface/main/heavy lift},
   main/hovercraft/.style={/MilSymb/.cd, symbC=seasurface/main/hovercraft},
   main/lash carrier/.style={/MilSymb/.cd, symbC=seasurface/main/lash carrier},
   main/tanker/.style={/MilSymb/.cd, symbC=seasurface/main/tanker},
   main/passenger ship/.style={/MilSymb/.cd, symbC=seasurface/main/passenger ship},
   main/tug/.style={/MilSymb/.cd, symbC=seasurface/main/tug},
   main/tow/.style={/MilSymb/.cd, symbC=seasurface/main/tow},
   main/hazardous material transport ship/.style={/MilSymb/.cd, symbC=seasurface/main/hazardous material transport ship},
   main/junk/.style={/MilSymb/.cd, symbC=seasurface/main/junk},
   main/barge/.style={/MilSymb/.cd, symbC=seasurface/main/barge},
   main/fishing vessel/.style={/MilSymb/.cd, symbC=seasurface/main/fishing vessel},
   main/drifter/.style={/MilSymb/.cd, symbC=seasurface/main/drifter},
   main/trawler/.style={/MilSymb/.cd, symbC=seasurface/main/trawler},
   main/law enforcement vessel/.style={/MilSymb/.cd, symbC=seasurface/main/law enforcement vessel},
   main/sailing boat/.style={/MilSymb/.cd, symbC=multi/main/sailing boat},
   main/civilian boat/.style={/MilSymb/.cd, symbC=seasurface/main/civilian boat},
   main/civilian rigid hull inflatable boat/.style={/MilSymb/.cd, symbC=seasurface/main/civilian rigid hull inflatable boat},
   main/civilian speedboat/.style={/MilSymb/.cd, symbC=seasurface/main/civilian speedboat},
   main/civilian jetski/.style={/MilSymb/.cd, symbC=seasurface/main/civilian jetski},
   main/civilian unmanned surface water vehicle/.style={/MilSymb/.cd, symbC=multi/main/civilian unmanned systems},
   upper/.is choice,
   upper/none/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=},
   upper/anti air warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=AAW},
   upper/anti submarine warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=ASW},
   upper/escort/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=E},
   upper/electronic warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=EW},
   upper/intelligence surveillance reconnaissance/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=ISR},
   upper/mine counter measures/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MCM},
   upper/missile defence/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MD},
   upper/medical/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=ME},
   upper/mine warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MW},
   upper/remote multi mission vehicle/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=RMV},
   upper/special operations force/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=SOF},
   upper/surface warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=SUW},
   upper/ballistic missile/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=B},
   upper/guided missile/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=G},
   upper/other guided missile/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=M},
   upper/torpedo/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=T},
   upper/drone equipped/.style={/MilSymb/.cd, symbU=seasurface/upper/drone equipped},
   upper/helicopter equipped/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=H},
   lower/.is choice,
   lower/none/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=},
   lower/nuclear powered/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N},
   lower/heavy/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=H},
   lower/light/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=L},
   lower/medium/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=M},
   lower/dock/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=D},
   lower/logistics/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=LOG},
   lower/tank/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=T},
   lower/vehicle/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=V},
   lower/fast/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=F},
   lower/air cushioned/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=J},
   lower/air cushioned alternate/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=AC},
   lower/hydrofoil/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=K},
   lower/autonomous control/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=AUT},
   lower/remotely piloted/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=RP},
   lower/expendable/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=EXP},
   track number/.store in=\MilSymb@symbA,
   name/.store in=\MilSymb@symbB,
   position and movement/.store in=\MilSymb@symbD,
   identification/.store in= \MilSymb@symbE,
   additional information/.store in=\MilSymb@symbF,
   date-time group/.store in= \MilSymb@symbG,
   speed leader/.code 2 args={\draw (0,0) -- (##1:##2);},
   speed leader/.value required,
   track number=,
   name=,
   position and movement=,
   identification=,
   additional information=,
   date-time group=,     
   faction=none,
   main=none,
   upper=none,
   lower=none,
   #1,
}%
\begin{scope}[shift={(#2)}, local bounding box=#3]
 \fontfamily{phv}\fontseries{bx}\selectfont
 \pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
 \pic {MilSymb \MilSymb@symbC={\MilSymb@symbCT}}; %Draw main symbol
 \pic at (0,0.34) {MilSymb \MilSymb@symbU={\MilSymb@symbUT}}; %Draw upper symbol
 \pic at (0,-0.34) {MilSymb \MilSymb@symbL={\MilSymb@symbLT}}; %Draw lower symbol
 \fontsize{6}{0}\selectfont
 \ifthenelse{\isequivalentto{\MilSymb@symbA}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\MilSymb@symbA};}
 \ifthenelse{\isequivalentto{\MilSymb@symbB}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbB};}
 \ifthenelse{\isequivalentto{\MilSymb@symbD}{\empty} \AND \isequivalentto{\MilSymb@symbG}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbD\MilSymb@symbG};}
 \ifthenelse{\isequivalentto{\MilSymb@symbE}{\empty}}{}{\node [anchor=west] at ($(M.north east)!0.83!(M.south east)$) {\MilSymb@symbE};}
 \ifthenelse{\isequivalentto{\MilSymb@symbF}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbF};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\NewDocumentCommand\OwnShip{D(){0,0} d() g}{
\begin{scope}[shift={(#1)}, local bounding box=#2]
\draw [ultra thick, friendlyA] (0, 0) circle (0.5);
\draw [ultra thick, friendlyA] (0.5, 0) -- (-0.5, 0);
\draw [ultra thick, friendlyA] (0, 0.5) -- (0, -0.5);
\end{scope}
 \IfNoValueF{#3}{\node [anchor=west] at (#2.east) {#3};}
}
\NewDocumentCommand\MilSeaSubsurface{ o D(){0,0} d() g}{
\tikzset{%
   /MilSymb/.cd,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=seasubsurface/none, fill=white},
   faction/friendly/.style={/MilSymb/.cd, shape=seasubsurface/friendly, fill=friendlyA},
   faction/hostile/.style={/MilSymb/.cd, shape=seasubsurface/hostile, fill=hostileA},
   faction/neutral/.style={/MilSymb/.cd, shape=seasubsurface/neutral, fill=neutralA},
   faction/unknown/.style={/MilSymb/.cd, shape=seasubsurface/unknown, fill=unknownA},
   main/.is choice,
   main/none/.style={/MilSymb/.cd, symbC=main/textsmall, symbCT=},
   main/military/.style={/MilSymb/.cd, symbC=main/text, symbCT=MIL},
   main/submarine/.style={/MilSymb/.cd, symbC=seasubsurface/main/submarine},
   main/surfaced submarine/.style={/MilSymb/.cd, symbC=seasubsurface/main/surfaced submarine},
   main/bottomed submarine/.style={/MilSymb/.cd, symbC=seasubsurface/main/bottomed submarine},
   main/snorkelling submarine/.style={/MilSymb/.cd, symbC=seasubsurface/main/snorkelling submarine},
   main/other submersible/.style={/MilSymb/.cd, symbC=seasubsurface/main/other submersible},
   main/autonomous underwater vehicle/.style={/MilSymb/.cd, symbC=multi/main/unmanned systems},
   main/non submarine/.style={/MilSymb/.cd, symbC=seasubsurface/main/non submarine},
   main/military diver/.style={/MilSymb/.cd, symbC=seasubsurface/main/military diver},
   main/civilian/.style={/MilSymb/.cd, symbC=main/text, symbCT=CIV},
   main/civilian submersible/.style={/MilSymb/.cd, symbC=seasubsurface/main/civilian submersible},
   main/civilian autonomous underwatervehicle/.style={/MilSymb/.cd,  symbC=multi/main/civilian unmanned systems},
   main/civilian diver/.style={/MilSymb/.cd, symbC=multi/main/diver},
   main/underwater weapon/.style={/MilSymb/.cd, symbC=main/text, symbCT=WPN},
   main/torpedo/.style={/MilSymb/.cd, symbC=seasubsurface/main/torpedo},
   main/improvised explosive device/.style={/MilSymb/.cd, symbC=main/text, symbCT=IED},
   main/underwater decoy/.style={/MilSymb/.cd, symbC=seasubsurface/main/underwater decoy},
   main/sea mine decoy/.style={/MilSymb/.cd, symbC=seasubsurface/main/sea mine decoy},
   main/bottomed sea mine decoy/.style={/MilSymb/.cd, symbC=seasubsurface/main/bottomed sea mine decoy},
   main/moored sea mine decoy/.style={/MilSymb/.cd, symbC=seasubsurface/main/moored sea mine decoy},
   main/unexploded ordnance/.style={/MilSymb/.cd, symbC=seasubsurface/mine/unexploded ordanance},
   main/military seabed installation/.style={/MilSymb/.cd, symbC=seasubsurface/main/military seabed installation},
   main/civilian seabed installation/.style={/MilSymb/.cd, symbC=seasubsurface/main/civilian seabed installation},
   upper/.is choice,
   upper/none/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=},
   upper/anti submarine warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=ASW},
   upper/auxiliary/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=AUX},
   upper/command and control/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=C2},
   upper/intelligence surveillance reconnaissance/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=ISR},
   upper/mine countermeasures/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MCM},
   upper/mine warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MW},
   upper/surface warfare/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=SUW},
   upper/attack/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=A},
   upper/ballistic missile/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=B},
   upper/guided missile/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=G},
   upper/other guided missile/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=M},
   upper/special operations force/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=SOF},
   upper/possible submarine low 1/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=P1},
   upper/possible submarine low 2/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=P2},
   upper/possible submarine high 3/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=P3},
   upper/possible submarine high 4/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=P4},
   upper/probable submarine/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=PB},
   upper/certain submarine/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=CT},
   lower/.is choice,
   lower/none/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=},
   lower/air independent propulsion/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=AI},
   lower/diesel propulsion/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=D},
   lower/diesel type 1/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=D1},
   lower/diesel type 2/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=D2},
   lower/diesel type 3/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=D3},
   lower/nuclear propulsion/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N},
   lower/nuclear type 1/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N1},
   lower/nuclear type 2/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N2},
   lower/nuclear type 3/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N3},
   lower/nuclear type 4/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N4},
   lower/nuclear type 5/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N5},
   lower/nuclear type 6/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N6},
   lower/nuclear type 7/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=N7},
   lower/autonomous control/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=AUT},
   lower/remotely piloted/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=RP},
   lower/expendable/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=EXP},
   track number/.store in=\MilSymb@symbA,
   name/.store in=\MilSymb@symbB,
   position and movement/.store in=\MilSymb@symbD,
   identification/.store in= \MilSymb@symbE,
   additional information/.store in=\MilSymb@symbF,
   date-time group/.store in= \MilSymb@symbG,
   speed leader/.code 2 args={\draw (0,0) -- (##1:##2);},
   speed leader/.value required,
   track number=,
   name=,
   position and movement=,
   identification=,
   additional information=,
   date-time group=,
   faction=none,     
   main=none,
   upper=none,
   lower=none,
   #1,
}%
\begin{scope}[shift={(#2)}, local bounding box=#3]
 \fontfamily{phv}\fontseries{bx}\selectfont
 \pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
 \pic {MilSymb \MilSymb@symbC={\MilSymb@symbCT}}; %Draw main symbol
 \pic at (0,0.34) {MilSymb \MilSymb@symbU={\MilSymb@symbUT}}; %Draw upper symbol
 \pic at (0,-0.34) {MilSymb \MilSymb@symbL={\MilSymb@symbLT}}; %Draw lower symbol
 \fontsize{6}{0}\selectfont
 \ifthenelse{\isequivalentto{\MilSymb@symbA}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\MilSymb@symbA};}
 \ifthenelse{\isequivalentto{\MilSymb@symbB}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbB};}
 \ifthenelse{\isequivalentto{\MilSymb@symbD}{\empty} \AND \isequivalentto{\MilSymb@symbG}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbD\MilSymb@symbG};}
 \ifthenelse{\isequivalentto{\MilSymb@symbE}{\empty}}{}{\node [anchor=west] at ($(M.north east)!0.83!(M.south east)$) {\MilSymb@symbE};}
 \ifthenelse{\isequivalentto{\MilSymb@symbF}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbF};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\newif\ifneutralised
\NewDocumentCommand\MilMine{ o D(){0,0} d() g}{
\tikzset{%
   /MilSymb/.cd,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=seasubsurface/none, fill=white},
   faction/noframe/.style={/MilSymb/.cd, shape=main/text, fill=transparent},
   faction/friendly/.style={/MilSymb/.cd, shape=seasubsurface/friendly, fill=friendlyA},
   faction/hostile/.style={/MilSymb/.cd, shape=seasubsurface/hostile, fill=hostileA},
   faction/neutral/.style={/MilSymb/.cd, shape=seasubsurface/neutral, fill=neutralA},
   faction/unknown/.style={/MilSymb/.cd, shape=seasubsurface/unknown, fill=unknownA},
   mine/.is choice,
   mine/normal/.style={/MilSymb/.cd, symbC=seasubsurface/mine/sea mine},
   mine/bottomed/.style={/MilSymb/.cd, symbC=seasubsurface/mine/bottomed sea mine},
   mine/moored/.style={/MilSymb/.cd, symbC=seasubsurface/mine/moored sea mine},
   mine/floating/.style={/MilSymb/.cd, symbC=seasubsurface/mine/floating sea mine},
   mine/in other position/.style={/MilSymb/.cd, symbC=seasubsurface/mine/sea mine in other position},
   mine/rising/.style={/MilSymb/.cd, symbC=seasubsurface/mine/rising sea mine},
   neutralised/.is if=neutralised,
   track number/.store in=\MilSymb@symbA,
   name/.store in=\MilSymb@symbB,
   position and movement/.store in=\MilSymb@symbD,
   identification/.store in= \MilSymb@symbE,
   additional information/.store in=\MilSymb@symbF,
   date-time group/.store in= \MilSymb@symbG,
   track number=,
   name=,
   position and movement=,
   identification=,
   additional information=,
   date-time group=, 
   faction=none,    
   mine=normal,
   neutralised=false,
   #1,
}%
\begin{scope}[shift={(#2)}, local bounding box=#3]
 \fontfamily{phv}\fontseries{bx}\selectfont
 \pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
 \ifneutralised
 \pic {MilSymb \MilSymb@symbC-neutralised}; %Draw neutralised mine
 \else
 \pic {MilSymb \MilSymb@symbC}; %Draw mine
 \fi
 \fontsize{6}{0}\selectfont
 \ifthenelse{\isequivalentto{\MilSymb@symbA}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\MilSymb@symbA};}
 \ifthenelse{\isequivalentto{\MilSymb@symbB}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbB};}
 \ifthenelse{\isequivalentto{\MilSymb@symbD}{\empty} \AND \isequivalentto{\MilSymb@symbG}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbD\MilSymb@symbG};}
 \ifthenelse{\isequivalentto{\MilSymb@symbE}{\empty}}{}{\node [anchor=west] at ($(M.north east)!0.83!(M.south east)$) {\MilSymb@symbE};}
 \ifthenelse{\isequivalentto{\MilSymb@symbF}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbF};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\NewDocumentCommand\MilSpace{ o D(){0,0} d() g}{
\tikzset{%
   /MilSymb/.cd,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=space/none, fill=white},
   faction/friendly/.style={/MilSymb/.cd, shape=space/friendly, fill=friendlyA},
   faction/hostile/.style={/MilSymb/.cd, shape=space/hostile, fill=hostileA},
   faction/neutral/.style={/MilSymb/.cd, shape=space/neutral, fill=neutralA},
   faction/unknown/.style={/MilSymb/.cd, shape=space/unknown, fill=unknownA},
   main/.is choice,
   main/none/.style={/MilSymb/.cd, symbC=main/textsmall, symbCT=},
   main/space vehicle/.style={/MilSymb/.cd, symbC=main/text, symbCT=SV},
   main/reentry vehicle/.style={/MilSymb/.cd, symbC=main/text, symbCT=RV},
   main/planet lander/.style={/MilSymb/.cd, symbC=main/text, symbCT=PL},
   main/military orbiter shuttle/.style={/MilSymb/.cd, symbC=space/main/military orbiter shuttle},
   main/civilian orbiter shuttle/.style={/MilSymb/.cd, symbC=space/main/civilian orbiter shuttle},
   main/military capsule/.style={/MilSymb/.cd, symbC=space/main/military capsule},
   main/civilian capsule/.style={/MilSymb/.cd, symbC=space/main/civilian capsule},
   main/satellite/.style={/MilSymb/.cd, symbC=main/text, symbCT=SAT},
   main/military satellite/.style={/MilSymb/.cd, symbC=space/main/military satellite},
   main/civilian satellite/.style={/MilSymb/.cd, symbC=space/main/civilian satellite},
   main/anti satellite weapon/.style={/MilSymb/.cd, symbC=space/main/anti satellite weapon},
   main/military astronomical satellite/.style={/MilSymb/.cd, symbC=space/main/military astronomical satellite},
   main/civilian astronomical satellite/.style={/MilSymb/.cd, symbC=space/main/civilian astronomical satellite},
   main/military bio satellite/.style={/MilSymb/.cd, symbC=space/main/military bio satellite},
   main/civilian bio satellite/.style={/MilSymb/.cd, symbC=space/main/civilian bio satellite},
   main/military communications satellite/.style={/MilSymb/.cd, symbC=space/main/military communications satellite},
   main/civilian communications satellite/.style={/MilSymb/.cd, symbC=space/main/civilian communications satellite},
   main/military earth observation satellite/.style={/MilSymb/.cd, symbC=space/main/military earth observation satellite},
   main/civilian earth observation satellite/.style={/MilSymb/.cd, symbC=space/main/civilian earth observation satellite},
   main/military minaturised satellite/.style={/MilSymb/.cd, symbC=space/main/military minaturised satellite},
   main/civilian minaturised satellite/.style={/MilSymb/.cd, symbC=space/main/civilian minaturised satellite},
   main/military navigational satellite/.style={/MilSymb/.cd, symbC=space/main/military navigational satellite},
   main/civilian navigational satellite/.style={/MilSymb/.cd, symbC=space/main/civilian navigational satellite},
   main/reconnaissance satellite/.style={/MilSymb/.cd, symbC=space/main/reconnaissance satellite},
   main/military space station/.style={/MilSymb/.cd, symbC=space/main/military space station},
   main/civilian space station/.style={/MilSymb/.cd, symbC=space/main/civilian space station},
   main/military tether satellite/.style={/MilSymb/.cd, symbC=space/main/military tether satellite},
   main/civilian tether satellite/.style={/MilSymb/.cd, symbC=space/main/civilian tether satellite},
   main/military weather satellite/.style={/MilSymb/.cd, symbC=space/main/military weather satellite},
   main/civilian weather satellite/.style={/MilSymb/.cd, symbC=space/main/civilian weather satellite},
   upper/.is choice,
   upper/none/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=},
   upper/low earth orbit/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=LEO},
   upper/medium earth orbit/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MEO},
   upper/high earth orbit/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=HEO},
   upper/geosynchronous orbit/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=GSO},
   upper/geostationary orbit/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=GO},
   upper/molinya orbit/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MO},
   lower/.is choice,
   lower/none/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=},
   lower/optical/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=O},
   lower/infra red/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=IR},
   lower/radar/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=R},
   lower/signals intelligence/.style={/MilSymb/.cd, symbL=main/textsmall, symbLT=SI},
   track number/.store in=\MilSymb@symbA,
   name/.store in=\MilSymb@symbB,
   position and movement/.store in=\MilSymb@symbD,
   nation/.store in= \MilSymb@symbE,
   additional information/.store in=\MilSymb@symbF,
   speed leader/.code 2 args={\draw (0,0) -- (##1:##2);},
   speed leader/.value required,
   track number=,
   name=,
   position and movement=,
   nation=,
   additional information=,
   faction=none,     
   main=none,
   upper=none,
   lower=none,
   #1,
}%
\begin{scope}[shift={(#2)}, local bounding box=#3]
 \fontfamily{phv}\fontseries{bx}\selectfont
 \pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
 \pic {MilSymb \MilSymb@symbC={\MilSymb@symbCT}}; %Draw main symbol
 \pic at (0,0.34) {MilSymb \MilSymb@symbU={\MilSymb@symbUT}}; %Draw upper symbol
 \pic at (0,-0.34) {MilSymb \MilSymb@symbL={\MilSymb@symbLT}}; %Draw lower symbol
 \fontsize{6}{0}\selectfont
 \ifthenelse{\isequivalentto{\MilSymb@symbA}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\MilSymb@symbA};}
 \ifthenelse{\isequivalentto{\MilSymb@symbB}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbB};}
 \ifthenelse{\isequivalentto{\MilSymb@symbD}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbD};}
 \ifthenelse{\isequivalentto{\MilSymb@symbE}{\empty}}{}{\node [anchor=west] at ($(M.north east)!0.83!(M.south east)$) {\MilSymb@symbE};}
 \ifthenelse{\isequivalentto{\MilSymb@symbF}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbF};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\newif\ifmanmade
\NewDocumentCommand\MilDebris{ o D(){0,0} d() g}{
\tikzset{%
  /MilSymb/.cd,
  size/.is choice,
  size/small/.style={/MilSymb/.cd, shape=space/debris/small},
  size/medium/.style={/MilSymb/.cd, shape=},
  size/large/.style={/MilSymb/.cd, shape=space/debris/large},
  man made/.is if=manmade,
  size=small,
  man made=false,
  #1,
}%
\begin{scope}[shift={(#2)}, local bounding box=#3]
\draw circle (0.5);
\ifmanmade
\fill circle (0.15);
\else
\draw circle (0.15);
\fi
\pic {MilSymb \MilSymb@shape}; %Draw debris modifier  
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\NewDocumentCommand\MilActivity{ o D(){0,0} d() g}{
\tikzset{
  /MilSymb/.cd,
   selectedfaction/.store in=\MilSymb@selectedfaction,
   faction/.is choice,
   faction/none/.style={/MilSymb/.cd, shape=activity/none, fill=white, selectedfaction=neutral},
   faction/friendly/.style={/MilSymb/.cd, shape=activity/friendly, fill=friendlyA, selectedfaction=friendly},
   faction/hostile/.style={/MilSymb/.cd, shape=activity/hostile, fill=hostileA, selectedfaction=hostile},
   faction/neutral/.style={/MilSymb/.cd, shape=activity/neutral, fill=neutralA, selectedfaction=neutral},
   faction/unknown/.style={/MilSymb/.cd, shape=activity/unknown, fill=unknownA, selectedfaction=unknown},
   main/.is choice,
   main/none/.style={/MilSymb/.cd, symbC=main/textsmall, symbCT=},
   main/arrest/.style={/MilSymb/.cd, symbC=activity/main/arrest},
   main/fire/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=FIRE},  
   main/attempted criminal activity/.style={/MilSymb/.cd, symbC=multi/main/victim of an attempted crime},
   main/demonstration/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=MASS},   
   main/drive by shooting/.style={/MilSymb/.cd, symbC=activity/main/drive by shooting},
   main/drug related activites/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=DRUG},  
   main/explosion/.style={/MilSymb/.cd, symbC=activity/main/explosion},
   main/improvised explosive device explosion/.style={/MilSymb/.cd, symbC=activity/main/improvised explosive device explosion},
   main/extortion 1/.style={/MilSymb/.cd, symbC=main/text, symbCT=\$},  
   main/extortion 2/.style={/MilSymb/.cd, symbC=main/text, symbCT=\pounds},  
   main/extortion 3/.style={/MilSymb/.cd, symbC=main/text, symbCT=\texteuro},  
   main/extortion 4/.style={/MilSymb/.cd, symbC=main/text, symbCT=\textyen},
   main/graffiti/.style={/MilSymb/.cd, symbC=activity/main/graffiti},
   main/killing/.style={/MilSymb/.cd, symbC=multi/main/killing victim},
   main/patrolling/.style={/MilSymb/.cd, symbC=activity/main/patrolling},
   main/poisoning/.style={/MilSymb/.cd, symbC=activity/main/poisoning},
   main/psychological operations/.style={/MilSymb/.cd, symbC=multi/main/psychological operations},
   main/radio and television psychological operations/.style={/MilSymb/.cd, symbC=activity/main/radio and television psychological operations},
   main/riot/.style={/MilSymb/.cd, symbC=main/textsquashed, symbCT=RIOT},
   main/searching/.style={/MilSymb/.cd, symbC=activity/main/searching},
   main/automobile/.style={/MilSymb/.cd, symbC=activity/main/automobile},
   main/pleasure craft/.style={/MilSymb/.cd, symbC=multi/main/sailing boat},
   main/individual/.style={/MilSymb/.cd, symbC=multi/main/individual},
   upper/.is choice,
   upper/none/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=},
   upper/assassination/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=AS},
   upper/execution/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=EX},
   upper/hijack/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=H},
   upper/house to house/.style={/MilSymb/.cd, symbU=activity/upper/house to house},
   upper/kidnapping/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=K},
   upper/murder/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=MU},
   upper/piracy/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=PI},
   upper/rape/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=RA},
   upper/written/.style={/MilSymb/.cd, symbU=main/textsmall, symbUT=W},
   staff comments/.store in=\MilSymb@symbG,
   additional information/.store in=\MilSymb@symbH,
   evaluation rating/.store in=\MilSymb@symbJ,
   country indicator/.store in=\MilSymb@symbAC,
   date-time group/.store in=\MilSymb@symbW,
   location/.store in=\MilSymb@symbY,
   offset/.code 2 args={\begin{scope}[shift={(#2)}]\ifthenelse{\equal{\MilSymb@drawH}{true}\AND \equal{\MilSymb@selectedfaction}{friendly}}{\draw (-0.75, -0.75) -- +($(0, -##1) - (0, -0.75)$) -- +(##2);}{\draw (0,0)  -- +(0, -##1) -- +(##2);}\end{scope}},
   offset/.value required,
   movement/.code 2 args={\begin{scope}[shift={(#2)}]\ifthenelse{\equal{\MilSymb@drawH}{true}\AND \equal{\MilSymb@selectedfaction}{friendly}}{ \draw [-{Stealth[inset=0pt,scale=1]}] (-0.75, -0.75) -- +($(0, -##1) - (0, -0.75)$) -- +(##2);}{\draw [-{Stealth[inset=0pt,scale=1]}] (0,0)  -- +(0, -##1) -- +(##2);}\end{scope}},
   movement/.value required,
   faction=friendly,
   main=none,
   upper=none,
   staff comments=,
   additional information=,
   evaluation rating=,
   date-time group=,
   location=,
   country indicator=,
  #1,
} %
\begin{scope}[shift={(#2)}, local bounding box=#3]
\fontfamily{phv}\fontseries{bx}\selectfont
\pic [local bounding box=M] {MilSymb \MilSymb@shape}; %Draw background shape
\pic {MilSymb \MilSymb@symbC={\MilSymb@symbCT}}; %Draw main symbol
\pic at (0,0.34) {MilSymb \MilSymb@symbU={\MilSymb@symbUT}}; %Draw upper symbol
\fontsize{6}{0}\selectfont
\ifthenelse{\isequivalentto{\MilSymb@symbAC}{\empty}}{}{\node [anchor=west] at ($(M.north east)!-0.17!(M.south east)$) {\MilSymb@symbAC};}
\ifthenelse{\isequivalentto{\MilSymb@symbG}{\empty}}{}{\node [anchor=west] at ($(M.north east)!.17!(M.south east)$) {\MilSymb@symbG};}
\ifthenelse{\isequivalentto{\MilSymb@symbH}{\empty}}{}{\node [anchor=west] at (M.east) {\MilSymb@symbH};}
\ifthenelse{\isequivalentto{\MilSymb@symbJ}{\empty}}{}{\node [anchor=west] at ($(M.north east)!1.17!(M.south east)$) {\MilSymb@symbJ};}
\ifthenelse{\isequivalentto{\MilSymb@symbW}{\empty}}{}{\node [anchor=east] at ($(M.north west)!-0.17!(M.south west)$) {\MilSymb@symbW};}
\ifthenelse{\isequivalentto{\MilSymb@symbY}{\empty}}{}{\node [anchor=east] at ($(M.north west)!.17!(M.south west)$) {\MilSymb@symbY};}
\end{scope}
 \IfNoValueF{#4}{\node [anchor=west] at (#3.east) {#4};}
}
\endinput