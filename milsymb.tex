% WARNING! Typesetting tables can cause memory overflow. Set --extra-mem-top=10000000 in Typesetting or texmf.cnf

\documentclass[a4paper, titlepage]{article}
\usepackage{milsymb, arev, ltablex, makecell, multirow, tikzpagenodes, vhistory, titlesec, float, forest, tocloft, alltt, array, tikz-dimline, threeparttable, textcomp, pifont, colortbl}
\usepackage[a4paper, margin=1.75cm]{geometry}
\usepackage[colorlinks=true, urlcolor=blue]{hyperref}
\usetikzlibrary{calc, arrows.meta}
\newcolumntype{n}{>{\raggedright\arraybackslash}m{5cm}}
\newcolumntype{s}{>{\centering\arraybackslash}m{1.75cm}}
\newcommand\MilSymb{\textbf{\texttt{MilSymb}}}
\newcommand\DocLink{\href{https://www.awl.edu.pl/images/en/APP_6_C.pdf}{APP6-(C)}}
\renewcommand\theadfont{\bfseries}
\newenvironment{writett}{\ttfamily}{\par}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4} 
\setlength{\cftsubsecnumwidth}{3em}
\setlength{\cftsubsubsecnumwidth}{4em}
\setlength{\cftparanumwidth}{5em}
\title{MilSymb}
\author{Damian Crosby}
\begin{document}
\thispagestyle{empty}
\begin{center}
\begin{tikzpicture}[remember picture]

\coordinate (NE) at ($(current page text area.north east)-(1.5, 1.5)$);
\coordinate (NW) at ($(current page text area.north west)-(-1.5, 1.5)$);
\coordinate (SE) at ($(current page text area.south east)-(1.5, -1.5)$);
\coordinate (SW) at ($(current page text area.south west)-(-1.5, -1.5)$);

\MilLand[faction=hostile, echelon=team, main=infantry, scale=2](NE)
\MilAir[faction=friendly, main=military fixed wing, upper=jammer, lower=light, scale=2](NW)
\MilSeaSurface[faction=neutral, main=hazardous material transport ship, lower=fast, scale=2](SE)
\MilActivity[faction=unknown, main=searching, upper=house to house, scale=2](SW)

\MilLand[faction=unknown, echelon=battalion, main=armoured, upper=missile, lower=long range, scale=2]($(NE)!0.33!(NW)$)
\MilEquipment[faction=neutral, main=heavy machine gun, mobility=pack animal, scale=2]($(NE)!0.66!(NW)$)

\MilSpace[faction=hostile, main=military earth observation satellite, upper=low earth orbit, lower=radar, scale=2]($(SE)!0.33!(SW)$)
\MilInstallation[faction=friendly, main=electric power, upper=nuclear energy, scale=2]($(SE)!0.66!(SW)$)

\MilSeaSubsurface[faction=friendly, main=snorkelling submarine, upper=auxiliary, lower=nuclear type 5, scale=2]($(NE)!0.2!(SE)$)
\MilLand[faction=neutral, echelon=platoon, main=supply, supply={2}{4}, scale=2]($(NE)!0.4!(SE)$)
\MilActivity[faction=hostile, main=attempted criminal activity, upper=rape, scale=2]($(NE)!0.6!(SE)$)
\MilEquipment[faction=unknown, main=tank recovery vehicle, mobility=wheeled semi trailer, scale=2]($(NE)!0.8!(SE)$)

\MilMissile[faction=hostile, left=sub surface, right=launched, scale=2]($(NW)!0.2!(SW)$)
\MilInstallation[faction=unknown, main=civilian telecommunications, upper=television, scale=2]($(NW)!0.4!(SW)$)
\MilSpace[faction=friendly, main=civilian space station, upper=geosynchronous orbit, scale=2]($(NW)!0.6!(SW)$)
\MilLand[faction=neutral, echelon=corps, main=armoured, upper=missile, lower=long range, scale=2]($(NW)!0.8!(SW)$)

\pgfresetboundingbox
\path[use as bounding box] (0,0);

\end{tikzpicture}

{\let\newpage\relax\maketitle}
\end{center}

\clearpage

\begin{versionhistory}
\renewcommand \vhAuthorColWidth{6cm}
\vhEntry{1.0}{22/01/2018}{Damian Crosby}{Creation}
\end{versionhistory}

\clearpage

\section*{Acknowledgments}

The author would particularly like to thank the following members of the \TeX\  stack exchange community for their solutions to problems during this package\rq{}s development:

\begin{itemize}
\item \href{https://tex.stackexchange.com/users/39222}{cfr}
\item \href{https://tex.stackexchange.com/users/9335}{Kpym}
\item \href{https://tex.stackexchange.com/users/586}{Torbj\o rn T.}
\item \href{https://tex.stackexchange.com/users/2388}{Ulrike Fischer}
\end{itemize}

\clearpage

\tableofcontents

\clearpage

\section{Introduction}

\subsection{Package Summary}

This package allows for the drawing of symbols from the \textit{NATO Joint Military Symbology} library, as detailed in the document \DocLink. It is designed to replicate the \lq\lq{}building block\rq\rq{} nature of the symbols in its command syntax using \texttt{pgf} keys, allowing the user to generate the entire symbol, including additional text fields, in one compact command.

\subsection{Package Dependencies}

The \MilSymb package uses the following packages as dependencies:

\begin{itemize}
\item \texttt{tikz}
\item \texttt{fontenc}
\item \texttt{fix-cm}
\item \texttt{arevmath}
\item \texttt{marvosym}
\item \texttt{acronym}
\item \texttt{amssymb}
\item \texttt{xifthen}
\item \texttt{xparse}
\end{itemize}

\subsection{Using \MilSymb}

To use \MilSymb\  in your document, just include \texttt{\textbackslash usepackage\{milsymb\}} in your preamble. \MilSymb\  has only been tested on \LaTeX, other \TeX\  flavours will probably not work. All \MilSymb\  symbols must be placed inside a TikZ environment, either as part of an inline \texttt{tikz} command or an \texttt{tikzpicture} enviroment. 

\subsubsection{Package Options}

Currently, there are no package options specified for \MilSymb.

\subsubsection{Symbol Construction}

\textit{NATO Joint Military Symbology} uses a \lq\lq{}building block\rq\rq{} philosophy when constructing military symbols, so each symbol can be broken into individual components. Only a brief overview will be given here, more information can be found in \DocLink. These components are shown in Figure \ref{Annotate}.

\begin{figure}[H]
\centering
\begin{tikzpicture}
\MilLand[faction=friendly, main=armoured engineer, upper=survey, lower=bicycle equipped, frame status=normal, echelon=platoon, scale=2, movement={2}{2,-3}, unique designation=EX1, country indicator=GBR, altitude value=150, evaluation rating=A1, staff comments=EXAMPLE, higher formation=ENG 21]
\draw [red, {Circle[length=5pt]}-] (-1,-0.75) -- ++(225:1) -- ++(180:2) node[anchor=east]{Frame};
\draw [red, {Circle[length=5pt]}-] (0.1,0)  -- ++(180:2) node[anchor=east]{Icon};
\draw [red, {Circle[length=5pt]}-] (0.05,0.62)  -- ++(135:1) -- ++(180:2.7) node[anchor=east]{Modifier};
\draw [red, {Circle[length=5pt]}-] (0.05,-0.62)  -- ++(225:2) -- ++(180:2) node[anchor=east]{Modifier};
\draw [red, {Circle[length=5pt]}-{Circle[length=5pt]}] (-2,-0.6)  -- ++(180:1) -- ++(135:0.9) coordinate(A) -- ++(45:0.9) -- ++(0:1);
\draw [red, {Circle[length=5pt]}-{Circle[length=5pt]}] (3,0.65)  -- ++(0:1) -- ++(315:0.9) coordinate(B) -- ++(225:0.9) -- ++(180:1.5);
\draw [shift={(-1,0.7)}, red, {Circle[length=5pt]}-] (3,0.65)  -- ++(0:1.3) -- ++(315:1);
\draw [shift={(-1,-0.67)}, red, {Circle[length=5pt]}-] (3,-0.65)  -- ++(0:1.3) -- ++(45:1);
\draw [red] (A) -- ++(180:1) node[anchor=east]{Amplifiers};
\draw [red] (B) -- ++(0:1) node[anchor=west]{Amplifiers};
\draw [red, {Circle[length=5pt]}-] (0,1.2)  -- ++(90:1) node[anchor=south]{Amplifier};
\draw [red, {Circle[length=5pt]}-] (0,-1.9)  -- ++(270:1) node[anchor=north]{Amplifier};
\end{tikzpicture}
\caption{Annotation of symbol components.}
\label{Annotate}
\end{figure}

\begin{itemize}
\item The \textbf{Frame} consists of a filled shape encompassing the icon and modifiers, denoting the type (land, sea surface, air, etc.) and faction (friendly, hostile, neutral, unknown) of the symbol. In some situations this is optional.
\item The \textbf{Icon} denotes the entity the symbol represents (infantry, tank, mine, etc.). It is always placed in the centre of the symbol.
\item The \textbf{Modifiers} are symbols that go above and below the icon (or to the left and right in the case of missile symbols, and just below the frame in the case of equipment symbols). These \lq\lq{}modify\rq\rq{} the entity with additional features or information (equipped with rocket launchers, extra heavy, etc.)  These are usually optional.
\item The \textbf{Amplifiers} are text and symbols that go outside the frame, and denote additional attributes of the symbol (country of origin, military echelon, speed and direction, etc.). These are always optional.
\end{itemize}

\section{Symbol Commands}

\subsection{General Command Structure}

The general structure of a \MilSymb\  command is as follows. Syntax in \textit{italics} is optional:\\

\texttt{\textbackslash command[key, key=value]\textit{(location)(name)\{label\}}}

\begin{itemize}
\item \texttt{command} is the name of the command. All are prefixed with \texttt{Mil}-, and end with \texttt{Air}, \texttt{Missile}, \texttt{Land}, \texttt{Equipment}, \texttt{Installation}, \texttt{SeaSurface}, \texttt{SeaSubsurface}, \texttt{Mine}, \texttt{Space}, \texttt{Debris} and\\ \texttt{Activity}. These mostly correspond to the categories found in \DocLink, except for \texttt{Missile}, \texttt{Mine} and \texttt{Debris}, which have been broken off from \texttt{Air}, \texttt{SeaSubsurface} and \texttt{Space} for convenience. The \texttt{OwnShip} command is an exception to this rule, and does not have the \texttt{Mil}- prefix.

\item \texttt{key} and \texttt{key=value} are the options used to build the symbol, such as faction, icons, modifiers, and amplifiers. Keys with no value define boolean switches, such as \texttt{unclear}. Keys with values can have one parameter, such as \texttt{faction}, or two parameters, such as \texttt{speed leader}. In the latter case, the syntax is \texttt{key=\{value1\}\{value2\}}.
\item \texttt{location} is an optional coordinate or coordinate reference to place the symbol. This is generally needed when placing multiple symbols in one \texttt{tikzpicture}.
\item \texttt{name} is an optional reference label that acts just like the \texttt{name} property of a node in TikZ. It exposes standard rectangle node anchors such as \texttt{north} and \texttt{south}, allowing connectors to be drawn between symbols. This is useful when drawing organisation charts and similar (see Example \ref{}).
\item \texttt{label} is an optional text label that is added to the right of the symbol.
\end{itemize}

\subsubsection{Shared Keys}

These are all the keys that are shared by multiple \MilSymb\ commands. Not all keys are shared by all commands, please see Table \ref{shared} for details about which keys are used by which commands.

\begin{table}[H]
\centering
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
\hline
\multirow{10}{*}{\thead{Command}} & \multicolumn{10}{c|}{\thead{Shared Key}} \\ \cline{2-11}
& \rotatebox{90}{\thead{\texttt{faction}}} & \rotatebox{90}{\thead{\texttt{main}}} & \rotatebox{90}{\thead{\texttt{upper}}} & \rotatebox{90}{\thead{\texttt{lower}}} & \rotatebox{90}{\thead{\texttt{frame status}}} & \rotatebox{90}{\thead{\texttt{monochrome}}} & \rotatebox{90}{\thead{\texttt{scale}}} & \rotatebox{90}{\thead{\texttt{no frame}}} & \rotatebox{90}{\thead{\texttt{speed leader}}} & \rotatebox{90}{\thead{\texttt{offset, movement}}}\\ \hline
\texttt{MilAir} &  &  &  &  &  &  &  &  \cellcolor{gray} &  & \cellcolor{gray}\\ \hline
\texttt{MilMissile} &  &  & \cellcolor{gray} & \cellcolor{gray} &  &  &  &  \cellcolor{gray} &  & \cellcolor{gray}\\ \hline
\texttt{MilLand} &  &  &  &  &  &  &  & \cellcolor{gray} &  \cellcolor{gray} & \\ \hline
\texttt{MilEquipment} &  &  &  \cellcolor{gray} & \cellcolor{gray}  & $\ast$ &  &  &  &  \cellcolor{gray} & \\ \hline
\texttt{MilInstallation} &  &  &  &  &  &  &  & \cellcolor{gray} &  \cellcolor{gray} & \\ \hline
\texttt{MilSeaSurface} &  &  &  &  &  &  &  &  \cellcolor{gray} &  & \cellcolor{gray}\\ \hline
\texttt{MilSeaSubSurface} &  &  &  &  &  &  &  &  \cellcolor{gray} &  & \cellcolor{gray}\\ \hline
\texttt{MilMine} &  &  \cellcolor{gray} &  \cellcolor{gray} & \cellcolor{gray}  & $\ast$  &  &  &  &  \cellcolor{gray} & \cellcolor{gray} \\ \hline
\texttt{MilSpace} &  &  &  &  &  &  &  &  \cellcolor{gray} &  & \cellcolor{gray}\\ \hline
\texttt{MilActivity} &  &  &  &  &  &  &  & \cellcolor{gray} &  \cellcolor{gray} & \\ \hline
\texttt{MilDebris} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} &  \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray}\\ \hline
\texttt{OwnShip} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray} &  \cellcolor{gray} & \cellcolor{gray} & \cellcolor{gray}\\ \hline
\end{tabular}
\begin{tablenotes}
\item \qquad \quad  *Not functional when the \texttt{no frame} option is used.
\end{tablenotes}
\caption{Table of which keys are used in which commands.}
\label{shared}
\end{table}


\paragraph{\texttt{faction}}

This key selects the military faction of the symbol relative to the user, which determines the colour and shape of the frame, or the colour of the icon and modifiers if \texttt{no frame} is specified. The values available are \texttt{friendly}, \texttt{hostile}, \texttt{neutral} and \texttt{unknown}.

\begin{table}[H]
\centering
\begin{tabular}{|c|s|s|s|s|@{}m{0pt}@{}}
\hline
\multirow{4}{*}{\thead{Command}} & \multicolumn{4}{c|}{\thead{Faction Frame}} \\ \cline{2-5}
& \thead{Friendly} & \thead{Hostile} & \thead{Neutral} & \thead{Unknown}&\\
\hline
\texttt{MilAir} + \texttt{MilMissile} & \tikz[baseline=-0.5ex]{\MilAir[faction=friendly]} & \tikz[baseline=-0.5ex]{\MilAir[faction=hostile]} & \tikz[baseline=-0.5ex]{\MilAir[faction=neutral]} & \tikz[baseline=-0.5ex]{\MilAir[faction=unknown]}&\\
[1.25cm]\hline
\texttt{MilLand} & \tikz[baseline=-0.5ex]{\MilLand[faction=friendly]} & \tikz[baseline=-0.5ex]{\MilLand[faction=hostile]} & \tikz[baseline=-0.5ex]{\MilLand[faction=neutral]} & \tikz[baseline=-0.5ex]{\MilLand[faction=unknown]}&\\
[1.25cm] \hline
\texttt{MilEquipment}* + \texttt{MilSeaSurface} & \tikz[baseline=-0.5ex]{\MilEquipment[faction=friendly]} & \tikz[baseline=-0.5ex]{\MilEquipment[faction=hostile]} & \tikz[baseline=-0.5ex]{\MilEquipment[faction=neutral]} & \tikz[baseline=-0.5ex]{\MilLand[faction=unknown]}&\\
[1.25cm] \hline
\texttt{MilInstallation} & \tikz[baseline=-0.5ex]{\MilInstallation[faction=friendly]} & \tikz[baseline=-0.5ex]{\MilInstallation[faction=hostile]} & \tikz[baseline=-0.5ex]{\MilInstallation[faction=neutral]} & \tikz[baseline=-0.5ex]{\MilInstallation[faction=unknown]}&\\
[1.25cm] \hline
\texttt{MilSeaSubsurface} + \texttt{MilMine}* & \tikz[baseline=-0.5ex]{\MilSeaSubsurface[faction=friendly]} & \tikz[baseline=-0.5ex]{\MilSeaSubsurface[faction=hostile]} & \tikz[baseline=-0.5ex]{\MilSeaSubsurface[faction=neutral]} & \tikz[baseline=-0.5ex]{\MilSeaSubsurface[faction=unknown]}&\\
[1.25cm] \hline
\texttt{MilSpace} & \tikz[baseline=-0.5ex]{\MilSpace[faction=friendly]} & \tikz[baseline=-0.5ex]{\MilSpace[faction=hostile]} & \tikz[baseline=-0.5ex]{\MilSpace[faction=neutral]} & \tikz[baseline=-0.5ex]{\MilSpace[faction=unknown]}&\\
[1.25cm] \hline
\texttt{MilActivity} & \tikz[baseline=-0.5ex]{\MilActivity[faction=friendly]} & \tikz[baseline=-0.5ex]{\MilActivity[faction=hostile]} & \tikz[baseline=-0.5ex]{\MilActivity[faction=neutral]} & \tikz[baseline=-0.5ex]{\MilActivity[faction=unknown]}&\\
[1.25cm] \hline
\end{tabular}
\begin{tablenotes}
\item \qquad  *Can be used without a frame using the \texttt{no frame} option.
\end{tablenotes}
\caption{Table of all the \MilSymb\ command frames.}
\end{table}

\paragraph{\texttt{main}}

This key defines the icon to use in the centre of the frame. See the individual command symbol tables for the list of available values.

\paragraph{\texttt{upper}} 

This key defines the modifier to use above the icon defined by \texttt{main}. See the individual command symbol tables for the list of available values.

\paragraph{\texttt{lower}} 

This key defines the modifier to use below the icon defined by \texttt{main}. See the individual command symbol tables for the list of available values.

\paragraph{\texttt{frame status}}

This key modifies the border of the frame to allow for the expression of both the full set of \lq\lq{}standard identities\rq\rq{}, and the planned status as seen in \DocLink. The \texttt{unclear} value creates a black and white dotted line to display the alternate identities of each faction (assumed friend for friendly, suspect for hostile and pending for unknown, neutral should not use this value). The \texttt{anticipated} value create a longer dashed line to display the planned status.

\begin{figure}[H]
\centering
\begin{tikzpicture}
\matrix[column sep=5mm, row sep=5mm]{
\MilLand[faction=friendly, main=signal radio teletype centre, frame status=normal, scale=2] & \MilLand[faction=friendly, main=signal radio teletype centre, frame status=uncertain, scale=2] & \MilLand[faction=friendly, main=signal radio teletype centre, frame status=anticipated, scale=2]\\
\node{\texttt{frame status=normal}}; & \node{\texttt{frame status=unclear}}; & \node{\texttt{frame status=anticipated}}; \\
};
\end{tikzpicture}
\caption{Example of the \texttt{frame status} key in use.}
\end{figure}

\paragraph{\texttt{monochrome}}

This boolean switch key allows the symbol to be generated in a monochrome format. All faction colours are instead rendered as an off-white colour as specified in \DocLink. 

\begin{figure}[H]
\centering
\begin{tikzpicture}
\matrix[column sep=5mm, row sep=5mm]{
\MilLand[faction=friendly, main=signal radio teletype centre, scale=2] & \MilLand[faction=friendly, main=signal radio teletype centre, monochrome, scale=2]\\
\node{normal}; & \node{\texttt{monochrome}}; \\
};
\end{tikzpicture}
\caption{Example of the \texttt{monochrome} key in use.}
\end{figure}

\paragraph{\texttt{scale}}

This allows you to scale the resulting symbol by a multiple. By default (\texttt{scale=1}) the boundary octagon is precisely 1cm in diameter.

\begin{figure}[H]
\centering
\begin{tikzpicture}
\matrix[column sep=5mm, row sep=5mm]{
\MilLand[faction=friendly, main=signal radio teletype centre, scale=0.5] & \MilLand[faction=friendly, main=signal radio teletype centre, scale=1] & \MilLand[faction=friendly,  main=signal radio teletype centre, scale=2]\\
\node{\texttt{scale=0.5}}; & \node{\texttt{scale=1}}; & \node{\texttt{scale=2}}; \\
};
\end{tikzpicture}
\caption{Example of the \texttt{scale} key in use.}
\end{figure}

\paragraph{\texttt{no frame}}

This boolean switch key allows for specific commands (namely \textbf{\texttt{MilEquipment}} and \textbf{\texttt{MilMine}}) to be used without a faction frame. Instead, the icon and modifiers are recoloured with a fluorescent version of the faction colour, as per \DocLink.

\begin{figure}[H]
\centering
\begin{tikzpicture}
\matrix[column sep=5mm, row sep=5mm]{
\MilEquipment[faction=friendly, main=mine clearing vehicle, mobility=wheeled and tracked, scale=2] & \MilEquipment[faction=friendly,  main=mine clearing vehicle, mobility=wheeled and tracked, scale=2, no frame]\\
\node{normal}; & \node{\texttt{no frame}}; \\
};
\end{tikzpicture}
\caption{Example of the \texttt{no frame} key in use.}
\end{figure}

\paragraph{\texttt{speed leader} (Amplifier)}

This key draws a line from the centre of the symbol at a specified heading for a specified length. This is used to denote the speed (length) and direction (heading) of the symbol. This key takes two arguments, the first is the length and the second is the heading, as shown below:\\

\texttt{speed leader=\{\textit{heading}\}\{\textit{length}\}}

\begin{figure}[H]
\centering
\begin{tikzpicture}
\matrix[column sep=5mm, row sep=5mm]{
\MilAir[faction=friendly, main=military rotary wing, speed leader={35}{3}, scale=2] & \MilAir[faction=friendly, main=military rotary wing, speed leader={118}{4}, scale=2] & \MilAir[faction=friendly, main=military rotary wing, speed leader={335}{2}, scale=2] \\
\node{\texttt{speed leader=\{35\}\{3\}}}; & \node{\texttt{speed leader=\{118\}\{4\}}}; & \node{\texttt{speed leader=\{335\}\{2\}}}; \\
};
\end{tikzpicture}
\caption{Example of the \texttt{speed leader} key in use.}
\end{figure}

\paragraph{\texttt{offset}, \texttt{movement} (Amplifier)}

This key draws a \lq\lq{}leader line\rq\rq{} down from the centre of the symbol, then another to a specified position \textit{offset} from the centre of the symbol. The \texttt{offset} key should be used to denote precise location, and the \texttt{movement} key should be used to indicate direction of movement (in the case of the \texttt{movement} key, the line is tipped by an arrow). They should not be used simultaneously. This key takes two arguments, the first is the length of the \lq\lq{}leader line\rq\rq{} extending below the symbol, then the second is a pair of TikZ coordinates (with no brackets) indicating the specified position \textit{offset} from the centre of the symbol, as shown below:\\

\texttt{offset=\{\textit{leader length}\}\{\textit{offset}\}}\\
\indent\texttt{movement=\{\textit{leader length}\}\{\textit{offset}\}}

\begin{figure}[H]
\centering
\begin{tikzpicture}
\matrix[column sep=5mm, row sep=5mm]{
\MilLand[faction=friendly, main=signal radio teletype centre, scale=2, offset={3}{2,-4}] & \MilLand[faction=friendly, main=signal radio teletype centre, scale=2, movement={4}{2,-2}] &  \MilLand[faction=friendly, main=signal radio teletype centre, scale=2, offset={2}{-2,-2}] \\
\node{\texttt{offset=\{3\}\{2,-4\}}}; & \node{\texttt{ movement=\{4\}\{2,-2\}}}; & \node{\texttt{offset=\{2\}\{-2,-2\}}}; \\
};
\end{tikzpicture}
\caption{Example of the \texttt{offset} and \texttt{movement}  key in use.}
\end{figure}



\subsection{Air Command (\textbf{\texttt{MilAir}})}

\subsubsection{Symbol Tables}

\paragraph{\texttt{Main}}
%\input{manual_scripts/Air_Main_table.tex}

\paragraph{\texttt{Upper}}
%\input{manual_scripts/Air_Upper_table.tex}

\paragraph{\texttt{Lower}}
%\input{manual_scripts/Air_Lower_table.tex}

\subsubsection{Shared Amplifiers}

\paragraph{Speed Leader}

\subsection{Missile Command (\textbf{\texttt{MilMissile}})}

\subsubsection{Symbol Tables}

\paragraph{\texttt{Left}}
%\input{manual_scripts/Missile_Left_table.tex}

\paragraph{\texttt{Right}}
%\input{manual_scripts/Missile_Right_table.tex}

\subsubsection{Additional Features}

\paragraph{Speed Leader}

\subsection{Land Command (\textbf{\texttt{MilLand}})}

\subsubsection{Icons and Modifiers}

\paragraph{\texttt{Main}}
%\input{manual_scripts/Land_Main_table.tex}

\paragraph{\texttt{Upper}}
%\input{manual_scripts/Land_Upper_table.tex}

\paragraph{\texttt{Lower}}
%\input{manual_scripts/Land_Lower_table.tex}

\subsubsection{Amplifiers}

\paragraph{Echelon}

\paragraph{Status}

\paragraph{Headquarters}

\paragraph{Grouping}

\paragraph{Supply Class}


\subsection{Equipment Command (\textbf{\texttt{MilEquipment}})}

\subsubsection{Icons and Modifiers}

\paragraph{\texttt{Main}}
%\input{manual_scripts/Equipment_Main_table.tex}

\paragraph{\texttt{Mobility}}
%\input{manual_scripts/Equipment_Mobility_table.tex}

\subsection{Installation Command (\textbf{\texttt{MilInstallation}})}

\subsubsection{Icons and Modifiers}

\paragraph{\texttt{Main}}
%\input{manual_scripts/Installation_Main_table.tex}

\paragraph{\texttt{Upper}}
%\input{manual_scripts/Installation_Upper_table.tex}

\subsection{Sea Surface Command (\textbf{\texttt{MilSeaSurface}})}

\subsubsection{Icons and Modifiers}

\paragraph{\texttt{Main}}
%\input{manual_scripts/SeaSurface_Main_table.tex}

\paragraph{\texttt{Upper}}
%\input{manual_scripts/SeaSurface_Upper_table.tex}

\paragraph{\texttt{Lower}}
%\input{manual_scripts/SeaSurface_Lower_table.tex}

\subsubsection{Additional Features}

\paragraph{Speed Leader}

\subsection{Own Ship Command (\textbf{\texttt{OwnShip}})}

\subsection{Sea Subsurface Command (\textbf{\texttt{MilSeaSubsurface}})}

\subsubsection{Icons and Modifiers}

\paragraph{\texttt{Main}}
%\input{manual_scripts/SeaSubsurface_Main_table.tex}

\paragraph{\texttt{Upper}}
%\input{manual_scripts/SeaSubsurface_Upper_table.tex}

\paragraph{\texttt{Lower}}
%\input{manual_scripts/SeaSubsurface_Lower_table.tex}

\subsubsection{Additional Features}

\paragraph{Speed Leader}

\subsection{Sea Mine Command (\textbf{\texttt{MilMine}})}

\subsection{Space Command (\textbf{\texttt{MilSpace}})}

\subsubsection{Icons and Modifiers}

\paragraph{\texttt{Main}}
%\input{manual_scripts/Space_Main_table.tex}

\paragraph{\texttt{Upper}}
%\input{manual_scripts/Space_Upper_table.tex}

\paragraph{\texttt{Lower}}
%\input{manual_scripts/Space_Lower_table.tex}

\subsubsection{Additional Features}

\paragraph{Speed Leader}

\subsection{Space Debris Command (\textbf{\texttt{MilDebris}})}

\subsection{Activity Command (\textbf{\texttt{MilActivity}})}

\subsubsection{Symbol Tables}

\paragraph{\texttt{Main}}
%\input{manual_scripts/Activity_Main_table.tex}

\paragraph{\texttt{Upper}}
%\input{manual_scripts/Activity_Upper_table.tex}

\section{Custom Icons and Modifiers}

\subsection{\MilSymb TikZ Picture Directory Structure}

\begin{figure}[H]
\begin{forest}
  for tree={
    font=\ttfamily\footnotesize,
    grow'=0,
    child anchor=west,
    parent anchor=south,
    inner sep=0pt,
    anchor=west,
    calign=first,
    edge path={
      \noexpand\path [draw, \forestoption{edge}]
      (!u.south west) +(7.5pt,0) |- node[] {} (.child anchor)\forestoption{edge label};
    },
    before typesetting nodes={
      if n=1
        {insert before={[,phantom]}}
        {}
    },
    fit=band,
    before computing xy={l=15pt},
  }
[MilSymb
  [text
    [normal]
    [squashed]
    [small]
    [smallsquashed]
  ]
  [air
    [main\ldots]
    [upper\ldots]
    [lower\ldots]
  ]
   [land
    [main\ldots]
    [upper\ldots]
    [lower\ldots]
  ]
  [equipment
    [main\ldots]
    [mobility\ldots]
  ]
  [installation
    [main\ldots]
    [upper\ldots]
  ]
  [seasurface
    [main\ldots]
    [upper\ldots]
    [lower\ldots]
  ]
  [seasubsurface
    [main\ldots]
    [upper\ldots]
    [lower\ldots]
    [mine\ldots]
  ]
  [space
    [main\ldots]
    [upper\ldots]
    [lower\ldots]
  ]
  [activity
    [main\ldots]
    [upper\ldots]
  ]
    [multi
    [main\ldots]
    [upper\ldots]
    [lower\ldots]
    [upperlower\ldots]
  ]
  [supply\ldots]
  [custom\ldots]
]
\end{forest}
\caption{\MilSymb TikZ Picture Directory Structure.}
\label{directory}
\end{figure}

To add a custom icon or modifier, create a TikZ \texttt{.pic} in the \texttt{custom} directory using \texttt{tikzset}:

\begin{writett}
\begin{verbatim}
\tikzset{
MilSymb custom/user icon/.pic={
  custom TikZ drawing commands go here...
} %comma after bracket is needed if defining multiple .pic.
}
\begin{tikzpicture}
  \MilLand[faction=hostile, main=user icon]
\end{tikzpicture}
\end{verbatim}
\end{writett}

You can also create your own sub directories, such as \texttt{custom/land/main/user icon}. This is recommended if you want to organise your custom shapes by symbol type and position.To use your icon or modifier in a command, simply use the path as the value for a icon or modifier key \texttt{\textbackslash MilLand[faction=friendly, main=path/to/user icon]}. The \texttt{main}, \texttt{upper} and \texttt{lower} keys all accept custom values, as well as the \texttt{left}, \texttt{right} and \texttt{mobility} keys where applicable.

\subsection{Drawing Bounds}

As specified in \DocLink, most icons and modifiers should fit within a template comprising of a regular octagon exactly \textbf{1} unit in width and \textbf{1} unit in height (with the exception of \textit{fullframe} icons and a few others). In commands that specify upper and lower modifiers, the \textbf{main} icon should not exceed a height of \textbf{0.2} units above and below its origin (the two horizontal dotted line in Figure \ref{octagon}). Similarly, the modifiers should also not extend into the area \textbf{0.2} units above and below the origin of the \textbf{main} icon. The key value \texttt{faction=none} on any \MilSymb command (apart from \texttt{OwnShip} or \texttt{MilDebris}, which do not have faction keys) will output this template instead of a frame.

\begin{figure}[H]
\centering
\begin{tikzpicture}
\MilLand[faction=none, scale=4](0,0)(frame)
\dimline[line style={arrows={Triangle}-{Triangle}}, extension start length=0.75, extension end length=0.75, extension end style={thin, black}, extension start style={thin, black}]{($(frame.north) + (3, 0)$)}{($(frame.south) + (3, 0)$)}{1}
\dimline[line style={arrows={Triangle}-{Triangle}}, extension start length=0.5, extension end length=0.5, extension end style={thin, black}, extension start style={thin, black}]{($(frame.north) + (2.5, -1.2)$)}{($(frame.south) + (2.5, 1.2)$)}{0.4}
\dimline[line style={arrows={Triangle}-{Triangle}}, extension start length=0.55, extension end length=0.55, extension end style={thin, black}, extension start style={thin, black}]{($(frame.north) + (2.5, 0)$)}{($(frame.center) + (2.5, 0.8)$)}{0.3}
\dimline[line style={arrows={Triangle}-{Triangle}}, extension start length=0.55, extension end length=0.55, extension end style={thin, black}, extension start style={thin, black}]{($(frame.center) + (2.5, -0.8)$)}{($(frame.south) + (2.5, 0)$)}{0.3}
%\node {Main Anchor};
\draw[red] plot[only marks, mark=*] coordinates{(0,0) (0, 1.36) (0,-1.36)};
\node[anchor=east, inner sep=5pt, color=red] at (0,0) {Main Origin (0,0)};
\node[anchor=east, inner sep=5pt, color=red] at (0,1.36) {Upper Origin (0,0.34)};
\node[anchor=east, inner sep=5pt, color=red] at (0,-1.36) {Lower Origin (0,-0.34)};
\end{tikzpicture}
\caption{Dimensions of the octagon and origins of the icon and modifiers.}
\label{octagon}
\end{figure}

For the \texttt{\textbf{MilMissile}} command, the template is rotated 90\textdegree anticlockwise, and the \texttt{left} and \texttt{right} keys correspond to the \texttt{upper} and \texttt{lower} keys respectively. The \texttt{mobility} origin is located \textbf{0.1} units below the \texttt{south} anchor of the frame.

\subsection{Border Anchors}

\MilSymb defines an anchored bounding box named \textbf{\texttt{M}} around all frames. This has anchor points identical to the \texttt{rectangle} node in TikZ. These can be used as coordinates for drawing icons and modifiers relative to the edge of the frame.

\subsection{Faction Variants}

Most \textit{fullframe} icons have slight variations depending on the faction frame that is being used. To facilitate this, you can create a set of four TikZ \texttt{.pic} in faction sub directories, like so:\\

\noindent\texttt{custom/user icon/friendly/.pic}\\
\texttt{custom/user icon/hostile/.pic}\\
\texttt{custom/user icon/neutral/.pic}\\
\texttt{custom/user icon/unknown/.pic}\\

Then, insert \texttt{/\textbackslash MilSymb@selectedfaction} directly after the \texttt{path/to/user icon} (so it forms \texttt{path/to/user icon/\textbackslash MilSymb@selectedfaction}). \texttt{\textbackslash MilSymb@selectedfaction} will be replaced by the name of the faction, and complete the path to the icon.

\subsection{Using Existing Icons and Modifiers}

To insert an existing icon or modifier into your custom icon use a nested \texttt{.pic} as so: \texttt{\textbackslash pic\{MilSymb category/position/name\}}, where \texttt{command} generally refers to the \MilSymb\  command it is used in as displayed in Figure \ref{directory}, and \texttt{position} refers to . The exceptions are \texttt{supply}, which contains supply icons detailed in \ref{supply}, \texttt{text} which provides common text templates as detailed in \ref{text}, and \texttt{multi} which is detailed in \ref{multi}. \texttt{mine} is also contained in a sub-directory of \texttt{seasubsurface}, instead of its own directory. \texttt{\textbf{MilDebris}} does not use any icons or modifiers, all drawing syntax is contained within the command.

\subsubsection{Text Templates}
\label{text}

\MilSymb\  uses 4 standard text templates for commonly used text in icons and modifiers. Use regular TikZ text syntax for any variations. You can use them by nesting a \texttt{.pic} as before, but adding \texttt{=\{text to display\}} as a suffix, as in \texttt{\textbackslash pic\{MilSymb text/type=\{text to display\}\}}. Note that conventionally up to 3 characters are designed to be used with normal text, and up to 4 with \lq\lq{}squashed\rq\rq{} versions, in order to appear similar to \DocLink guidelines. Any more characters should use a smaller font.

\begin{figure}[H]
\centering
\begin{tikzpicture}
\matrix[column sep=5mm, row sep=5mm]{
\begin{scope}[scale=2, transform shape]
\MilLand[faction=none]
\pic{MilSymb text/normal={Text}};
\end{scope}
&
\begin{scope}[scale=2, transform shape]
\MilLand[faction=none]
\pic{MilSymb text/squashed={Text}};
\end{scope} 
&
\begin{scope}[scale=2, transform shape]
\MilLand[faction=none]
\pic at (0, 0.34) {MilSymb text/small={Text}};
\end{scope} 
&
\begin{scope}[scale=2, transform shape]
\MilLand[faction=none]
\pic at (0, 0.34) {MilSymb text/smallsquashed={Text}};
\end{scope} 
\\
\node{\texttt{text/normal}}; & \node{\texttt{text/squashed}}; & \node{\texttt{text/small}}; & \node{\texttt{text/smallsquashed}}; \\
};
\end{tikzpicture}
\caption{\MilSymb text templates.}
\end{figure}

\subsubsection{Multiple Class}
\label{multi} 

Some \MilSymb icons and modifiers are used in more than one command. In order to avoid code duplication, these are put in their own directory named \texttt{multi} with a single name, even though different aliases may be used in each command. The \texttt{upperlower} sub-directory is used to store modifier glyphs that are used in both the \texttt{upper} and \texttt{lower} positions.

\begin{tabularx}{\linewidth}{|l|s|l|@{}m{0pt}@{}}
\hline
\thead{Name} & \thead{Glyph} & \thead{Usage}&\\ \hline
\texttt{main/amphibious} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/amphibious}} & Test &\\ [1.25cm] \hline
\texttt{main/antenna} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/antenna}} & Test &\\ [1.25cm] \hline
\texttt{main/ammunition} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/ammunition}} & Test &\\ [1.25cm] \hline
\texttt{main/armoured} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/armoured}} & Test &\\ [1.25cm] \hline
\texttt{main/aviation fixed wing} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/aviation fixed wing}} & Test &\\ [1.25cm] \hline
\texttt{main/aviation rotary wing} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/aviation rotary wing}} & Test &\\ [1.25cm] \hline
\texttt{main/bridge} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/bridge}} & Test &\\ [1.25cm] \hline
\texttt{main/chemical biological radiological nuclear} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/chemical biological radiological nuclear}} & Test &\\ [1.25cm] \hline
\texttt{main/drill} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/drill}} & Test &\\ [1.25cm] \hline
\texttt{main/decoy} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/decoy}} & Test &\\ [1.25cm] \hline
\texttt{main/diver} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/diver}} & Test &\\ [1.25cm] \hline
\texttt{main/engineer} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/engineer}} & Test &\\ [1.25cm] \hline
\texttt{main/field artillery} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/field artillery}} & Test &\\ [1.25cm] \hline
\texttt{main/individual} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/individual}} & Test &\\ [1.25cm] \hline
\texttt{main/killing victim} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/killing victim}} & Test &\\ [1.25cm] \hline
\texttt{main/maintenance} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/maintenance}} & Test &\\ [1.25cm] \hline
\texttt{main/major end} & \tikz[baseline=-0.5ex]{\path[local bounding box=M] (-0.5, -0.5) rectangle (0.5, 0.5); \pic{MilSymb multi/main/major end}} & Test &\\ [1.25cm] \hline
\texttt{main/medic} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/medic}} & Test &\\ [1.25cm] \hline
\texttt{main/medical} & \tikz[baseline=-0.5ex]{\path[local bounding box=M] (-0.5, -0.5) rectangle (0.5, 0.5); \pic{MilSymb multi/main/medical}} & Test &\\ [1.25cm] \hline
\texttt{main/medical treatment facility} & \tikz[baseline=-0.5ex]{\path[local bounding box=M] (-0.5, -0.5) rectangle (0.5, 0.5); \pic{MilSymb multi/main/medical treatment facility}} & Test &\\ [1.25cm] \hline
\texttt{main/missile} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/missile}} & Test &\\ [1.25cm] \hline
\texttt{main/naval} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/naval}} & Test &\\ [1.25cm] \hline
\texttt{main/person} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/person}} & Test &\\ [1.25cm] \hline
\texttt{main/petroleum oil and lubricants} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/petroleum oil and lubricants}} & Test &\\ [1.25cm] \hline
\texttt{main/psychological operations} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/psychological operations}} & Test &\\ [1.25cm] \hline
\texttt{main/psychological operations filled} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/psychological operations filled}} & Test &\\ [1.25cm] \hline
\texttt{main/radar} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/radar}} & Test &\\ [1.25cm] \hline
\texttt{main/repair parts} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/repair parts}} & Test &\\ [1.25cm] \hline
\texttt{main/sailing boat} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/sailing boat}} & Test &\\ [1.25cm] \hline
\texttt{main/sensor} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/sensor}} & Test &\\ [1.25cm] \hline
\texttt{main/signal}* & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/signal/neutral}} & Test &\\ [1.25cm] \hline
\texttt{main/transportation} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/transportation}} & Test &\\ [1.25cm] \hline
\texttt{main/victim of an attempted crime} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/victim of an attempted crime}} & Test &\\ [1.25cm] \hline
\texttt{main/water} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/water}} & Test &\\ [1.25cm] \hline
\texttt{main/water purification} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/main/water purification}} & Test &\\ [1.25cm] \hline
\texttt{upper/naval} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/upper/naval}} & Test &\\ [1.25cm] \hline
\texttt{upper/medic} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/upper/medic}} & Test &\\ [1.25cm] \hline
\texttt{upper/runway} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/upper/runway}} & Test &\\ [1.25cm] \hline
\texttt{lower/pack animal} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/lower/pack animal}} & Test &\\ [1.25cm] \hline
\texttt{upperlower/maintenance} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/upperlower/maintenance}} & Test &\\ [1.25cm] \hline
\texttt{upperlower/railroad} & \tikz[baseline=-0.5ex]{\pic{MilSymb multi/upperlower/railroad}} & Test &\\ [1.25cm] \hline
\multicolumn{4}{c}{}\\
\caption{Table of Multiple Class Icons and Modifiers}
\end{tabularx}


\subsubsection{Hidden Glyphs} 

There are some \texttt{.pic} that are not used as an icon or modifier directly, but are used to construct other icons or modifiers because they are used multiple times.

\begin{table}[H]
\centering
\begin{tabular}{|l|s|l|@{}m{0pt}@{}}
\hline
\thead{Name} & \thead{Glyph} & \thead{Usage}&\\ \hline
\texttt{equipment/main/weapon} & \tikz[baseline=-0.5ex]{\pic{MilSymb equipment/main/weapon}} & Test &\\ [1.25cm] \hline
\texttt{equipment/main/air defence} & \tikz[baseline=-0.5ex]{\pic{MilSymb equipment/main/air defence}} & Test &\\ [1.25cm] \hline
\texttt{equipment/main/anti tank} & \tikz[baseline=-0.5ex]{\pic{MilSymb equipment/main/anti tank}} & Test &\\ [1.25cm] \hline
\texttt{equipment/main/high trajectory indirect fire weapons system} & \tikz[baseline=-0.5ex]{\pic{MilSymb equipment/main/high trajectory indirect fire weapons system}} & Test &\\  [1.25cm] \hline
\texttt{equipment/main/side bands} & \tikz[baseline=-0.5ex]{\pic{MilSymb equipment/main/side bands}} & Test &\\ [1.25cm] \hline
\texttt{equipment/main/single band} & \tikz[baseline=-0.5ex]{\pic{MilSymb equipment/main/single band}} & Test &\\ [1.25cm] \hline
\texttt{equipment/main/double band} & \tikz[baseline=-0.5ex]{\pic{MilSymb equipment/main/double band}} & Test &\\ [1.25cm] \hline
\texttt{equipment/main/triple band} & \tikz[baseline=-0.5ex]{\pic{MilSymb equipment/main/triple band}} & Test &\\ [1.25cm] \hline
\texttt{seasubsurface/main/half sea mine} & \tikz[baseline=-0.5ex]{\pic{MilSymb seasubsurface/main/half sea mine}} & Test &\\ [1.25cm] \hline
\texttt{seasubsurface/main/sea surface} & \tikz[baseline=-0.5ex]{\pic{MilSymb seasubsurface/main/sea surface}} & Test &\\ [1.25cm] \hline
\texttt{supply/medicalbar} & \tikz[baseline=-0.5ex]{\pic{MilSymb supply/medicalbar/neutral}} & Test &\\ [1.25cm] \hline
\end{tabular}
\caption{Table of Hidden Glyphs}
\end{table}

\section{Examples}

\section{Control Measures}

Control Measures are planned to be included in the next major version of \MilSymb. Please see the \href{https://github.com/ralphieraccoon/MilSymb}{GitHub} repository for further information.

\end{document}
